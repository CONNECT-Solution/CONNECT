--$Header: /cvsroot/ebxmlrr/omar/conf/database/database.sql.template,v 1.11 2006/08/06 17:05:06 farrukh_najmi Exp $
--
-- Normative SQL Schema for ebXML Registry withe the exception of index definitions which are non-normative
--
-- Workaround for the databases:
--
--  Oracle:
--      - Oracle does not support boolean field. So the we have to use VARCHAR(1)
--      - Timestamp field does not allow to have timezone (e.g. +8). We use
--        VARCHAR(30) to store timestamp. The field type 'timestamp with time
--        zone' is not available in other databases.
--  DB2:
--      - Some of the names of tables and indexed have been shortened to below 18
--        characters to accommodate the limit

--TODO: Fix spec to get rid of 1 in names such as AssocType1 and SlotType1 in version 4.

--Must drop views before tables for databases that do not support cascade
@cleandb@@noCascade@DROP VIEW Identifiable;
@cleandb@@noCascade@DROP VIEW RegistryObject;


@createdb@CREATE TABLE Association (
@createdb@--Identifiable Attributes
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.association@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--Association attributes
@createdb@  associationType	VARCHAR(256) NOT NULL,
@createdb@  sourceObject		VARCHAR(256) NOT NULL,
@createdb@  targetObject  	VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE Association
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE AuditableEvent (
@createdb@--Identifiable Attributes
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.auditableevent@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--AuditableEvent attributes
@createdb@  requestId             VARCHAR(256) NOT NULL,
@createdb@  eventType			VARCHAR(256) NOT NULL,
@createdb@  timeStamp_        VARCHAR(30) NOT NULL,
@createdb@  user_				VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE AuditableEvent
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE AffectedObject (
@createdb@
@createdb@--Each row is a relationship between a RegistryObject and an AuditableEvent
@createdb@--Enables many-to-many relationship between effected RegistryObjects and AuditableEvents
@createdb@  id                            VARCHAR(256) NOT NULL,
@createdb@  home                      VARCHAR(256),
@createdb@  eventId                   VARCHAR(256) NOT NULL,
@createdb@
@createdb@  PRIMARY KEY (id, eventId)
@createdb@);
@cleandb@DROP TABLE AffectedObject
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Classification (
@createdb@--Identifiable Attributes
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.classification@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--Classfication attributes.
@createdb@  classificationNode		VARCHAR(256),
@createdb@  classificationScheme		VARCHAR(256),
@createdb@  classifiedObject		VARCHAR(256) NOT NULL,
@createdb@  nodeRepresentation		VARCHAR(256)
@createdb@);
@cleandb@DROP TABLE Classification
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE ClassificationNode (
@createdb@--Identifiable Attributes
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.classificationnode@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--ClassficationNode attributes
@createdb@  code					VARCHAR(256),
@createdb@  parent				VARCHAR(256),
@createdb@  path					VARCHAR(1024)
@createdb@);
@cleandb@DROP TABLE ClassificationNode
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE ClassScheme (
@createdb@--Identifiable Attributes
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.classscheme@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--ClassificationScheme attributes
@createdb@  isInternal		VARCHAR(1) NOT NULL,
@createdb@  nodeType		VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE ClassScheme
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE ExternalIdentifier (
@createdb@--Identifiable Attributes
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.externalidentifier@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--ExternalIdentifier attributes
@createdb@  registryObject	VARCHAR(256) NOT NULL,
@createdb@  identificationScheme		VARCHAR(256) NOT NULL,
@createdb@  value				VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE ExternalIdentifier
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE ExternalLink (
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256),
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--ExternalLink attributes
@createdb@  externalURI		VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE ExternalLink
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE ExtrinsicObject (
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256),
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--ExtrinsicObject attributes
@createdb@  isOpaque			VARCHAR(1) NOT NULL,
@createdb@  mimeType			VARCHAR(256),
@createdb@
@createdb@--contentVersionInfo flattened
@createdb@  contentVersionName		VARCHAR(16),
@createdb@  contentVersionComment	VARCHAR(256)
@createdb@
@createdb@);
@cleandb@DROP TABLE ExtrinsicObject
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Federation (
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.federation@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--Federation attributes: currently none defined
@createdb@--xsd:duration stored in string form since no corresponding SQL type. Is 32 long enough?
@createdb@  replicationSyncLatency    VARCHAR(32)
@createdb@);
@cleandb@DROP TABLE Federation
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Name_ (
@createdb@--LocalizedString attributes flattened for Name
@createdb@  charset			VARCHAR(32),
@createdb@  lang				VARCHAR(32) NOT NULL,
@createdb@  value				VARCHAR(1024) NOT NULL,
@createdb@--The RegistryObject id for the parent RegistryObject for which this is a Name
@createdb@  parent			VARCHAR(256) NOT NULL,
@createdb@  PRIMARY KEY (parent, lang)
@createdb@);
@cleandb@DROP TABLE Name_
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Description (
@createdb@--LocalizedString attributes flattened for Description
@createdb@  charset			VARCHAR(32),
@createdb@  lang				VARCHAR(32) NOT NULL,
@createdb@  value				VARCHAR(1024) NOT NULL,
@createdb@--The RegistryObject id for the parent RegistryObject for which this is a Name
@createdb@  parent			VARCHAR(256) NOT NULL,
@createdb@  PRIMARY KEY (parent, lang)
@createdb@);
@cleandb@DROP TABLE Description
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE UsageDescription (
@createdb@--LocalizedString attributes flattened for UsageDescription
@createdb@  charset			VARCHAR(32),
@createdb@  lang				VARCHAR(32) NOT NULL,
@createdb@  value				VARCHAR(1024) NOT NULL,
@createdb@--The RegistryObject id for the parent RegistryObject for which this is a Name
@createdb@  parent			VARCHAR(256) NOT NULL,
@createdb@  PRIMARY KEY (parent, lang)
@createdb@);
@cleandb@DROP TABLE UsageDescription
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE ObjectRef (
@createdb@--Stores remote ObjectRefs only
@createdb@--Identifiable Attributes
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                          VARCHAR(256)
@createdb@);
@cleandb@DROP TABLE ObjectRef
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Organization (
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.organization@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--Organization attributes
@createdb@--Organization.address attribute is in PostalAddress table
@createdb@  parent			VARCHAR(256),
@createdb@--primary contact for Organization, points to a User.
@createdb@  primaryContact	VARCHAR(256)
@createdb@--Organization.telephoneNumbers attribute is in TelephoneNumber table
@createdb@);
@cleandb@DROP TABLE Organization
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE RegistryPackage (
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.registrypackage@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256)
@createdb@
@createdb@--RegistryPackage attributes: currently none defined
@createdb@);
@cleandb@DROP TABLE RegistryPackage
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE PostalAddress (
@createdb@  city				VARCHAR(64),
@createdb@  country			VARCHAR(64),
@createdb@  postalCode		VARCHAR(64),
@createdb@  state				VARCHAR(64),
@createdb@  street			VARCHAR(64),
@createdb@  streetNumber		VARCHAR(32),
@createdb@--The parent object that this is an address for
@createdb@  parent			VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE PostalAddress
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE EmailAddress (
@createdb@  address			VARCHAR(64) NOT NULL,
@createdb@  type				VARCHAR(256),
@createdb@--The parent object that this is an email address for
@createdb@  parent			VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE EmailAddress
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Registry (
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.registry@,
@createdb@  status		VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--Registry attributes
@createdb@--xsd:duration stored in string form since no corresponding SQL type. Is 32 long enough?
@createdb@  catalogingSyncLatency    VARCHAR(32) DEFAULT 'P1D',
@createdb@  conformanceProfile      VARCHAR(16),
@createdb@  operator  VARCHAR(256) NOT NULL,
@createdb@
@createdb@--xsd:duration stored in string form since no corresponding SQL type. Is 32 long enough?
@createdb@  replicationSyncLatency    VARCHAR(32) DEFAULT 'P1D',
@createdb@  specificationVersion    VARCHAR(8) NOT NULL
@createdb@);
@cleandb@DROP TABLE Registry
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Service (
@createdb@  id			VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                  VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.service@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256)
@createdb@
@createdb@--Service attributes: currently none defined
@createdb@);
@cleandb@DROP TABLE Service
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE ServiceBinding (
@createdb@  id			VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                  VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.servicebinding@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--ServiceBinding attributes
@createdb@  service			VARCHAR(256) NOT NULL,
@createdb@  accessURI			VARCHAR(256),
@createdb@  targetBinding		VARCHAR(256)
@createdb@);
@cleandb@DROP TABLE ServiceBinding
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Slot (
@createdb@--Multiple rows of Slot make up a single Slot
@createdb@  sequenceId		INT NOT NULL,
@createdb@  name_				VARCHAR(256) NOT NULL,
@createdb@  slotType			VARCHAR(256),
@createdb@  value				VARCHAR(256),
@createdb@--The parent RegistryObject that this is a Slot for
@createdb@  parent			VARCHAR(256) NOT NULL,
@createdb@  PRIMARY KEY (parent, name_, sequenceId)
@createdb@);
@cleandb@DROP TABLE Slot
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE SpecificationLink (
@createdb@  id			VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                  VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.specificationlink@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--SpecificationLink attributes
@createdb@  serviceBinding	VARCHAR(256) NOT NULL,
@createdb@  specificationObject VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE SpecificationLink
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Subscription (
@createdb@  id			VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                  VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.subscription@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--Subscription attributes
@createdb@  selector              VARCHAR(256) NOT NULL,
@createdb@  endTime               VARCHAR(30),
@createdb@
@createdb@--xsd:duration stored in string form since no corresponding SQL type. Is 32 long enough?
@createdb@  notificationInterval  VARCHAR(32) DEFAULT 'P1D',
@createdb@  startTime             VARCHAR(30)
@createdb@);
@cleandb@DROP TABLE Subscription
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE NotifyAction (
@createdb@  notificationOption       VARCHAR(256) NOT NULL,
@createdb@
@createdb@--Either a ref to a Service, a String representing an email address in form: mailto:user@server,
@createdb@--or a String representing an http URLin form: http://url
@createdb@  endPoint                    VARCHAR(256) NOT NULL,
@createdb@
@createdb@--Parent Subscription reference
@createdb@  parent			VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE NotifyAction
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Notification (
@createdb@  id				VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                      VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.notification@,
@createdb@  status		VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--Notification attributes
@createdb@  subscription        VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE Notification
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE NotificationObject (
@createdb@
@createdb@--Each row is a relationship between a RegistryObject and a Notification
@createdb@--Enables a Notification to have multiple RegistryObjects
@createdb@  notificationId             VARCHAR(256) NOT NULL,
@createdb@  registryObjectId           VARCHAR(256) NOT NULL,
@createdb@
@createdb@  PRIMARY KEY (notificationId, registryObjectId)
@createdb@);
@cleandb@DROP TABLE NotificationObject
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE AdhocQuery (
@createdb@  id			VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                  VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.adhocquery@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--AdhocQuery attributes. Flattend QueryExpression attributes
@createdb@  queryLanguage		VARCHAR(256) NOT NULL,
@createdb@  query			VARCHAR(4096) NOT NULL
@createdb@);
@cleandb@DROP TABLE AdhocQuery
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE UsageParameter (
@createdb@  value				VARCHAR(1024) NOT NULL,
@createdb@--The parent SpecificationLink that this is a usage parameter for
@createdb@  parent			VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE UsageParameter
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE TelephoneNumber (
@createdb@  areaCode			VARCHAR(8),
@createdb@  countryCode		VARCHAR(8),
@createdb@  extension			VARCHAR(8),
@createdb@  -- we use "number_" instead of number, which is reserved in Oracle
@createdb@  number_			VARCHAR(16),
@createdb@  phoneType			VARCHAR(256),
@createdb@  parent			VARCHAR(256) NOT NULL
@createdb@);
@cleandb@DROP TABLE TelephoneNumber
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE User_ (
@createdb@  id			VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                  VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.user_@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--User attributes
@createdb@--address is in PostalAddress table
@createdb@--email is in EMailAddress table
@createdb@--personName flattened
@createdb@  personName_firstName	VARCHAR(64),
@createdb@  personName_middleName	VARCHAR(64),
@createdb@  personName_lastName	VARCHAR(64)
@createdb@--telephoneNumbers is in TelephoneNumber table
@createdb@);
@cleandb@DROP TABLE User_
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE TABLE Person (
@createdb@  id			VARCHAR(256) NOT NULL PRIMARY KEY,
@createdb@  home                  VARCHAR(256),
@createdb@--RegistryObject Attributes
@createdb@  lid				VARCHAR(256) NOT NULL,
@createdb@  objectType		VARCHAR(256) @check.person@,
@createdb@  status			VARCHAR(256) NOT NULL,
@createdb@
@createdb@--VersionInfo flattened
@createdb@  versionName		VARCHAR(16),
@createdb@  comment_		VARCHAR(256),
@createdb@
@createdb@--User attributes
@createdb@--address is in PostalAddress table
@createdb@--email is in EMailAddress table
@createdb@--personName flattened
@createdb@  personName_firstName	VARCHAR(64),
@createdb@  personName_middleName	VARCHAR(64),
@createdb@  personName_lastName	VARCHAR(64)
@createdb@--telephoneNumbers is in TelephoneNumber table
@createdb@);
@cleandb@DROP TABLE Person
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@--Special case: The create table for RepositoryItem is done via Hibernate
@cleandb@DROP TABLE RepositoryItem
@cleandb@@Cascade@CASCADE
@cleandb@;

@createdb@CREATE VIEW Identifiable (
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@) AS
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM AdhocQuery
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Association
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM AuditableEvent
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Classification
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM ClassificationNode
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM ClassScheme
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM ExternalIdentifier
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM ExternalLink
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM ExtrinsicObject
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Federation
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Organization
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Registry
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM RegistryPackage
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Service
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM ServiceBinding
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM SpecificationLink
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Subscription
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM User_
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM Person
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home
@createdb@ FROM ObjectRef
@createdb@;
@cleandb@@noCascade@DROP VIEW Identifiable;

@createdb@CREATE VIEW RegistryObject (
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@) AS
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM AdhocQuery
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Association
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM AuditableEvent
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Classification
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM ClassificationNode
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM ClassScheme
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM ExternalIdentifier
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM ExternalLink
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM ExtrinsicObject
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Federation
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Organization
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Registry
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM RegistryPackage
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Service
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM ServiceBinding
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM SpecificationLink
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Subscription
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM User_
@createdb@ UNION ALL
@createdb@ SELECT
@createdb@--Identifiable Attributes
@createdb@  id,
@createdb@  home,
@createdb@--RegistryObject Attributes
@createdb@  lid,
@createdb@  objectType,
@createdb@  status,
@createdb@--VersionInfo flattened
@createdb@  versionName,
@createdb@  comment_
@createdb@ FROM Person
@createdb@;
@cleandb@@noCascade@DROP VIEW RegistryObject;

--All index definitions are non-normative

---
-- FOR ORACLE, YOU MUST COMMMENT ALL THE FOLLOWING LINES BECAUSE ORACLE DOES
-- NOT ALLOW CREATE INDEX ON PRIMARY KEYS
--

--lid index
@indexPrimaryKey@@createdb@CREATE INDEX lid_AdhQuery_idx ON AdhocQuery(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_Assoc_idx ON Association(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_AUEVENT_idx ON AuditableEvent(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_Class_idx ON Classification(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_Node_idx ON ClassificationNode(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_SCHEME_idx ON ClassScheme(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_EID_idx ON ExternalIdentifier(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_ExLink_idx ON ExternalLink(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_EXTOBJ_idx ON ExtrinsicObject(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_FED_idx ON Federation(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_ORG_idx ON Organization(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_Registry_idx ON Registry(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_PKG_idx ON RegistryPackage(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_Service_idx ON Service(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_BIND_idx ON ServiceBinding(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_SLnk_idx ON SpecificationLink(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_SUBS_idx ON Subscription(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_User_idx ON User_(lid);
@indexPrimaryKey@@createdb@CREATE INDEX lid_Person_idx ON Person(lid);
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_AdhQuery_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_Assoc_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_AUEVENT_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_Class_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_Node_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_SCHEME_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_EID_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_ExLink_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_EXTOBJ_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_FED_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_ORG_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_Registry_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_PKG_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_Service_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_BIND_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_SLnk_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_SUBS_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_User_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX lid_Person_idx;


--id index
@indexPrimaryKey@@createdb@CREATE INDEX id_AdhQuery_idx ON AdhocQuery(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_Assoc_idx ON Association(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_AUEVENT_idx ON AuditableEvent(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_Class_idx ON Classification(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_Node_idx ON ClassificationNode(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_SCHEME_idx ON ClassScheme(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_EID_idx ON ExternalIdentifier(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_ExLink_idx ON ExternalLink(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_EXTOBJ_idx ON ExtrinsicObject(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_FED_idx ON Federation(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_ObjectRef_idx ON ObjectRef(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_ORG_idx ON Organization(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_Registry_idx ON Registry(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_PKG_idx ON RegistryPackage(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_Service_idx ON Service(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_BIND_idx ON ServiceBinding(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_SLnk_idx ON SpecificationLink(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_SUBS_idx ON Subscription(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_User_idx ON User_(id);
@indexPrimaryKey@@createdb@CREATE INDEX id_Person_idx ON Person(id);
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_AdhQuery_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_Assoc_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_AUEVENT_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_Class_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_Node_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_SCHEME_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_EID_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_ExLink_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_EXTOBJ_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_FED_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_ObjectRef_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_ORG_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_Registry_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_PKG_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_Service_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_BIND_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_SLnk_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_SUBS_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_User_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_Person_idx;

--home index
@indexPrimaryKey@@createdb@CREATE INDEX home_AdhQuery_idx ON AdhocQuery(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_Assoc_idx ON Association(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_AUEVENT_idx ON AuditableEvent(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_Class_idx ON Classification(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_Node_idx ON ClassificationNode(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_SCHEME_idx ON ClassScheme(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_EID_idx ON ExternalIdentifier(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_ExLink_idx ON ExternalLink(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_EXTOBJ_idx ON ExtrinsicObject(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_FED_idx ON Federation(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_ORG_idx ON Organization(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_Registry_idx ON Registry(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_PKG_idx ON RegistryPackage(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_Service_idx ON Service(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_BIND_idx ON ServiceBinding(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_SLnk_idx ON SpecificationLink(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_SUBS_idx ON Subscription(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_User_idx ON User_(home);
@indexPrimaryKey@@createdb@CREATE INDEX home_Person_idx ON Person(home);
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_AdhQuery_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_Assoc_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_AUEVENT_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_Class_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_Node_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_SCHEME_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_EID_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_ExLink_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_EXTOBJ_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_FED_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_ORG_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_Registry_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_PKG_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_Service_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_BIND_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_SLnk_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_SUBS_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_User_idx;
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX home_Person_idx;

@indexPrimaryKey@@createdb@CREATE INDEX id_evId_AFOBJ_idx ON AffectedObject(id, eventId);
@indexPrimaryKey@@cleandb@@noCascade@DROP INDEX id_evId_AFOBJ_idx;


--
-- Following indexes should be OK to use in all databases
--

--index on AffectedObject
@createdb@CREATE INDEX id_AFOBJ_idx ON AffectedObject(id);
@cleandb@@noCascade@DROP INDEX id_AFOBJ_idx;
@createdb@CREATE INDEX evid_AFOBJ_idx ON AffectedObject(eventid);
@cleandb@@noCascade@DROP INDEX evid_AFOBJ_idx;

--index on AuditableEvent
@createdb@CREATE INDEX lid_AUEVENT_evtTyp ON AuditableEvent(eventType);

--name index
@createdb@CREATE INDEX value_Name_idx ON Name_(value);
@createdb@@key-over-1000B@CREATE INDEX lngval_Name_idx ON Name_(lang, value);
@cleandb@@noCascade@DROP INDEX value_Name_idx;
@cleandb@@noCascade@@key-over-1000B@DROP INDEX lngval_Name_idx;

--description index
@createdb@CREATE INDEX value_Desc_idx ON Description(value);
@createdb@@key-over-1000B@CREATE INDEX lngval_Desc_idx ON Description(lang, value);
@cleandb@@noCascade@DROP INDEX value_Desc_idx;
@cleandb@@noCascade@@key-over-1000B@DROP INDEX lngval_Desc_idx;

--UsageDesc index
@createdb@CREATE INDEX value_UsgDes_idx ON UsageDescription(value);
@createdb@@key-over-1000B@CREATE INDEX lngval_UsgDes_idx ON UsageDescription(lang, value);
@cleandb@@noCascade@DROP INDEX value_UsgDes_idx;
@cleandb@@noCascade@@key-over-1000B@DROP INDEX lngval_UsgDes_idx;

--Indexes on Assoc

@createdb@CREATE INDEX src_Ass_idx ON Association(sourceObject);
@createdb@CREATE INDEX tgt_Ass_idx ON Association(targetObject);
@createdb@CREATE INDEX type_Ass_idx ON Association(associationType);
@cleandb@@noCascade@DROP INDEX src_Ass_idx;
@cleandb@@noCascade@DROP INDEX tgt_Ass_idx;
@cleandb@@noCascade@DROP INDEX type_Ass_idx;


--Indexes on Class

@createdb@CREATE INDEX clsObj_Class_idx ON Classification(classifiedObject);
@createdb@CREATE INDEX node_Class_idx ON Classification(classificationNode);
@cleandb@@noCascade@DROP INDEX clsObj_Class_idx;
@cleandb@@noCascade@DROP INDEX node_Class_idx;

--Indexes on ClassNode

@createdb@CREATE INDEX parent_Node_idx ON ClassificationNode(parent);
@createdb@CREATE INDEX code_Node_idx ON ClassificationNode(code);
@createdb@CREATE INDEX path_Node_idx ON ClassificationNode(path);
@cleandb@@noCascade@DROP INDEX parent_Node_idx;
@cleandb@@noCascade@DROP INDEX code_Node_idx;
@cleandb@@noCascade@DROP INDEX path_Node_idx;

--Indexes on ExIdentifier

@createdb@CREATE INDEX ro_EID_idx ON ExternalIdentifier(registryObject);
@cleandb@@noCascade@DROP INDEX ro_EID_idx;

--Indexes on ExLink

@createdb@CREATE INDEX uri_ExLink_idx ON ExternalLink(externalURI);
@cleandb@@noCascade@DROP INDEX uri_ExLink_idx;

--Indexes on ExtrinsicObject

--Indexes on Organization
@createdb@CREATE INDEX parent_ORG_idx ON Organization(parent);
@cleandb@@noCascade@DROP INDEX parent_ORG_idx;

--Indexes on PostalAddress

@createdb@CREATE INDEX parent_PstlAdr_idx ON PostalAddress(parent);
@createdb@CREATE INDEX city_PstlAdr_idx ON PostalAddress(city);
@createdb@CREATE INDEX cntry_PstlAdr_idx ON PostalAddress(country);
@createdb@CREATE INDEX pCode_PstlAdr_idx ON PostalAddress(postalCode);
@cleandb@@noCascade@DROP INDEX parent_PstlAdr_idx;
@cleandb@@noCascade@DROP INDEX city_PstlAdr_idx;
@cleandb@@noCascade@DROP INDEX cntry_PstlAdr_idx;
@cleandb@@noCascade@DROP INDEX pCode_PstlAdr_idx;

--Indexes on EmailAddress

@createdb@CREATE INDEX parent_EmlAdr_idx ON EmailAddress(parent);
@cleandb@@noCascade@DROP INDEX parent_EmlAdr_idx;

--Indexes on ServiceBinding

@createdb@CREATE INDEX service_BIND_idx ON ServiceBinding(service);
@cleandb@@noCascade@DROP INDEX service_BIND_idx;

--Indexes on Slot

@createdb@CREATE INDEX parent_Slot_idx ON Slot(parent);
@createdb@CREATE INDEX name_Slot_idx ON Slot(name_);
@cleandb@@noCascade@DROP INDEX parent_Slot_idx;
@cleandb@@noCascade@DROP INDEX name_Slot_idx;

--Indexes on SpecLink

@createdb@CREATE INDEX binding_SLnk_idx ON SpecificationLink(serviceBinding);
@createdb@CREATE INDEX spec_SLnk_idx ON SpecificationLink(specificationObject);
@cleandb@@noCascade@DROP INDEX binding_SLnk_idx;
@cleandb@@noCascade@DROP INDEX spec_SLnk_idx;

--Indexes on TelephoneNumber

@createdb@CREATE INDEX parent_Phone_idx ON TelephoneNumber(parent);
@cleandb@@noCascade@DROP INDEX parent_Phone_idx;

--Indexes on User
@createdb@CREATE INDEX lastNm_User_idx ON User_(personName_lastName);
@cleandb@@noCascade@DROP INDEX lastNm_User_idx;

--Indexes on Person
@createdb@CREATE INDEX lastNm_Person_idx ON Person(personName_lastName);
@cleandb@@noCascade@DROP INDEX lastNm_Person_idx;
