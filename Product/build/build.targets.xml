<?xml version="1.0" encoding="UTF-8"?>
<project name="build.targets" basedir=".">

    <dirname property="build.targets.basedir" file="${ant.file.build.targets}"/>
    <property name="build.targets.basedir.location" location="${build.targets.basedir}"/>
    <property name="build.targets.thirdparty.dir" location="${build.targets.basedir}/../../ThirdParty"/>

    <script language="javascript">
        <![CDATA[
        importClass(Packages.com.agilex.ant.TargetListener);

        var targetListener = new TargetListener();
        project.setProjectReference(targetListener);
        project.addBuildListener(targetListener);
    ]]>
        <classpath>
            <fileset dir="${build.targets.thirdparty.dir}/AntExtraLibs">
                <include name="agilex-ant-tasks.jar"/>
            </fileset>
        </classpath>
    </script>

    <import file="properties.build.xml" />
    <import file="common.build.xml" />
    <import file="build.macros.xml"/>

    <import file="${build.targets.basedir.location}/../Install/deploy.xml"/>

    <target name="create.deploy.list.xml">
        <xmltask dest="${deploy.application.list.file.path}" outputter="simple:3">
            <insert path="/" xml="&lt;applications&gt;&lt;wars/&gt;&lt;shared/&gt;&lt;ejbs/&gt;&lt;execs/&gt;&lt;/applications&gt;"/>
        </xmltask>
    </target>

    <target name="copy.deployable.artifacts">
        <call target="addentry.deploy.list.xml" if="${deploy.isDeployable}"/>
        <call target="copy.artifacts.to.development" if="${deploy.isDeployable}"/>
    </target>
</project>