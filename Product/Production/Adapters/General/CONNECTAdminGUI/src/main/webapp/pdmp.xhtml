<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    
   <h:body>
        <ui:composition template="/resources/Templates/BaseTemplate.xhtml">
            <ui:define name="metatag"></ui:define>
            <ui:define name="content">
                <h1 class="section-header">Patient Prescription Drug Monitoring Search</h1>

                <!-- BEGIN:  MAIN TAB SECTION -->
                <p:tabView id="pdmpSearchTabView" activeIndex="#{pdmpBean.activeIndex}" cache="false" effect="fade" effectDuration="normal" dynamic="true" styleClass="tabs-override tabs-ovr-teal">
                    <div class="tab-content">
                        <!-- BEGIN:  PDMP SEARCH TAB -->
                        <p:tab title="Prescription Drug Search" closable="false">
                            <h:form class="form-horizontal" role="form" id="pdmpForm">
                                <div class="tab-pane active" id="patient">
                                    <div class="content-block">
                                        <h2 class="subsection-header">Search</h2>
                                        <div class="content" >

                                            <!-- BEGIN:  PDMP SEARCH FORM -->
                                            <div class="form-block center-block">
                                                
                                                <!-- Jason Last edit -->
                                                
                                                <p:messages id="PatientPDMPCriteria" autoUpdate="true" closable="true" severity="error" redisplay="false" />
                                                <div class="form-group">
                                                    <h:outputLabel for="organization" class="col-sm-3 control-label" id="labelOraganization" value="Organization:" />
                                                    <div class="col-sm-9">
                                                        <h:selectOneMenu class="form-control" id="organization" value="#{patientSearchBean.organization}" required="true" requiredMessage="Organization required.">
                                                            <f:selectItem itemLabel="---" itemValue="#{null}" noSelectionOption="true" />
                                                            <f:selectItems value="#{patientSearchBean.organizationList}"/>
                                                        </h:selectOneMenu>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <h:outputLabel for="inputFirstName" class="col-sm-3 control-label" id="labelFirstName" value="First Name:" />
                                                    <div class="col-sm-9">
                                                        <p:inputText styleClass="form-control" value="#{patientSearchBean.firstName}" id="inputFirstName" maxlength="20" required="true" requiredMessage="First Name required."/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <h:outputLabel for="inputLastName" class="col-sm-3 control-label" id="labelLastName" value="Last Name:" />
                                                    <div class="col-sm-9">
                                                        <p:inputText styleClass="form-control" value="#{patientSearchBean.lastName}" id="inputLastName" maxlength="20" required="true" requiredMessage="Last Name required." />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <h:outputLabel for="inputDateOfBirth" class="col-sm-3 control-label" id="labelDateOfBirth" value="Date Of Birth:" />
                                                    <div class="col-sm-9">
                                                        <p:calendar id="inputDateOfBirth" value="#{patientSearchBean.dateOfBirth}" showOn="button" pattern="MM/dd/yyyy" required="true" requiredMessage="Date Of Birth Required"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <h:outputLabel for="inputGender" class="col-sm-3 control-label" id="labelGender" value="Gender"/>
                                                    <div class="col-sm-9">
                                                        <h:selectOneMenu class="form-control" id="inputGender" value="#{patientSearchBean.gender}" required="true" requiredMessage="Gender required." >
                                                            <f:selectItem itemLabel="---" itemValue="#{null}" noSelectionOption="true" />
                                                            <f:selectItems value="#{patientSearchBean.genderList}"/>
                                                        </h:selectOneMenu>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <div class="form-button-row">
                                                            <p:commandButton id="ResetPatientTab" value="Clear" styleClass="btn btn-default" action="#{patientSearchBean.clearPatientTab()}" immediate="true" update=":patientSearchTabView"/>
                                                            <p:commandButton id="searchPatient" update=":patientSearchTabView, patientResult" value="Search" styleClass="btn btn-primary" icon="ui-icon-search" action="#{patientSearchBean.searchPatient()}"/>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- BEGIN:  PATIENT SEARCH RESULTS -->
                                                <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <p:outputLabel value="#{patientSearchBean.patientMessage}" styleClass="uc-search-result-title" />
                                                        <div class="table-responsive table-props">
                                                            <h:dataTable id="patientResult" value="#{patientSearchBean.patientList}" var="patient" styleClass="table table-striped table-domains" rendered="#{patientSearchBean.patientFound}">
                                                                <h:column>
                                                                    <!-- column header -->
                                                                    <f:facet name="header">Name</f:facet>
                                                                    <!-- row record -->
                                                                    #{patient.name}
                                                                </h:column>
                                                                <h:column>
                                                                    <f:facet name="header">Patient ID</f:facet>
                                                                        #{patient.patientId}
                                                                </h:column>
                                                                <h:column>
                                                                    <f:facet name="header">Organization</f:facet>
                                                                        #{patient.organizationName}
                                                                </h:column>
                                                                <h:column>
                                                                    <f:facet name="header"></f:facet>
                                                                    <p:commandButton id="viewDetails1" value="View Details" styleClass="btn btn-continue pull-right" icon="ui-icon-carat-1-e" iconPos="right" action="#{patientSearchBean.switchTab()}" update=":patientSearchTabView"/>
                                                                </h:column>
                                                            </h:dataTable>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- END:  PATIENT SEARCH RESULTS -->
                                            </div>
                                            <!-- END:  PATIENT SEARCH FORM -->
                                        </div>
                                    </div>
                                </div>
                            </h:form>
                        </p:tab>
                    </div>
                </p:tabView>
            </ui:define>
        </ui:composition>
   </h:body>
</html>
