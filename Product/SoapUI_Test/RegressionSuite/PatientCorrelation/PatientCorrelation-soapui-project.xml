<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project abortOnError="false" name="PatientCorrelation" resourceRoot="${projectDir}" runType="SEQUENTIAL" soapui-version="4.5.1" activeEnvironment="Default" xmlns:con="http://eviware.com/soapui/config">
	<con:settings/>
	<con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation}PatientCorrelationBinding" definition="../../target/wsdl/NhincComponentPatientCorrelation.wsdl" name="PatientCorrelationBinding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:settings/>
		
		<con:endpoints>
			
			
			
			
			<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
			
		</con:endpoints>
		<con:operation action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation:AddPatientCorrelationRequestMessage" anonymous="optional" bindingOperationName="AddPatientCorrelation" inputName="AddPatientCorrelationRequest" isOneWay="false" name="AddPatientCorrelation" outputName="AddPatientCorrelationResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
			
		</con:operation>
		<con:operation action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation:RetrievePatientCorrelationsRequestMessage" anonymous="optional" bindingOperationName="RetrievePatientCorrelations" inputName="RetrievePatientCorrelationsRequest" isOneWay="false" name="RetrievePatientCorrelations" outputName="RetrievePatientCorrelationsResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
	</con:interface>
	<con:testSuite name="PatientCorrelation TestSuite">
		<con:settings/>
		<con:runType>SEQUENTIAL</con:runType>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="cef5f027-ce60-4baf-8a1f-1d632a2497a5" keepSession="false" maxResults="0" name="AddMultiple1" searchProperties="true">
			<con:description/>
			<con:settings/>
			
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			
			
			
			
			
			
			<con:testStep name="Populate Add1" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/><con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/><con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Add1" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add1">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #1">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberOne"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
						<con:jmsPropertyConfig/>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Populate Add2" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/><con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Add2" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add2">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #1">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberOne"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
						<con:jmsPropertyConfig/>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:testStep name="Populate Retrieve" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #1">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/AddMultipleNumberOne"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="LocalPatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path><content>D123401</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path><content>1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path><content>500000000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path><content>2.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2013-01-11T19:04:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2013-01-11T19:14:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>01/11/2013 19:04:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-02-10T00:00:00Z</con:value>
				</con:property>
			<con:property><con:name>LocalAAID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteAAID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>RemoteSubjectID</con:name><con:value>500000000</con:value></con:property><con:property><con:name>LocalSubjectID</con:name><con:value>D123401</con:value></con:property></con:properties>
			<con:reportParameters/>
			<con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="ff68f1ee-5476-4238-82e5-172761d83dd2" keepSession="false" maxResults="0" name="AddMultiple2" searchProperties="true">
			<con:settings/>
			
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			
			
			
			
			
			<con:testStep name="Populate Add1" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add1" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add1">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #2">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberTwo"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="500000000"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Populate Add2" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add2" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add2">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #2">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberTwo"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Populate Retrieve" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #2">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/AddMultipleNumberTwo"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="LocalPatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path><content>D123401</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path><content>1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path><content>500000000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path><content>2.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2013-01-11T19:04:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2013-01-11T19:14:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>01/11/2013 19:04:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-02-10T00:00:00Z</con:value>
				</con:property>
			<con:property><con:name>RemoteSubjectID1</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteAAID1</con:name><con:value>2.2</con:value></con:property><con:property><con:name>LocalSubjectID1</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalAAID1</con:name><con:value>1.1</con:value></con:property><con:property><con:name>RemoteSubjectID2</con:name><con:value>D123401</con:value></con:property><con:property><con:name>RemoteAAID2</con:name><con:value>1.1</con:value></con:property><con:property><con:name>LocalSubjectID2</con:name><con:value>500000000</con:value></con:property><con:property><con:name>LocalAAID2</con:name><con:value>2.2</con:value></con:property></con:properties>
			<con:reportParameters/>
			<con:tearDownScript>import nhinc.FileUtils;
FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="0cb2c0df-b008-4285-b363-e56504707a05" keepSession="false" maxResults="0" name="Simple Retrieve" searchProperties="true">
			<con:settings/>
			
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			
			
			
			
			
			<con:testStep name="Populate Add" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieve"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Populate Retrieve" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/SimpleRetrieve"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="LocalPatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path><content>D123401</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path><content>1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path><content>500000000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path><content>2.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2013-01-11T19:04:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2013-01-11T19:14:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>01/11/2013 19:04:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-02-10T00:00:00Z</con:value>
				</con:property>
			<con:property><con:name>RemoteSubjectID</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteAAID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>LocalSubjectID</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalAAID</con:name><con:value>1.1</con:value></con:property></con:properties>
			<con:reportParameters/>
			<con:tearDownScript>import nhinc.FileUtils;
FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="708cf740-23a5-44fb-afd3-4328b60f5f87" keepSession="false" maxResults="0" name="Simple Retrieve with multiple in repository" searchProperties="true">
			<con:settings/>
			
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			
			
			
			
			
			<con:testStep name="Populate Add1" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add1" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add1">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Populate Add2" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add2" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add2">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123402"/>
                           <urn:id root="2.2" extension="500000001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Populate Add3" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID3</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID3</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Add3" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add3">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="500000002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:testStep name="Populate Retrieve" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path><content>D123401</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path><content>1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path><content>D123401</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path><content>1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path><content>500000000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path><content>2.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2013-01-11T19:04:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2013-01-11T19:14:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>01/11/2013 19:04:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-02-10T00:00:00Z</con:value>
				</con:property>
			<con:property><con:name>RemoteSubjectID1</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteSubjectID2</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteSubjectID3</con:name><con:value>500000002</con:value></con:property><con:property><con:name>RemoteAAID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>LocalSubjectID1</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalSubjectID2</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalSubjectID3</con:name><con:value>D123403</con:value></con:property><con:property><con:name>LocalAAID</con:name><con:value>1.1</con:value></con:property></con:properties>
			<con:reportParameters/>
			<con:tearDownScript>import nhinc.FileUtils;
FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="2ea19a05-affb-4fcc-859c-89eb8c97b68a" keepSession="false" maxResults="0" name="Multiple results" searchProperties="true">
			<con:settings/>
			
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			
			
			
			
			
			<con:testStep name="Populate Add1" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add1" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add1">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Populate Add2" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add2" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add2">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="IHS50000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Populate Add3" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID3</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID3</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add3</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Add3" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add3">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123402"/>
                           <urn:id root="2.2" extension="500000001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:testStep name="Populate Add4" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID4</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add4</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add4</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID4</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add4</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add4</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add4</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add4</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add4</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Add4" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add4">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123402"/>
                           <urn:id root="2.2" extension="IHS50001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:testStep name="Populate Add5" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID5</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add5</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add5</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID5</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add5</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add5</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add5</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add5</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add5</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Add5" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add5">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="500000002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:testStep name="Populate Add6" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID6</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add6</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add6</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID6</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add6</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add6</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add6</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add6</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add6</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Add6" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add6">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="IHS50002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:testStep name="Populate Retrieve" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID3</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID3</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:02Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123402"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000001"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="LocalPatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path><content>D123402</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path><content>1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path><content>500000001</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path><content>2.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2013-01-11T19:04:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2013-01-11T19:14:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>01/11/2013 19:04:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-02-10T00:00:00Z</con:value>
				</con:property>
			<con:property><con:name>RemoteSubjectID1</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteSubjectID2</con:name><con:value>IHS50000</con:value></con:property><con:property><con:name>RemoteSubjectID3</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteSubjectID4</con:name><con:value>IHS50001</con:value></con:property><con:property><con:name>RemoteSubjectID5</con:name><con:value>500000002</con:value></con:property><con:property><con:name>RemoteSubjectID6</con:name><con:value>IHS50002</con:value></con:property><con:property><con:name>RemoteAAID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>LocalSubjectID1</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalSubjectID2</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalSubjectID3</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalSubjectID4</con:name><con:value>D123402</con:value></con:property><con:property><con:name>LocalSubjectID5</con:name><con:value>D123403</con:value></con:property><con:property><con:name>LocalSubjectID6</con:name><con:value>D123403</con:value></con:property><con:property><con:name>LocalAAID</con:name><con:value>1.1</con:value></con:property></con:properties>
			<con:reportParameters/>
			<con:tearDownScript>import nhinc.FileUtils;
FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="6f809e56-9c83-48e1-8d60-c03cb53b59db" keepSession="false" maxResults="0" name="Retrieve with empty repository" searchProperties="true">
			<con:settings/>
			
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			
			
			
			
			
			
			
			
			<con:testStep name="Populate Add" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with empty repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:03Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveWithEmptyRepository"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="" extension=""/>
                           <urn:id root="2.2" extension="500000005"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Populate Retrieve" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with empty repository">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:03Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PIXQuery/RetrieveWithEmptyRepository"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="" extension=""/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000005"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path><content>500000005</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path><content>2.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:RetrievePatientCorrelationsResponse[1]/ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:patientPerson[1]/ns3:name[1]/@nullFlavor</path>
								<content>NA</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2013-01-11T19:04:03Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2013-01-11T19:14:03Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>01/11/2013 19:04:03</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-02-10T00:00:00Z</con:value>
				</con:property>
			<con:property><con:name>RemoteSubjectID</con:name><con:value>500000005</con:value></con:property><con:property><con:name>RemoteAAID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>LocalSubjectID</con:name><con:value/></con:property><con:property><con:name>LocalAAID</con:name><con:value/></con:property></con:properties>
			<con:reportParameters/>
			<con:tearDownScript>import nhinc.FileUtils;
FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="34355ad6-e834-45cf-9ca0-aea649e68d00" keepSession="false" maxResults="0" name="Retrieve with no results" searchProperties="true">
			<con:settings/>
			
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			
			
			
			
			
			
			<con:testStep name="Populate Add1" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID1</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add1</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			
			<con:testStep name="Add1" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add1">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with no results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:03Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveWithNoResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			
			
			<con:testStep name="Populate Add2" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add2</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Add2" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add2">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with no results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:03Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveWithNoResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="" extension="D123403"/>
                           <urn:id root="2.2" extension="500000001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:testStep name="Populate Retrieve" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>startDate</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAAID</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAAID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID2</con:sourceType>
						<con:sourceStep>#TestCase#</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep><con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with no results">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2013-01-11T19:04:03Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PIXQuery/RetrieveWithNoResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="" extension=""/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000001"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path><content>500000001</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration><path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path><content>2.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences></con:configuration>
						</con:assertion>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:RetrievePatientCorrelationsResponse[1]/ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:patientPerson[1]/ns3:name[1]/@nullFlavor</path>
								<content>NA</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep><con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2013-01-11T19:04:03Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2013-01-11T19:14:03Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>01/11/2013 19:04:03</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-02-10T00:00:00Z</con:value>
				</con:property>
			<con:property><con:name>RemoteSubjectID1</con:name><con:value>500000000</con:value></con:property><con:property><con:name>RemoteSubjectID2</con:name><con:value>500000001</con:value></con:property><con:property><con:name>RemoteAAID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>LocalSubjectID1</con:name><con:value>D123401</con:value></con:property><con:property><con:name>LocalSubjectID2</con:name><con:value/></con:property><con:property><con:name>LocalAAID1</con:name><con:value>1.1</con:value></con:property><con:property><con:name>LocalAAID2</con:name><con:value/></con:property></con:properties>
			<con:reportParameters/>
			<con:tearDownScript>import nhinc.FileUtils;
FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase disabled="true" failOnError="true" failTestCaseOnErrors="true" id="9da58c0e-12cf-4aba-8ce6-9e55a74061ad" keepSession="false" maxResults="0" name="Simple Add - No Expiration" searchProperties="true">
			<con:settings/>
			<con:testStep name="Intialize Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy Configuration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PCConfiguration_Main.xml";
def destDir = context.findProperty("GatewayPropDir" );
def destFile = "PCConfiguration.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ClearLocalData" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="get Date" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Correlations" type="datasource">
				<con:settings/>
				<con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:dataSource type="Excel">
						<con:configuration>
							<file>C:/Projects/NHINC/Current/Product/SoapUI_Test/RegressionSuite/CorrelationTests.xls</file>
							<worksheet>Expirations</worksheet>
							<cell>A3</cell>
							<ignoreEmpty>false</ignoreEmpty>
						</con:configuration>
					</con:dataSource>
					<con:property>RemoteSubjectID</con:property>
					<con:property>RemoteAssigningAuthorityID</con:property>
					<con:property>LocalSubjectID</con:property>
					<con:property>LocalAssigningAuthorityID</con:property>
					<con:property>Select</con:property>
					<con:startRow>0</con:startRow>
					<con:endRow>0</con:endRow>
					<con:trimValues>false</con:trimValues>
					<con:entitizeValues>false</con:entitizeValues>
					<con:restartOnRun>true</con:restartOnRun>
					<con:expandProperties>false</con:expandProperties>
				</con:config>
			</con:testStep>
			<con:testStep name="FindSelected" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script>
				</con:config>
			</con:testStep>
			<con:testStep name="SelectedPatientData" type="properties">
				<con:settings/>
				<con:config saveFirst="true" xsi:type="con:PropertiesStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:properties>
						<con:property>
							<con:name>LocalSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>creationTime</con:name>
							<con:value>20120221041501</con:value>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Add Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Add - No Expiration">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20100816131655"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleAddNoExpiration"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="3.3"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="3.3" extension="IHS50000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="DataSource Loop" type="datasourceloop">
				<con:settings/>
				<con:config>
					<dataSourceStep>Correlations</dataSourceStep>
					<targetStep>FindSelected</targetStep>
				</con:config>
			</con:testStep>
			<con:testStep name="Count Correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Check Expiration" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert null == sql.firstRow('select CorrelationExpirationDate from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-02-21T04:09:57Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-02-21T04:19:57Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>02/21/2012 04:09:57</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2012-03-22T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase disabled="true" failOnError="true" failTestCaseOnErrors="true" id="c2bac0f0-db59-4e94-a2c6-dbccd1360d7d" keepSession="false" maxResults="0" name="Simple Add - Expiration" searchProperties="true">
			<con:settings/>
			<con:testStep name="Intialize Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy Configuration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PCConfiguration_Main.xml";
def destDir = context.findProperty("GatewayPropDir" );
def destFile = "PCConfiguration.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ClearLocalData" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="get Date" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Correlations" type="datasource">
				<con:settings/>
				<con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:dataSource type="Excel">
						<con:configuration>
							<file>C:/Projects/NHINC/Current/Product/SoapUI_Test/RegressionSuite/CorrelationTests.xls</file>
							<worksheet>Expirations</worksheet>
							<cell>A2</cell>
							<ignoreEmpty>false</ignoreEmpty>
						</con:configuration>
					</con:dataSource>
					<con:property>RemoteSubjectID</con:property>
					<con:property>RemoteAssigningAuthorityID</con:property>
					<con:property>LocalSubjectID</con:property>
					<con:property>LocalAssigningAuthorityID</con:property>
					<con:property>Select</con:property>
					<con:startRow>0</con:startRow>
					<con:endRow>0</con:endRow>
					<con:trimValues>false</con:trimValues>
					<con:entitizeValues>false</con:entitizeValues>
					<con:restartOnRun>true</con:restartOnRun>
					<con:expandProperties>false</con:expandProperties>
				</con:config>
			</con:testStep>
			<con:testStep name="FindSelected" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script>
				</con:config>
			</con:testStep>
			<con:testStep name="SelectedPatientData" type="properties">
				<con:settings/>
				<con:config saveFirst="true" xsi:type="con:PropertiesStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:properties>
						<con:property>
							<con:name>LocalSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>creationTime</con:name>
							<con:value>20120221041501</con:value>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Add Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Add - Expiration">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20100816131655"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleAddExpiration"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="DataSource Loop" type="datasourceloop">
				<con:settings/>
				<con:config>
					<dataSourceStep>Correlations</dataSourceStep>
					<targetStep>FindSelected</targetStep>
				</con:config>
			</con:testStep>
			<con:testStep name="Count Correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Check Expiration" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert null != sql.firstRow('select CorrelationExpirationDate from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-02-21T04:10:01Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-02-21T04:20:01Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>02/21/2012 04:10:01</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2012-03-22T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase disabled="true" failOnError="true" failTestCaseOnErrors="true" id="81525f2f-9803-4308-82fd-1828183b777d" keepSession="false" maxResults="0" name="Retrieve - Null Expiration" searchProperties="true">
			<con:settings/>
			<con:testStep name="Intialize Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy Configuration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PCConfiguration_Main.xml";
def destDir = context.findProperty("GatewayPropDir" );
def destFile = "PCConfiguration.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ClearLocalData" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="get Date" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Correlations" type="datasource">
				<con:settings/>
				<con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:dataSource type="Excel">
						<con:configuration>
							<file>C:/Projects/NHINC/Current/Product/SoapUI_Test/RegressionSuite/CorrelationTests.xls</file>
							<worksheet>Expirations</worksheet>
							<cell>A3</cell>
							<ignoreEmpty>false</ignoreEmpty>
						</con:configuration>
					</con:dataSource>
					<con:property>RemoteSubjectID</con:property>
					<con:property>RemoteAssigningAuthorityID</con:property>
					<con:property>LocalSubjectID</con:property>
					<con:property>LocalAssigningAuthorityID</con:property>
					<con:property>Select</con:property>
					<con:startRow>0</con:startRow>
					<con:endRow>0</con:endRow>
					<con:trimValues>false</con:trimValues>
					<con:entitizeValues>false</con:entitizeValues>
					<con:restartOnRun>true</con:restartOnRun>
					<con:expandProperties>false</con:expandProperties>
				</con:config>
			</con:testStep>
			<con:testStep name="FindSelected" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script>
				</con:config>
			</con:testStep>
			<con:testStep name="SelectedPatientData" type="properties">
				<con:settings/>
				<con:config saveFirst="true" xsi:type="con:PropertiesStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:properties>
						<con:property>
							<con:name>LocalSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>creationTime</con:name>
							<con:value>20120221041502</con:value>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Add Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve - Null Expiration">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20100816131655"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveNullExpiration"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="3.3"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="3.3" extension="IHS50000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="DataSource Loop" type="datasourceloop">
				<con:settings/>
				<con:config>
					<dataSourceStep>Correlations</dataSourceStep>
					<targetStep>FindSelected</targetStep>
				</con:config>
			</con:testStep>
			<con:testStep name="Count Correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Check Expiration" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert null == sql.firstRow('select CorrelationExpirationDate from ' + context.findProperty('PatientCorrelationTable'))[0];
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Retrieve Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve - Null Expiration">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="20100503195053"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/RetrieveNullExpiration"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="3.3"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="3.3" extension="IHS50000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
								<content>${SelectedPatientData#LocalSubjectID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
								<content>${SelectedPatientData#LocalAssigningAuthorityID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDExtension" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
								<content>${SelectedPatientData#LocalSubjectID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDRoot" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
								<content>${SelectedPatientData#LocalAssigningAuthorityID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
								<content>${SelectedPatientData#RemoteSubjectID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
								<content>${SelectedPatientData#RemoteAssigningAuthorityID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-02-21T04:10:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-02-21T04:20:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>02/21/2012 04:10:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2012-03-22T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase disabled="true" failOnError="true" failTestCaseOnErrors="true" id="12fc2e7a-0208-4609-942c-5af5ffd04e19" keepSession="false" maxResults="0" name="Retrieve - Active Correlation" searchProperties="true">
			<con:settings/>
			<con:testStep name="Intialize Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy Configuration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PCConfiguration_Main.xml";
def destDir = context.findProperty("GatewayPropDir" );
def destFile = "PCConfiguration.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ClearLocalData" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="get Date" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Correlations" type="datasource">
				<con:settings/>
				<con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:dataSource type="Excel">
						<con:configuration>
							<file>C:/Projects/NHINC/Current/Product/SoapUI_Test/RegressionSuite/CorrelationTests.xls</file>
							<worksheet>Expirations</worksheet>
							<cell>A2</cell>
							<ignoreEmpty>false</ignoreEmpty>
						</con:configuration>
					</con:dataSource>
					<con:property>RemoteSubjectID</con:property>
					<con:property>RemoteAssigningAuthorityID</con:property>
					<con:property>LocalSubjectID</con:property>
					<con:property>LocalAssigningAuthorityID</con:property>
					<con:property>Select</con:property>
					<con:startRow>0</con:startRow>
					<con:endRow>0</con:endRow>
					<con:trimValues>false</con:trimValues>
					<con:entitizeValues>false</con:entitizeValues>
					<con:restartOnRun>true</con:restartOnRun>
					<con:expandProperties>false</con:expandProperties>
				</con:config>
			</con:testStep>
			<con:testStep name="FindSelected" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script>
				</con:config>
			</con:testStep>
			<con:testStep name="SelectedPatientData" type="properties">
				<con:settings/>
				<con:config saveFirst="true" xsi:type="con:PropertiesStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:properties>
						<con:property>
							<con:name>LocalSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>creationTime</con:name>
							<con:value>20120221041502</con:value>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Add Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve - Active Correlation">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20100816131656"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveActiveCorrelation"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="DataSource Loop" type="datasourceloop">
				<con:settings/>
				<con:config>
					<dataSourceStep>Correlations</dataSourceStep>
					<targetStep>FindSelected</targetStep>
				</con:config>
			</con:testStep>
			<con:testStep name="Count Correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Check Expiration" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert null != sql.firstRow('select CorrelationExpirationDate from ' + context.findProperty('PatientCorrelationTable'))[0];
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Retrieve Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve - Active Correlation">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="20100503195058"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/RetrieveActiveCorrelation"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
								<content>${SelectedPatientData#LocalSubjectID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
								<content>${SelectedPatientData#LocalAssigningAuthorityID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDExtension" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
								<content>${SelectedPatientData#LocalSubjectID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="LocalPatientIDRoot" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
								<content>${SelectedPatientData#LocalAssigningAuthorityID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
								<content>${SelectedPatientData#RemoteSubjectID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
								<content>${SelectedPatientData#RemoteAssigningAuthorityID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-02-21T04:10:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-02-21T04:20:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>02/21/2012 04:10:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2012-03-22T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase disabled="true" failOnError="true" failTestCaseOnErrors="true" id="d7a7b7bf-1316-49db-879e-e0fcf66a312e" keepSession="false" maxResults="0" name="Retrieve - Expired Correlation" searchProperties="true">
			<con:settings/>
			<con:testStep name="Intialize Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy Configuration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PCConfiguration_Main.xml";
def destDir = context.findProperty("GatewayPropDir" );
def destFile = "PCConfiguration.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ClearLocalData" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="get Date" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Correlations" type="datasource">
				<con:settings/>
				<con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:dataSource type="Excel">
						<con:configuration>
							<file>C:/Projects/NHINC/Current/Product/SoapUI_Test/RegressionSuite/CorrelationTests.xls</file>
							<worksheet>Expirations</worksheet>
							<cell>A4</cell>
							<ignoreEmpty>false</ignoreEmpty>
						</con:configuration>
					</con:dataSource>
					<con:property>RemoteSubjectID</con:property>
					<con:property>RemoteAssigningAuthorityID</con:property>
					<con:property>LocalSubjectID</con:property>
					<con:property>LocalAssigningAuthorityID</con:property>
					<con:property>Select</con:property>
					<con:startRow>0</con:startRow>
					<con:endRow>0</con:endRow>
					<con:trimValues>false</con:trimValues>
					<con:entitizeValues>false</con:entitizeValues>
					<con:restartOnRun>true</con:restartOnRun>
					<con:expandProperties>false</con:expandProperties>
				</con:config>
			</con:testStep>
			<con:testStep name="FindSelected" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (localSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script>
				</con:config>
			</con:testStep>
			<con:testStep name="SelectedPatientData" type="properties">
				<con:settings/>
				<con:config saveFirst="true" xsi:type="con:PropertiesStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:properties>
						<con:property>
							<con:name>LocalSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>creationTime</con:name>
							<con:value>20120221041502</con:value>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Add Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="true" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve - Expired Correlation">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20100816131656"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveExpiredCorrelation"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="4.4"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="4.4" extension="E12345"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="DataSource Loop" type="datasourceloop">
				<con:settings/>
				<con:config>
					<dataSourceStep>Correlations</dataSourceStep>
					<targetStep>FindSelected</targetStep>
				</con:config>
			</con:testStep>
			<con:testStep name="Count Correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Retrieve Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>SubjectIdentifier</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityIdentifier</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QueryAssigningAuthorityIdentifier</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>QuerySubjectIdentifier</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Retrieve</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Retrieve" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>RetrievePatientCorrelations</con:operation>
					<con:request name="Retrieve">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve - Expired Correlation">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="20100503195105"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/RetrieveExpiredCorrelation"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="4.4"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="4.4" extension="E12345"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
								<content>${SelectedPatientData#RemoteSubjectID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
								<content>${SelectedPatientData#RemoteAssigningAuthorityID}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:RetrievePatientCorrelationsResponse[1]/ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:patientPerson[1]/ns3:name[1]/@nullFlavor</path>
								<content>NA</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion type="Simple NotContains">
							<con:configuration>
								<token>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</token>
								<ignoreCase>false</ignoreCase>
								<useRegEx>false</useRegEx>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Count Correlations (0)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 0 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-02-21T04:10:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-02-21T04:20:02Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>02/21/2012 04:10:02</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2012-03-22T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase disabled="true" failOnError="true" failTestCaseOnErrors="true" id="2027c59b-deea-4d9a-a34c-e089c234bf36" keepSession="false" maxResults="0" name="Add - Update Expiration" searchProperties="true">
			<con:settings/>
			<con:testStep name="Intialize Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy Configuration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PCConfiguration_Main.xml";
def destDir = context.findProperty("GatewayPropDir" );
def destFile = "PCConfiguration.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, context, log);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Internal Properties" type="properties">
				<con:settings/>
				<con:config saveFirst="true" xsi:type="con:PropertiesStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:properties>
						<con:property>
							<con:name>originalExpiration</con:name>
							<con:value>2011-05-03 15:51:17.0</con:value>
						</con:property>
						<con:property>
							<con:name>updatedExpiration</con:name>
							<con:value>2010-11-23 17:39:11.0</con:value>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep name="Clear Correlation Table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql("PatientCorrelationDB") { sql -> 
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ClearLocalData" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", null);
groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", null);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="get Date" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );

sdf = new java.text.SimpleDateFormat("yyyyMMddHHmmss");
sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

Calendar cal = new GregorianCalendar();
nowDate = new Date();

cal.setTime(nowDate);
creationTime = cal.getTime();
creationTimeStr = sdf.format(creationTime);

groovyUtils.setPropertyValue( "SelectedPatientData", "creationTime", creationTimeStr);</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Correlations" type="datasource">
				<con:settings/>
				<con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:dataSource type="Excel">
						<con:configuration>
							<file>C:/Projects/NHINC/Current/Product/SoapUI_Test/RegressionSuite/CorrelationTests.xls</file>
							<worksheet>Expirations</worksheet>
							<cell>A2</cell>
							<ignoreEmpty>false</ignoreEmpty>
						</con:configuration>
					</con:dataSource>
					<con:property>RemoteSubjectID</con:property>
					<con:property>RemoteAssigningAuthorityID</con:property>
					<con:property>LocalSubjectID</con:property>
					<con:property>LocalAssigningAuthorityID</con:property>
					<con:property>Select</con:property>
					<con:startRow/>
					<con:endRow/>
					<con:trimValues>false</con:trimValues>
					<con:entitizeValues>false</con:entitizeValues>
					<con:restartOnRun>true</con:restartOnRun>
					<con:expandProperties>false</con:expandProperties>
				</con:config>
			</con:testStep>
			<con:testStep name="FindSelected" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def dataSource = testRunner.testCase.getTestStepByName( "Correlations" );
def selected = dataSource.getPropertyValue( "Select" );
def remoteSubjectID = dataSource.getPropertyValue( "RemoteSubjectID" );
def remoteAssigningAuthorityID = dataSource.getPropertyValue( "RemoteAssigningAuthorityID" );
def localSubjectID = dataSource.getPropertyValue( "LocalSubjectID" );
def localAssigningAuthorityID = dataSource.getPropertyValue( "LocalAssigningAuthorityID" );

if (selected != "") {
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteSubjectID", remoteSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "RemoteAssigningAuthorityID", remoteAssigningAuthorityID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalSubjectID", localSubjectID);
  groovyUtils.setPropertyValue( "SelectedPatientData", "LocalAssigningAuthorityID", localAssigningAuthorityID);
}

if (remoteSubjectID == "") testRunner.gotoStepByName( "DataSource Loop" );</script>
				</con:config>
			</con:testStep>
			<con:testStep name="SelectedPatientData" type="properties">
				<con:settings/>
				<con:config saveFirst="true" xsi:type="con:PropertiesStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:properties>
						<con:property>
							<con:name>LocalSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>RemoteAssigningAuthorityID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>creationTime</con:name>
							<con:value>20120221041503</con:value>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Add Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add - Update Expiration">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20100816131656"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddUpdateExpiration"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Count Correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Check Expiration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def dataSource2 = testRunner.testCase.getTestStepByName( "Internal Properties" );

context.withSql('PatientCorrelationDB') { sql -> 
  def exp = sql.firstRow('select CorrelationExpirationDate from ' + context.findProperty('PatientCorrelationTable'))[0];
  assert exp != null;
  dataSource2.setPropertyValue( "originalExpiration", exp.toString());
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Spreadsheet->Re-Add Transfer" type="transfer">
				<con:settings/>
				<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalSubjectID</con:name>
						<con:sourceType>LocalSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
						<con:name>LocalAssigningAuthorityID</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteSubjectID</con:name>
						<con:sourceType>RemoteSubjectID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>CreationTime</con:name>
						<con:sourceType>creationTime</con:sourceType>
						<con:sourceStep>SelectedPatientData</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalAssigningAuthorityID2</con:name>
						<con:sourceType>LocalAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>RemoteAssigningAuthorityID2</con:name>
						<con:sourceType>RemoteAssigningAuthorityID</con:sourceType>
						<con:sourceStep>Correlations</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>Add</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Delay" type="delay">
				<con:settings/>
				<con:config>
					<delay>2500</delay>
				</con:config>
			</con:testStep>
			<con:testStep name="Re-Add" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>PatientCorrelationBinding</con:interface>
					<con:operation>AddPatientCorrelation</con:operation>
					<con:request name="Re-Add">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add - Update Expiration">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="20091123194441"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddUpdateExpiration"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Re-Count Correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Re-Check Expiration" type="groovy">
				<con:settings/>
				<con:config>
					<script>def dataSource2 = testRunner.testCase.getTestStepByName( "Internal Properties" );

context.withSql('PatientCorrelationDB') { sql -> 
  def exp = sql.firstRow('select CorrelationExpirationDate from ' + context.findProperty('PatientCorrelationTable'))[0]
  assert exp != null;

  //assert that the expiration date has been updated, and is after the previous expiration date. 
  def Date origDate;
  def df1 = new java.text.SimpleDateFormat("yyyy-MM-dd hh:mm:ss")
  origDate = df1.parse(dataSource2.getPropertyValue("originalExpiration"));
  assert exp.after(origDate);
}</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);</script>
				</con:config>
			</con:testStep>
			<con:setupScript/>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-02-21T04:10:03Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-02-21T04:20:03Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>02/21/2012 04:10:03</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2012-03-22T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:properties>
			<con:property>
				<con:name>PatientCorrelationEndpoint</con:name>
				<con:value>http://localhost:8080/CONNECTGateway/GatewayService/PatientCorrelationServiceUnsecured</con:value>
			</con:property>
			<con:property>
				<con:name>DBHost</con:name>
				<con:value>localhost</con:value>
			</con:property>
			<con:property>
				<con:name>DBPort</con:name>
				<con:value>3306</con:value>
			</con:property>
			<con:property>
				<con:name>DBUser</con:name>
				<con:value>nhincuser</con:value>
			</con:property>
			<con:property>
				<con:name>DBPass</con:name>
				<con:value>nhincpass</con:value>
			</con:property>
			<con:property>
				<con:name>PatientCorrelationDB</con:name>
				<con:value>patientcorrelationdb</con:value>
			</con:property>
			<con:property>
				<con:name>PatientCorrelationTable</con:name>
				<con:value>correlatedidentifiers</con:value>
			</con:property>
		</con:properties>
		<con:reportParameters/>
	</con:testSuite>
	<con:requirements/>
	<con:properties>
		<con:property>
			<con:name>GatewayConfigurationDirectory</con:name>
			<con:value>C:/Sun/AppServer/domains/domain1/config/nhin</con:value>
		</con:property>
		<con:property>
			<con:name>PatientCorrelationEndpoint</con:name>
			<con:value>http://localhost:8080/CONNECTGateway/GatewayService/PatientCorrelationServiceUnsecured</con:value>
		</con:property>
		<con:property>
			<con:name>PatientCorrelationTable</con:name>
			<con:value>correlatedidentifiers</con:value>
		</con:property>
		<con:property>
			<con:name>PatientCorrelationDB</con:name>
			<con:value>patientcorrelationdb</con:value>
		</con:property>
		<con:property>
			<con:name>DBPass</con:name>
			<con:value>nhincpass</con:value>
		</con:property>
		<con:property>
			<con:name>DBHost</con:name>
			<con:value>localhost</con:value>
		</con:property>
		<con:property>
			<con:name>DBUser</con:name>
			<con:value>nhincuser</con:value>
		</con:property>
		<con:property>
			<con:name>DBPort</con:name>
			<con:value>3306</con:value>
		</con:property>
	<con:property><con:name>GatewayPropDir</con:name><con:value>c:\glassfish3\glassfish\domains\domain1\config\nhin</con:value></con:property></con:properties>
	<con:afterLoadScript>def propertiesFile = new File(new File(project.path).parent, 'PatientCorrelation-soapui-project.properties')
if (propertiesFile.exists()) {
	def props = new Properties()
	props.load(new FileReader(propertiesFile))
	props.each { key, value ->
	    project.setPropertyValue(key, value)
	}
}


TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
def testRunListener = [
  afterRun: { testRunner, runContext -> },
  afterStep: { testRunner, runContext, result -> },
  beforeStep: { testRunner, runContext -> },
  beforeStep: { testRunner, runContext, testStep -> },
  beforeRun: { testRunner, runContext -> 
    use (org.codehaus.groovy.runtime.TimeCategory) {
      def startDate = 5.minutes.ago
      def endDate = 5.minutes.from.now
      def expireDate = 30.days.from.now

      def df = "yyyy-MM-dd'T'HH:mm:ss'Z'"
      def dfSig = "MM/dd/yyyy' 'HH:mm:ss"

      runContext.testCase.setPropertyValue("startDate", startDate.format(df))
      runContext.testCase.setPropertyValue("endDate", endDate.format(df))
      runContext.testCase.setPropertyValue("sigDate", startDate.format(dfSig))
      runContext.testCase.setPropertyValue("expireDate", expireDate.format(df))
    }
  }   
] as com.eviware.soapui.model.testsuite.TestRunListener

project.testSuiteList*.testCaseList.flatten()*.addTestRunListener(testRunListener)



com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.findProperty = { propertyName ->
    return delegate.getProperty(propertyName) ?:
                delegate.testCase.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.project.getPropertyValue(propertyName)
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.withSql = { dbOrPropertyName, block ->
  def dbName = delegate.findProperty(dbOrPropertyName) ?: dbOrPropertyName
  def host = delegate.findProperty('DBHost')
  def port = delegate.findProperty('DBPort')
  def user = delegate.findProperty('DBUser')
  def pass = delegate.findProperty('DBPass')

  def connectString = "jdbc:mysql://${host}:${port}/${dbName}"
  def sql = groovy.sql.Sql.newInstance(connectString, user, pass, "com.mysql.jdbc.Driver");
  try {
     block(sql)
  } finally {
    sql.close()
  }
}</con:afterLoadScript>
	<con:wssContainer/>
	<con:databaseConnectionContainer/>
	<con:reporting>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:parameters/>
	</con:reporting>

<con:sensitiveInformation/></con:soapui-project>