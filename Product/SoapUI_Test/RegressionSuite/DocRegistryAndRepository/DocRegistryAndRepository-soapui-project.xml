<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project abortOnError="false" name="DocRegistryAndRepository" resourceRoot="${projectDir}" runType="SEQUENTIAL" soapui-version="4.5.1" activeEnvironment="Default" xmlns:con="http://eviware.com/soapui/config">
	<con:settings/>
	<con:interface anonymous="optional" bindingName="{urn:ihe:iti:xds-b:2007}DocumentRepository_Binding" definition="../../target/wsdl/AdapterComponentDocRepository.wsdl" name="DocumentRepository_Binding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:settings/>
		
		<con:definitionCache/><con:endpoints>
			<con:endpoint>http://localhost:${NhincHttpPort}/DocumentRepository_Service_Soap12</con:endpoint>
			<con:endpoint>${#Project#Endpoint-DocRepository}</con:endpoint>
		<con:endpoint>http://localhost:${NhincHttpPort}/DocumentRepository_Service</con:endpoint></con:endpoints>
		<con:operation action="urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-b" anonymous="optional" bindingOperationName="DocumentRepository_ProvideAndRegisterDocumentSet-b" inputName="" isOneWay="false" name="DocumentRepository_ProvideAndRegisterDocumentSet-b" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
		<con:operation action="urn:ihe:iti:2007:RetrieveDocumentSet" anonymous="optional" bindingOperationName="DocumentRepository_RetrieveDocumentSet" inputName="" isOneWay="false" name="DocumentRepository_RetrieveDocumentSet" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
	</con:interface>
	
	<con:interface anonymous="optional" bindingName="{urn:ihe:iti:xds-b:2007}DocumentRegistry_Binding_Soap" definition="../../target/wsdl/AdapterComponentDocRegistry.wsdl" name="DocumentRegistry_Binding_Soap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:settings/>
		
		<con:definitionCache/><con:endpoints>
			<con:endpoint>http://localhost:8080/DocumentRegistry_Service</con:endpoint>
			<con:endpoint>http://localhost:${NhincHttpPort}/DocumentRegistry_Service</con:endpoint>
		</con:endpoints>
		<con:operation action="urn:hl7-org:v3:PRPA_IN201301UV02" anonymous="optional" bindingOperationName="DocumentRegistry_PRPA_IN201301UV02" inputName="" isOneWay="false" name="DocumentRegistry_PRPA_IN201301UV02" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
		<con:operation action="urn:hl7-org:v3:PRPA_IN201302UV02" anonymous="optional" bindingOperationName="DocumentRegistry_PRPA_IN201302UV02" inputName="" isOneWay="false" name="DocumentRegistry_PRPA_IN201302UV02" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
		<con:operation action="urn:hl7-org:v3:PRPA_IN201304UV02" anonymous="optional" bindingOperationName="DocumentRegistry_PRPA_IN201304UV02" inputName="" isOneWay="false" name="DocumentRegistry_PRPA_IN201304UV02" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
		<con:operation action="urn:ihe:iti:2007:RegisterDocumentSet-b" anonymous="optional" bindingOperationName="DocumentRegistry_RegisterDocumentSet-b" inputName="" isOneWay="false" name="DocumentRegistry_RegisterDocumentSet-b" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
		<con:operation action="urn:ihe:iti:2007:RegistryStoredQuery" anonymous="optional" bindingOperationName="DocumentRegistry_RegistryStoredQuery" inputName="" isOneWay="false" name="DocumentRegistry_RegistryStoredQuery" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
	</con:interface>
	<con:testSuite name="DocRegistryAndRepositoryTestSuite">
		<con:settings/>
		<con:runType>SEQUENTIAL</con:runType>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="9d80b1e8-99ee-4450-9a35-c14f094caca9" keepSession="false" maxResults="0" name="ProvideAndRegisterTest" searchProperties="true">
			<con:settings/>
			<con:testStep name="Clear Document" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('DocRepositoryDB') { sql -> 
  def table = context.findProperty('DocumentTable')
  def col = context.findProperty('DocCol')
  def val = context.findProperty('DocVal')

  def table1 = context.findProperty('EventCodeTable')
  
 
  sql.execute('delete from ' + table1)
  sql.execute("delete from " + table + " where " + col + " = " + val )
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Store Document" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>DocumentRepository_Binding</con:interface>
					<con:operation>DocumentRepository_ProvideAndRegisterDocumentSet-b</con:operation>
					<con:request name="Store Document">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#Endpoint-DocRepository}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
   <soapenv:Header/>
   <soapenv:Body projectName="DocRegistryAndRepository" testCase="ProvideAndRegisterTest">
      <xdsb:ProvideAndRegisterDocumentSetRequest xmlns:xdsb="urn:ihe:iti:xds-b:2007">
         <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
            <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
               <rim:ExtrinsicObject home="urn:oid:1.1" id="Document01" isOpaque="false" mimeType="text/xml" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1">
                  <rim:Slot name="creationTime">
                     <rim:ValueList>
                        <rim:Value>20080627134924</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="intendedRecipient">
                     <rim:ValueList>
                        <rim:Value>Agilex Technologies|Scott Borst</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="languageCode">
                     <rim:ValueList>
                        <rim:Value>en-US</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="legalAuthenticator">
                     <rim:ValueList>
                        <rim:Value>legal authenticator for a consent document</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="serviceStartTime">
                     <rim:ValueList>
                        <rim:Value>20070911000000</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="serviceStopTime">
                     <rim:ValueList>
                        <rim:Value>20080627000000</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="sourcePatientId">
                     <rim:ValueList>
                        <rim:Value>500000001^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="sourcePatientInfo">
                     <rim:ValueList>
                        <rim:Value>PID-3|pid1^^^domain</rim:Value>
                        <rim:Value>PID-5|Schnur^Anna^^^</rim:Value>
                        <rim:Value>PID-7|19560813</rim:Value>
                        <rim:Value>PID-8|F</rim:Value>
                        <rim:Value>PID-11|312 HILL ROAD^^HILLSBORO^MO^37660^US</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Name>
                     <rim:LocalizedString value="ProvideAndRegisterTestDocument"/>
                  </rim:Name>
                  <rim:Description>
                     <rim:LocalizedString value="Consent document 1 Schnur VA comments"/>
                  </rim:Description>
                  <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="Document01" id="" nodeRepresentation="">
                     <rim:Slot name="authorPerson">
                        <rim:ValueList>
                           <rim:Value>Axolotl Elysium</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorInstitution">
                        <rim:ValueList>
                           <rim:Value>Department of Veterans Affairs</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorRole">
                        <rim:ValueList>
                           <rim:Value>Primary Care Provider</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorSpecialty">
                        <rim:ValueList>
                           <rim:Value>General</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="Document01" id="" nodeRepresentation="XNHIN-CONSENT">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>2.16.840.1.113883.6.1</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="NHIN Consent Document"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="Document01" id="" nodeRepresentation="R">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>2.16.840.1.113883.5.25</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="Restricted"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="Document01" id="" nodeRepresentation="CDAR2/IHE 1.0">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>Connect-a-thon formatCodes</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="CDAR2/IHE 1.0"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="Document01" id="" nodeRepresentation="Outpatient">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>Connect-a-thon healthcareFacilityTypeCodes</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="Outpatient"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="Document01" id="" nodeRepresentation="394802001">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>2.16.840.1.113883.6.96</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="General Medicine"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="Document01" id="" nodeRepresentation="34133-9">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>LOINC</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="Summarization of Episode Note"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:2c6b8cb7-8b2a-4051-b291-b1ae6a575ef4" classifiedObject="Document01" nodeRepresentation="ProvideAndRegisterTestEventCodeValue">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>EventCodeSchemeValue</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="EventCode"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:ExternalIdentifier id="" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="Document01" value="2.1.11111.1.1">
                     <rim:Name>
                        <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
                  <rim:ExternalIdentifier id="" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="Document01" value="500000001^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                     <rim:Name>
                        <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
               </rim:ExtrinsicObject>
               <rim:RegistryPackage id="SubmissionSet01" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
                  <rim:Slot name="submissionTime">
                     <rim:ValueList>
                        <rim:Value>200905211223</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Name>
                     <rim:LocalizedString value="Consent SubmissionSet1 Name"/>
                  </rim:Name>
                  <rim:Description>
                     <rim:LocalizedString value="Consent SubmissionSet1"/>
                  </rim:Description>
                  <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet01" nodeRepresentation="" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification" id="id_20">
                     <rim:Slot name="authorPerson">
                        <rim:ValueList>
                           <rim:Value>Axolotl Elysium</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorInstitution">
                        <rim:ValueList>
                           <rim:Value>Department of Veterans Affairs</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorRole">
                        <rim:ValueList>
                           <rim:Value>Primary Care Provider</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorSpecialty">
                        <rim:ValueList>
                           <rim:Value>General</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet01" nodeRepresentation="History and Physical" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification" id="id_21">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>Connect-a-thon contentTypeCodes</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="History and Physical"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:ExternalIdentifier identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" value="2.1.11111.1.2" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier" id="id_22" registryObject="SubmissionSet01">
                     <rim:Name>
                        <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
                  <rim:ExternalIdentifier identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" value="129.6.58.92.1.1" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier" id="id_23" registryObject="SubmissionSet01">
                     <rim:Name>
                        <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
                  <rim:ExternalIdentifier identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" value="500000001^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier" id="id_24" registryObject="SubmissionSet01">
                     <rim:Name>
                        <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
               </rim:RegistryPackage>
               <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" sourceObject="SubmissionSet01" targetObject="Document01" id="ID_25276323_1" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Association">
                  <rim:Slot name="SubmissionSetStatus">
                     <rim:ValueList>
                        <rim:Value>Original</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
               </rim:Association>
               <rim:Classification classifiedObject="SubmissionSet01" classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" id="ID_25276323_3" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification"/>
            </rim:RegistryObjectList>
         </lcm:SubmitObjectsRequest>
         <xdsb:Document id="Document01">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxQb2xpY3kgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoyLjA6cG9saWN5OnNjaGVtYTpvcyIgeG1sbnM6bmhpbj0iaHR0cDovL3d3dy5oaHMuZ292L2hlYWx0aGl0L25oaW4iIHBvbGljeWlkPSIxMjM0NTY3OC0xMjM0LTEyMzQtMTIzNC0xMjM0NTY3ODlhYmMiIHJ1bGVjb21iaW5pbmdhbGdpZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpydWxlLWNvbWJpbmluZy1hbGdvcml0aG06Zmlyc3QtYXBwbGljYWJsZSI+DQoJPERlc2NyaXB0aW9uPlNhbXBsZSBYQUNNTCBwb2xpY3kgc2hvd2luZyBhY2Nlc3MgYnkgdXNlciByb2xlPC9EZXNjcmlwdGlvbj4NCgk8VGFyZ2V0Pg0KCQk8QWN0aW9ucz4NCgkJCTxBY3Rpb24+DQoJCQkJPEFjdGlvbk1hdGNoIE1hdGNoSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4NCgkJCQkJPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNhbnlVUkkiPmh0dHA6Ly93d3cuaGhzLmdvdi9oZWFsdGhpdC9uaGluI3JldHJpZXZlRG9jdW1lbnQ8L0F0dHJpYnV0ZVZhbHVlPg0KCQkJCQk8QWN0aW9uQXR0cmlidXRlRGVzaWduYXRvciBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjIuMDphY3Rpb24iIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNhbnlVUkkiLz4NCgkJCQk8L0FjdGlvbk1hdGNoPg0KCQkJPC9BY3Rpb24+DQoJCTwvQWN0aW9ucz4NCgk8L1RhcmdldD4NCgk8RW52aXJvbm1lbnRzPg0KCQk8RW52aXJvbm1lbnQ+DQoJCQk8RW52aXJvbm1lbnRNYXRjaCBNYXRjaElkPSJodHRwOi8vd3d3Lmhocy5nb3YvaGVhbHRoaXQvbmhpbi9mdW5jdGlvbiNpbnN0YW5jZS1pZGVudGlmaWVyLWVxdWFsIj4NCgkJCQk8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cuaGhzLmdvdi9oZWFsdGhpdC9uaGluI2luc3RhbmNlLWlkZW50aXRpZmVyIj4NCgkJCQkJPFBhdGllbnRJZCBFeHRlbnNpb249IjUwMDAwMDAwMSIgUm9vdD0iMS4xIi8+DQoJCQkJPC9BdHRyaWJ1dGVWYWx1ZT4NCgkJCQk8RW52aXJvbm1lbnRBdHRyaWJ1dGVEZXNpZ25hdG9yIEF0dHJpYnV0ZUlkPSJodHRwOi8vd3d3Lmhocy5nb3YvaGVhbHRoaXQvbmhpbiNzdWJqZWN0LWlkIiBEYXRhVHlwZT0iaHR0cDovL3d3dy5oaHMuZ292L2hlYWx0aGl0L25oaW4jaW5zdGFuY2UtaWRlbnRpdGlmZXIiLz4NCgkJCTwvRW52aXJvbm1lbnRNYXRjaD4NCgkJPC9FbnZpcm9ubWVudD4NCgk8L0Vudmlyb25tZW50cz4NCgk8UnVsZSBFZmZlY3Q9IlBlcm1pdCIgUnVsZUlkPSIxMjYiPg0KCQk8RGVzY3JpcHRpb24+cGVybWl0IGFsbCBhY2Nlc3MgdG8gZG9jdW1lbnRzLjwvRGVzY3JpcHRpb24+DQoJCTxUYXJnZXQvPg0KCTwvUnVsZT4NCjwvUG9saWN5Pg0K</xdsb:Document>
      </xdsb:ProvideAndRegisterDocumentSetRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns2:RegistryResponse[1]/@status</path>
								<content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Delete Document" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('DocRepositoryDB') { sql -> 
  def table = context.findProperty('DocumentTable')
  def col = context.findProperty('DocCol')
  def val = context.findProperty('DocVal')

  def table1 = context.findProperty('EventCodeTable')
  def col1 = context.findProperty('EventCol')
  def val1 = context.findProperty('EventVal')

  sql.execute('delete from ' + table1 + ' where ' + col1 + ' = ' + val1)
  sql.execute("delete from " + table + " where " + col + " = " + val )
}
					</script>
				</con:config>
			</con:testStep>
			<con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript><con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-12-12T23:24:43Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-12-12T23:34:43Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>12/12/2012 23:24:43</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-01-11T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="276bc324-fade-4c00-a205-45dd1d24092a" keepSession="false" maxResults="0" name="DocumentQueryTest" searchProperties="true">
			<con:settings/>
			<con:testStep name="Clear Documents" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('DocRepositoryDB') { sql -> 
  def table = context.findProperty('DocumentTable')
  def col = context.findProperty('DocCol')
  def val = context.findProperty('DocVal1')

  def table1 = context.findProperty('EventCodeTable')
  def col1 = context.findProperty('EventCol')
  def val1 = context.findProperty('EventVal1')

  sql.execute('delete from ' + table1 + ' where ' + col1 + ' = ' + val1 )
  sql.execute("delete from " + table + " where " + col + " = " + val )
}


					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Store Document" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>DocumentRepository_Binding</con:interface>
					<con:operation>DocumentRepository_ProvideAndRegisterDocumentSet-b</con:operation>
					<con:request name="Store Document">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#Endpoint-DocRepository}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
   <soapenv:Header/>
   <soapenv:Body projectName="DocRegistryAndRepository" testCase="DocumentQueryTest">
      <xdsb:ProvideAndRegisterDocumentSetRequest xmlns:xdsb="urn:ihe:iti:xds-b:2007">
         <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
            <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
               <rim:ExtrinsicObject home="urn:oid:1.1" id="Document01" isOpaque="false" mimeType="text/xml" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1">
                  <rim:Slot name="creationTime">
                     <rim:ValueList>
                        <!-- <rim:Value>2008-06-27 13:49:24</rim:Value> -->
                        <rim:Value>20080627134924</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="intendedRecipient">
                     <rim:ValueList>
                        <rim:Value>Agilex Technologies|Scott Borst</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="languageCode">
                     <rim:ValueList>
                        <rim:Value>en-US</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="legalAuthenticator">
                     <rim:ValueList>
                        <rim:Value>legal authenticator for a consent document</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="serviceStartTime">
                     <rim:ValueList>
                        <rim:Value>20070911000000</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="serviceStopTime">
                     <rim:ValueList>
                        <rim:Value>20080627000000</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="sourcePatientId">
                     <rim:ValueList>
                        <rim:Value>12344321dqtst^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Slot name="sourcePatientInfo">
                     <rim:ValueList>
                        <rim:Value>PID-3|pid1^^^domain</rim:Value>
                        <rim:Value>PID-5|Schnur^Anna^^^</rim:Value>
                        <rim:Value>PID-7|19560813</rim:Value>
                        <rim:Value>PID-8|F</rim:Value>
                        <rim:Value>PID-11|312 HILL ROAD^^HILLSBORO^MO^37660^US</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Name>
                     <rim:LocalizedString value="DocQueryTestDocument"/>
                  </rim:Name>
                  <rim:Description>
                     <rim:LocalizedString value="Consent document 1 Schnur VA comments"/>
                  </rim:Description>
                  <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="Document01" id="" nodeRepresentation="">
                     <rim:Slot name="authorPerson">
                        <rim:ValueList>
                           <rim:Value>Axolotl Elysium</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorInstitution">
                        <rim:ValueList>
                           <rim:Value>Department of Veterans Affairs</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorRole">
                        <rim:ValueList>
                           <rim:Value>Primary Care Provider</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorSpecialty">
                        <rim:ValueList>
                           <rim:Value>General</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="Document01" id="" nodeRepresentation="XNHIN-CONSENT">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>2.16.840.1.113883.6.1</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="NHIN Consent Document"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="Document01" id="" nodeRepresentation="R">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>2.16.840.1.113883.5.25</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="Restricted"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="Document01" id="" nodeRepresentation="CDAR2/IHE 1.0">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>Connect-a-thon formatCodes</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="CDAR2/IHE 1.0"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="Document01" id="" nodeRepresentation="Outpatient">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>Connect-a-thon healthcareFacilityTypeCodes</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="Outpatient"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="Document01" id="" nodeRepresentation="394802001">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>2.16.840.1.113883.6.96</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="General Medicine"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="Document01" id="" nodeRepresentation="34133-9">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>LOINC</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="Summarization of Episode Note"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:2c6b8cb7-8b2a-4051-b291-b1ae6a575ef4" classifiedObject="Document01" nodeRepresentation="T-32000">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>SNM3</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="EventCode"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:ExternalIdentifier id="" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="Document01" value="2.1.11111.1.1">
                     <rim:Name>
                        <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
                  <rim:ExternalIdentifier id="" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="Document01" value="12344321dqtst^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO">
                     <rim:Name>
                        <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
               </rim:ExtrinsicObject>
               <rim:RegistryPackage id="SubmissionSet01" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
                  <rim:Slot name="submissionTime">
                     <rim:ValueList>
                        <rim:Value>200905211223</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
                  <rim:Name>
                     <rim:LocalizedString value="Consent SubmissionSet1 Name"/>
                  </rim:Name>
                  <rim:Description>
                     <rim:LocalizedString value="Consent SubmissionSet1"/>
                  </rim:Description>
                  <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet01" nodeRepresentation="" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification" id="id_20">
                     <rim:Slot name="authorPerson">
                        <rim:ValueList>
                           <rim:Value>Axolotl Elysium</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorInstitution">
                        <rim:ValueList>
                           <rim:Value>Department of Veterans Affairs</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorRole">
                        <rim:ValueList>
                           <rim:Value>Primary Care Provider</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Slot name="authorSpecialty">
                        <rim:ValueList>
                           <rim:Value>General</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                  </rim:Classification>
                  <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet01" nodeRepresentation="History and Physical" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification" id="id_21">
                     <rim:Slot name="codingScheme">
                        <rim:ValueList>
                           <rim:Value>Connect-a-thon contentTypeCodes</rim:Value>
                        </rim:ValueList>
                     </rim:Slot>
                     <rim:Name>
                        <rim:LocalizedString value="History and Physical"/>
                     </rim:Name>
                  </rim:Classification>
                  <rim:ExternalIdentifier identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" value="2.1.11111.1.2" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier" id="id_22" registryObject="SubmissionSet01">
                     <rim:Name>
                        <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
                  <rim:ExternalIdentifier identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" value="129.6.58.92.1.1" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier" id="id_23" registryObject="SubmissionSet01">
                     <rim:Name>
                        <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
                  <rim:ExternalIdentifier identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" value="500000001^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:ExternalIdentifier" id="id_24" registryObject="SubmissionSet01">
                     <rim:Name>
                        <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
                     </rim:Name>
                  </rim:ExternalIdentifier>
               </rim:RegistryPackage>
               <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" sourceObject="SubmissionSet01" targetObject="Document01" id="ID_25276323_1" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Association">
                  <rim:Slot name="SubmissionSetStatus">
                     <rim:ValueList>
                        <rim:Value>Original</rim:Value>
                     </rim:ValueList>
                  </rim:Slot>
               </rim:Association>
               <rim:Classification classifiedObject="SubmissionSet01" classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" id="ID_25276323_3" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:Classification"/>
            </rim:RegistryObjectList>
         </lcm:SubmitObjectsRequest>
         <xdsb:Document id="Document01">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxQb2xpY3kgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoyLjA6cG9saWN5OnNjaGVtYTpvcyIgeG1sbnM6bmhpbj0iaHR0cDovL3d3dy5oaHMuZ292L2hlYWx0aGl0L25oaW4iIHBvbGljeWlkPSIxMjM0NTY3OC0xMjM0LTEyMzQtMTIzNC0xMjM0NTY3ODlhYmMiIHJ1bGVjb21iaW5pbmdhbGdpZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpydWxlLWNvbWJpbmluZy1hbGdvcml0aG06Zmlyc3QtYXBwbGljYWJsZSI+DQoJPERlc2NyaXB0aW9uPlNhbXBsZSBYQUNNTCBwb2xpY3kgc2hvd2luZyBhY2Nlc3MgYnkgdXNlciByb2xlPC9EZXNjcmlwdGlvbj4NCgk8VGFyZ2V0Pg0KCQk8QWN0aW9ucz4NCgkJCTxBY3Rpb24+DQoJCQkJPEFjdGlvbk1hdGNoIE1hdGNoSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4NCgkJCQkJPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNhbnlVUkkiPmh0dHA6Ly93d3cuaGhzLmdvdi9oZWFsdGhpdC9uaGluI3JldHJpZXZlRG9jdW1lbnQ8L0F0dHJpYnV0ZVZhbHVlPg0KCQkJCQk8QWN0aW9uQXR0cmlidXRlRGVzaWduYXRvciBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjIuMDphY3Rpb24iIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNhbnlVUkkiLz4NCgkJCQk8L0FjdGlvbk1hdGNoPg0KCQkJPC9BY3Rpb24+DQoJCTwvQWN0aW9ucz4NCgk8L1RhcmdldD4NCgk8RW52aXJvbm1lbnRzPg0KCQk8RW52aXJvbm1lbnQ+DQoJCQk8RW52aXJvbm1lbnRNYXRjaCBNYXRjaElkPSJodHRwOi8vd3d3Lmhocy5nb3YvaGVhbHRoaXQvbmhpbi9mdW5jdGlvbiNpbnN0YW5jZS1pZGVudGlmaWVyLWVxdWFsIj4NCgkJCQk8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cuaGhzLmdvdi9oZWFsdGhpdC9uaGluI2luc3RhbmNlLWlkZW50aXRpZmVyIj4NCgkJCQkJPFBhdGllbnRJZCBFeHRlbnNpb249IjUwMDAwMDAwMSIgUm9vdD0iMS4xIi8+DQoJCQkJPC9BdHRyaWJ1dGVWYWx1ZT4NCgkJCQk8RW52aXJvbm1lbnRBdHRyaWJ1dGVEZXNpZ25hdG9yIEF0dHJpYnV0ZUlkPSJodHRwOi8vd3d3Lmhocy5nb3YvaGVhbHRoaXQvbmhpbiNzdWJqZWN0LWlkIiBEYXRhVHlwZT0iaHR0cDovL3d3dy5oaHMuZ292L2hlYWx0aGl0L25oaW4jaW5zdGFuY2UtaWRlbnRpdGlmZXIiLz4NCgkJCTwvRW52aXJvbm1lbnRNYXRjaD4NCgkJPC9FbnZpcm9ubWVudD4NCgk8L0Vudmlyb25tZW50cz4NCgk8UnVsZSBFZmZlY3Q9IlBlcm1pdCIgUnVsZUlkPSIxMjYiPg0KCQk8RGVzY3JpcHRpb24+cGVybWl0IGFsbCBhY2Nlc3MgdG8gZG9jdW1lbnRzLjwvRGVzY3JpcHRpb24+DQoJCTxUYXJnZXQvPg0KCTwvUnVsZT4NCjwvUG9saWN5Pg0K</xdsb:Document>
      </xdsb:ProvideAndRegisterDocumentSetRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';
//ns2:RegistryResponse[1]/@status</path>
								<content>urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="QueryByPatientId" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>DocumentRegistry_Binding_Soap</con:interface>
					<con:operation>DocumentRegistry_RegistryStoredQuery</con:operation>
					<con:request name="QueryByPatientId">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#Endpoint-DocRegistry}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soapenv:Header/>
   <soapenv:Body projectName="DocRegistryAndRepository" testCase="DocumentQueryTest">
      <urn:AdhocQueryRequest id="?" comment="?" federated="false" federation="?" startIndex="0" maxResults="-1">
         <urn:ResponseOption returnType="LeafClass" returnComposedObjects="true"/>
         <urn1:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" home="1.1">
            <urn1:Slot name="$XDSDocumentEntryPatientId">
               <urn1:ValueList>
                  <urn1:Value>12344321dqtst^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
         </urn1:AdhocQuery>
      </urn:AdhocQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[1]/@value</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:ExternalIdentifier[1]/@value}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Document count is 1" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject)</path>
								<content>1</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="QueryByDocUniqueId" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>DocumentRegistry_Binding_Soap</con:interface>
					<con:operation>DocumentRegistry_RegistryStoredQuery</con:operation>
					<con:request name="QueryByDocUniqueId">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#Endpoint-DocRegistry}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soapenv:Header/>
   <soapenv:Body projectName="DocRegistryAndRepository" testCase="DocumentQueryTest">
      <urn:AdhocQueryRequest id="?" comment="?" federated="false" federation="?" startIndex="0" maxResults="-1">
         <urn:ResponseOption returnType="LeafClass" returnComposedObjects="true"/>
         <urn1:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" home="1.1">
            <urn1:Slot name="$XDSDocumentEntryUniqueId">
               <urn1:ValueList>
                  <urn1:Value>2.1.11111.1.1</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
            <urn1:Slot name="$XDSDocumentEntryPatientId">
               <urn1:ValueList>
                  <urn1:Value>12344321dqtst^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
         </urn1:AdhocQuery>
      </urn:AdhocQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[1]/@value</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:ExternalIdentifier[1]/@value}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Document count is 1" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject)</path>
								<content>1</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Creation Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='creationTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='creationTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Service Start Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='serviceStartTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='serviceStartTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Service Stop Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='serviceStopTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='serviceStopTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="QueryByEventCode" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>DocumentRegistry_Binding_Soap</con:interface>
					<con:operation>DocumentRegistry_RegistryStoredQuery</con:operation>
					<con:request name="QueryByEventCode">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#Endpoint-DocRegistry}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soapenv:Header/>
   <soapenv:Body projectName="DocRegistryAndRepository" testCase="DocumentQueryTest">
      <urn:AdhocQueryRequest id="?" comment="?" federated="false" federation="?" startIndex="0" maxResults="-1">
         <urn:ResponseOption returnType="LeafClass" returnComposedObjects="true"/>
         <urn1:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" home="1.1">
            <urn1:Slot name="$XDSDocumentEntryEventCodeList">
               <urn1:ValueList>
                  <urn1:Value>('T-32000^^SNM3')</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
            <urn1:Slot name="$XDSDocumentEntryPatientId">
               <urn1:ValueList>
                  <urn1:Value>12344321dqtst^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
         </urn1:AdhocQuery>
      </urn:AdhocQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[1]/@value</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:ExternalIdentifier[1]/@value}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Document count is 1" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject)</path>
								<content>1</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Creation Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='creationTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='creationTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Service Start Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='serviceStartTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='serviceStartTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Service Stop Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='serviceStopTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='serviceStopTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="QueryByEventCodeScheme" type="request" disabled="true">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>DocumentRegistry_Binding_Soap</con:interface>
					<con:operation>DocumentRegistry_RegistryStoredQuery</con:operation>
					<con:request name="QueryByEventCodeScheme">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#Endpoint-DocRegistry}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soapenv:Header/>
   <soapenv:Body projectName="DocRegistryAndRepository" testCase="DocumentQueryTest">
      <urn:AdhocQueryRequest id="?" comment="?" federated="false" federation="?" startIndex="0" maxResults="-1">
         <urn:ResponseOption returnType="LeafClass" returnComposedObjects="true"/>
         <urn1:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" home="1.1">
            <urn1:Slot name="$XDSDocumentEntryEventCodeList">
               <urn1:ValueList>
                  <urn1:Value>('T-32000^^SNM3')</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
            <urn1:Slot name="$XDSDocumentEntryPatientId">
               <urn1:ValueList>
                  <urn1:Value>12344321dqtst^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
         </urn1:AdhocQuery>
      </urn:AdhocQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[1]/@value</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:ExternalIdentifier[1]/@value}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Document count is 1" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject)</path>
								<content>1</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Creation Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='creationTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='creationTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Service Start Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='serviceStartTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='serviceStartTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:assertion name="Service Stop Time" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject[1]/ns2:Slot[@name='serviceStopTime']/ns2:ValueList[1]/ns2:Value[1]</path>
								<content>${Store Document#Request#//xdsb:ProvideAndRegisterDocumentSetRequest[1]/lcm:SubmitObjectsRequest[1]/rim:RegistryObjectList[1]/rim:ExtrinsicObject[1]/rim:Slot[@name='serviceStopTime']/rim:ValueList[1]/rim:Value[1]}</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="QueryNoResults" type="request">
				<con:settings/>
				<con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<con:interface>DocumentRegistry_Binding_Soap</con:interface>
					<con:operation>DocumentRegistry_RegistryStoredQuery</con:operation>
					<con:request name="QueryNoResults">
						<con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#Endpoint-DocRegistry}</con:endpoint>
						<con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soapenv:Header/>
   <soapenv:Body projectName="DocRegistryAndRepository" testCase="DocumentQueryTest">
      <urn:AdhocQueryRequest id="?" comment="?" federated="false" federation="?" startIndex="0" maxResults="-1">
         <urn:ResponseOption returnType="LeafClass" returnComposedObjects="true"/>
         <urn1:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d" home="1.1">
            <urn1:Slot name="$XDSDocumentEntryPatientId">
               <urn1:ValueList>
                  <urn1:Value>boguspatientid^^^&amp;1.3.6.1.4.1.21367.2005.3.7&amp;ISO</urn1:Value>
               </urn1:ValueList>
            </urn1:Slot>
         </urn1:AdhocQuery>
      </urn:AdhocQueryRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion name="Result count of 0" type="XPath Match">
							<con:configuration>
								<path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
declare namespace ns4='urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0';
count(//ns4:AdhocQueryResponse[1]/ns2:RegistryObjectList[1]/ns2:ExtrinsicObject)</path>
								<content>0</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="Delete Document" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('DocRepositoryDB') { sql -> 
  def table = context.findProperty('DocumentTable')
  def col = context.findProperty('DocCol')
  def val = context.findProperty('DocVal1')

  def table1 = context.findProperty('EventCodeTable')
  def col1 = context.findProperty('EventCol')
  def col2 = context.findProperty('EventCol1')
  def val1 = context.findProperty('EventVal')
  def val2 = context.findProperty('EventVal2');

  sql.execute('delete from ' + table1 + ' where ' + col1 + ' = ' + val1 )
  sql.execute("delete from " + table + " where " + col + " = " + val )
}
					</script>
				</con:config>
			</con:testStep>
			<con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript><con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2012-12-12T23:24:44Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2012-12-12T23:34:44Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>12/12/2012 23:24:44</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2013-01-11T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
		</con:testCase>
		<con:properties/>
		<con:reportParameters/>
	</con:testSuite>
	<con:requirements/>
	<con:properties>
		<con:property><con:name>DBHost</con:name><con:value>localhost</con:value></con:property>
		<con:property><con:name>DBPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>DBPort</con:name><con:value>3306</con:value></con:property>
		
		
		
		<con:property><con:name>DBUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>DocCol</con:name><con:value>DocumentTitle</con:value></con:property><con:property><con:name>DocRepositoryDB</con:name><con:value>docrepository</con:value></con:property>
		
		
		<con:property><con:name>DocumentTable</con:name><con:value>document</con:value></con:property><con:property><con:name>DocVal</con:name><con:value>'ProvideAndRegisterTestDocument'</con:value></con:property>
		
		<con:property><con:name>DocVal1</con:name><con:value>'DocQueryTestDocument'</con:value></con:property><con:property><con:name>Endpoint-DocRegistry</con:name><con:value>http://localhost:8080/CONNECTAdapter/DocumentRegistry_Service</con:value></con:property><con:property><con:name>Endpoint-DocRepository</con:name><con:value>http://localhost:8080/CONNECTAdapter/DocumentRepository_Service</con:value></con:property>
		
		
		
		
	<con:property><con:name>EventCodeTable</con:name><con:value>eventcode</con:value></con:property><con:property><con:name>EventCol</con:name><con:value>EventCode</con:value></con:property><con:property><con:name>EventCol1</con:name><con:value>EventCodeScheme</con:value></con:property><con:property><con:name>EventVal</con:name><con:value>'ProvideAndRegisterTestEventCodeValue'</con:value></con:property><con:property><con:name>EventVal1</con:name><con:value>'DocQueryTestEventCodeValue'</con:value></con:property><con:property><con:name>EventVal2</con:name><con:value>'SNM3'</con:value></con:property><con:property><con:name>GatewayPropDir</con:name><con:value>C:\glassfish3\glassfish\domains\domain1\config\nhin</con:value></con:property></con:properties>
	<con:afterLoadScript>def propertiesFilename = project.path[0..(project.path.size()-4)] + 'properties'
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
	def props = new Properties()
	props.load(new FileReader(propertiesFile))
	props.each { key, value ->
	    project.setPropertyValue(key, value)
	}
}


TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
def testRunListener = [
  afterRun: { testRunner, runContext -> },
  afterStep: { testRunner, runContext, result -> },
  beforeStep: { testRunner, runContext -> },
  beforeStep: { testRunner, runContext, testStep -> },
  beforeRun: { testRunner, runContext -> 
    use (org.codehaus.groovy.runtime.TimeCategory) {
      def startDate = 5.minutes.ago
      def endDate = 5.minutes.from.now
      def expireDate = 30.days.from.now

      def df = "yyyy-MM-dd'T'HH:mm:ss'Z'"
      def dfSig = "MM/dd/yyyy' 'HH:mm:ss"

      runContext.testCase.setPropertyValue("startDate", startDate.format(df))
      runContext.testCase.setPropertyValue("endDate", endDate.format(df))
      runContext.testCase.setPropertyValue("sigDate", startDate.format(dfSig))
      runContext.testCase.setPropertyValue("expireDate", expireDate.format(df))
    }
  }   
] as com.eviware.soapui.model.testsuite.TestRunListener

project.testSuiteList*.testCaseList.flatten()*.addTestRunListener(testRunListener)



com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.findProperty = { propertyName ->
    return delegate.getProperty(propertyName) ?:
                delegate.testCase.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.project.getPropertyValue(propertyName)
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.withSql = { dbOrPropertyName, block ->
  def dbName = delegate.findProperty(dbOrPropertyName) ?: dbOrPropertyName
  def host = delegate.findProperty('DBHost')
  def port = delegate.findProperty('DBPort')
  def user = delegate.findProperty('DBUser')
  def pass = delegate.findProperty('DBPass')

  def connectString = "jdbc:mysql://${host}:${port}/${dbName}"
  def sql = groovy.sql.Sql.newInstance(connectString, user, pass, "com.mysql.jdbc.Driver");
  try {
     block(sql)
  } finally {
    sql.close()
  }
}
	</con:afterLoadScript>
	<con:wssContainer/>
	<con:databaseConnectionContainer/>
	<con:reporting>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:parameters/>
	</con:reporting>

</con:soapui-project>