<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project abortOnError="false" name="PatientCorrelation" resourceRoot="${projectDir}" runType="SEQUENTIAL" soapui-version="5.1.2" activeEnvironment="Default" id="b5c867c1-6356-49d1-838f-d1ce0bb03804" xmlns:con="http://eviware.com/soapui/config">
  <con:settings/>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation}PatientCorrelationBinding" definition="../../../target/wsdl/NhincComponentPatientCorrelation.wsdl" name="PatientCorrelationBinding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="d545864b-88d0-4884-8e77-ce7234de4cd8" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:endpoints>
      <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation:AddPatientCorrelationRequestMessage" anonymous="optional" bindingOperationName="AddPatientCorrelation" inputName="AddPatientCorrelationRequest" isOneWay="false" name="AddPatientCorrelation" outputName="AddPatientCorrelationResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="005644de-a411-4688-8d2f-2f662952520d">
      <con:settings/>
    </con:operation>
    <con:operation action="urn:gov:hhs:fha:nhinc:nhinccomponentpatientcorrelation:RetrievePatientCorrelationsRequestMessage" anonymous="optional" bindingOperationName="RetrievePatientCorrelations" inputName="RetrievePatientCorrelationsRequest" isOneWay="false" name="RetrievePatientCorrelations" outputName="RetrievePatientCorrelationsResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="8b84d14a-56ab-4a8e-9763-596915f43603">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:testSuite name="PatientCorrelation TestSuite" id="9ea3ee16-e4e1-483b-a08f-9da70e85b1bd">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="cef5f027-ce60-4baf-8a1f-1d632a2497a5" keepSession="false" maxResults="0" name="AddMultiple1" searchProperties="true">
      <con:description/>
      <con:settings/>
      <con:testStep name="Clear Correlation Table" type="groovy" id="9f2fd368-72c7-4516-a803-044eec15b7f3">
        <con:settings/>
        <con:config>
          <script>context.withSql("PatientCorrelationDB") { sql ->
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add1" type="transfer" id="8fe0e6dc-5546-4046-a99b-97d5e06616b3">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add1" type="request" id="c1800503-e898-45a7-be1e-f4849741fc64">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add1" id="8d27b48b-c439-4b44-9e57-2c478d9f562a">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #1">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:36Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberOne"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="21c61fea-919f-447f-b0fa-c350f924eda4"/>
            <con:assertion type="SOAP Fault Assertion" id="fb6bcb09-1f88-4a2e-b441-0fad169cb292"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add2" type="transfer" id="ec4cc680-2864-4b79-9336-4aedc6c13cc6">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add2" type="request" id="6d7b37c5-1b23-4f61-b096-bb07eafe6e01">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add2" id="ed3f0cce-c30d-4cab-bc1c-a26f49ab2915">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #1">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:36Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberOne"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="ad6b5cf0-f86d-4244-839b-d66377707666"/>
            <con:assertion type="SOAP Fault Assertion" id="14748f78-be3e-4aaa-a18a-4fe66d00e86c"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Retrieve" type="transfer" id="7ed725b9-c15f-4c9e-8f07-cc8b25b7093f">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>SubjectIdentifier</con:name>
            <con:sourceType>RemoteSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>AssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QueryAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QuerySubjectIdentifier</con:name>
            <con:sourceType>LocalSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Retrieve" type="request" id="5be53c5a-ec95-4718-a93f-28dea5fa9d6b">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>RetrievePatientCorrelations</con:operation>
          <con:request name="Retrieve" id="af1364ab-0594-4d04-bdb1-9b80fa8a0042">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #1">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:36Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/AddMultipleNumberOne"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="2f5193bb-4370-4918-b0a9-92616bb4052e"/>
            <con:assertion type="SOAP Fault Assertion" id="e4604312-0485-4aea-bb24-5a6c8b007579"/>
            <con:assertion name="LocalPatientIDExtension" type="XPath Match" id="2463b997-95ee-496f-979b-3cfc28da67ce">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
                <content>D123401</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="LocalPatientIDRoot" type="XPath Match" id="d8f53ac5-9cb1-4f57-8e96-f4823ec75ecf">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match" id="1cf943a1-e9d7-4b34-8247-abb9136c3948">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
                <content>500000000</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match" id="60ef3c17-c70c-4d16-b913-9ef6b82e27a7">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2014-04-01T20:08:36Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2014-04-01T20:18:36Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>04/01/2014 20:08:36</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2014-05-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAAID</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID</con:name>
          <con:value>500000000</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID</con:name>
          <con:value>D123401</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="ff68f1ee-5476-4238-82e5-172761d83dd2" keepSession="false" maxResults="0" name="AddMultiple2" searchProperties="true">
      <con:settings/>
      <con:testStep name="Clear Correlation Table" type="groovy" id="abcf97c7-3f3c-4668-b3f1-cfcbfd8ee189">
        <con:settings/>
        <con:config>
          <script>context.withSql("PatientCorrelationDB") { sql ->
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add1" type="transfer" id="49f306b4-50df-4a56-bfa4-41873cb4977a">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add1" type="request" id="a3092163-e860-48f7-8b14-41b64414fe5b">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add1" id="3101f657-559c-44bf-89fe-c39da4d7e852">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #2">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:37Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberTwo"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="500000000"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="3f7d5188-9030-4946-ab4e-a5004361fd70"/>
            <con:assertion type="SOAP Fault Assertion" id="f447d5e3-52c0-43fc-ab82-b106ccad5975"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add2" type="transfer" id="6fbb4fec-f933-4a1a-b9b4-780d176506fa">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add2" type="request" id="35e4811f-a9fc-40f3-94d1-c6aa29d5e89f">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add2" id="a0ebd872-46e9-4e22-8223-b08456a57eff">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #2">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:37Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
                  <urn:telecom value="https://example.org/PatientFeed/AddMultipleNumberTwo"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="3f9ed887-8f4a-449a-88ff-3a491357db87"/>
            <con:assertion type="SOAP Fault Assertion" id="f6daed3e-5d66-4f6b-b7a2-abc4c2dcd054"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Retrieve" type="transfer" id="68bb015c-24fd-4143-8585-e92dc57cf06f">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>SubjectIdentifier</con:name>
            <con:sourceType>RemoteSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>AssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QueryAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QuerySubjectIdentifier</con:name>
            <con:sourceType>LocalSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Retrieve" type="request" id="6384fbb7-8812-4200-9de3-92abd46a32a8">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>RetrievePatientCorrelations</con:operation>
          <con:request name="Retrieve" id="dabb962c-24ca-4646-9735-b98f8fc71fc6">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Add multiple #2">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:37Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/AddMultipleNumberTwo"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="d4f88677-acb7-4b15-93e8-36ccae4443db"/>
            <con:assertion type="SOAP Fault Assertion" id="b0f104f6-3503-47cb-a136-88e8b8f56aeb"/>
            <con:assertion name="LocalPatientIDExtension" type="XPath Match" id="e05e7b09-4182-412e-8416-c8479e01d0d7">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
                <content>D123401</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="LocalPatientIDRoot" type="XPath Match" id="0c72ac41-2ff8-4232-8f2a-2565d9179c55">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match" id="0001cba2-78cd-4d9b-8ae0-869f7615b8d4">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
                <content>500000000</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match" id="3bb9c6e7-b331-4248-be91-1a3148b59087">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2014-04-01T20:08:37Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2014-04-01T20:18:37Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>04/01/2014 20:08:37</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2014-05-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID1</con:name>
          <con:value>500000000</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID1</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID1</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAAID1</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID2</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID2</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID2</con:name>
          <con:value>500000000</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAAID2</con:name>
          <con:value>2.2</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="0cb2c0df-b008-4285-b363-e56504707a05" keepSession="false" maxResults="0" name="Simple Retrieve" searchProperties="true">
      <con:settings/>
      <con:testStep name="Clear Correlation Table" type="groovy" id="b9ae29b0-f93f-45f8-a485-d5545cf697dd">
        <con:settings/>
        <con:config>
          <script>context.withSql("PatientCorrelationDB") { sql ->
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add" type="transfer" id="fa64db53-7c4a-42a4-b203-e2a176cb71ed">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add" type="request" id="5aa6d3c6-61ae-4296-962e-6e11234fd3d2">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add" id="7a37dfd7-098b-4a67-b0ac-e7ae9d213d94">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieve"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="c1f00592-fdfe-4ccf-b303-7d586e554406"/>
            <con:assertion type="SOAP Fault Assertion" id="f2dda61c-f23c-4ff4-b9cf-68922144b781"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Retrieve" type="transfer" id="65b790b8-ad74-4133-889d-410c4d8ce4e9">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>SubjectIdentifier</con:name>
            <con:sourceType>RemoteSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>AssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QuerySubjectIdentifier</con:name>
            <con:sourceType>LocalSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QueryAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Retrieve" type="request" id="6f6db3ab-8344-41c1-a473-2c1bddec03b7">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>RetrievePatientCorrelations</con:operation>
          <con:request name="Retrieve" id="26ebd227-099a-4bce-8aae-b7dd0902700f">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/SimpleRetrieve"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="4c69d6a8-b445-4cab-90c4-4fc31093c2e1"/>
            <con:assertion type="SOAP Fault Assertion" id="ca351f85-ae41-4447-b76f-73f3f83f5af2"/>
            <con:assertion name="LocalPatientIDExtension" type="XPath Match" id="32be719e-1b8a-4dbd-a06d-46c1049169d3">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
                <content>D123401</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="LocalPatientIDRoot" type="XPath Match" id="cf305d1e-14ef-43e2-b581-68441247dd88">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match" id="14fa7922-3bf3-415e-81e8-6796cab513cd">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
                <content>500000000</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match" id="0b4e03be-52fe-4d16-82c7-9f55210850ce">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
     <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2014-04-01T20:08:38Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2014-04-01T20:18:38Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>04/01/2014 20:08:38</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2014-05-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID</con:name>
          <con:value>500000000</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAAID</con:name>
          <con:value>1.1</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="708cf740-23a5-44fb-afd3-4328b60f5f87" keepSession="false" maxResults="0" name="Simple Retrieve with multiple in repository" searchProperties="true">
      <con:settings/>
      <con:testStep name="Clear Correlation Table" type="groovy" id="a2ed7e16-3ac3-4b42-b8e9-c1d29038afc2">
        <con:settings/>
        <con:config>
          <script>context.withSql("PatientCorrelationDB") { sql ->
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add1" type="transfer" id="b91fae75-65b4-4437-966f-1337d43d0a2d">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add1" type="request" id="7f79a15b-d8dc-49c4-bc3b-2d1b003d975c">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add1" id="43afba63-29d9-437c-b815-a268468b84fd">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="5153879b-31f6-4619-b468-9257f6f3ab90"/>
            <con:assertion type="SOAP Fault Assertion" id="35dc8052-9dec-40ef-99a6-f53a8bb2b83e"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add2" type="transfer" id="f12be12f-0af1-408d-8111-9598be347626">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add2" type="request" id="4d8c5283-c188-47bd-9ad6-e94c2d587f0a">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add2" id="ffa63a4d-d6ba-4c4c-9767-64e8665c1aa0">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123402"/>
                           <urn:id root="2.2" extension="500000001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="61f26e1d-1677-42e8-9bd5-b67036dd409a"/>
            <con:assertion type="SOAP Fault Assertion" id="7ea3dc6a-8e45-421b-ad1c-5564a8b018a1"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add3" type="transfer" id="6215d52c-6dac-476f-a89f-63434c695f30">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID3</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID3</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add3" type="request" id="0c84c633-0ce9-4dbd-99e8-c18331cf425f">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add3" id="9fdd9b5f-f34a-4f91-a477-0a74156fdb3a">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="500000002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      <!--urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV><urn:PRPA_IN201301UV><urn:controlActProcess/></urn:PRPA_IN201301UV--></urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="9fc7580e-f8e2-4f06-823e-d0834d3627b3"/>
            <con:assertion type="SOAP Fault Assertion" id="16982c08-c77f-41ef-b76b-603b62c6f2f5"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Retrieve" type="transfer" id="558f873c-ac20-43be-8733-d01a4353d7ac">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>SubjectIdentifier</con:name>
            <con:sourceType>RemoteSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>AssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QueryAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QuerySubjectIdentifier</con:name>
            <con:sourceType>LocalSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Retrieve" type="request" id="f6afcce0-5133-4a7a-aa1f-560c751b4d8a">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>RetrievePatientCorrelations</con:operation>
          <con:request name="Retrieve" id="bd72cf25-a663-4123-a288-6dc5ea9a31ac">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Simple Retrieve with multiple in repository">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/SimpleRetrieveWithMultiple"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123401"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000000"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="5995a062-d9e3-4f67-9b66-a8b3ca436541"/>
            <con:assertion type="SOAP Fault Assertion" id="c1d134d5-8af7-4010-8f4e-2badcad40873"/>
            <con:assertion type="XPath Match" id="cf1fd2f3-8b37-492f-963f-94698b139a01">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
                <content>D123401</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" id="b24ee4f8-7a0a-465c-a418-877ef80c4f88">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="LocalPatientIDExtension" type="XPath Match" id="03d765e9-f7ee-4f2f-9dd6-8e523d4c3455">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
                <content>D123401</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="LocalPatientIDRoot" type="XPath Match" id="6828e6d1-de0c-43e4-8ed1-8c39c6fe1a31">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match" id="448080c5-f0f7-4b66-94ab-040c518a64fe">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]//ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
                <content>500000000</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match" id="eed46280-0427-46ec-8951-2c3440d33b98">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
       <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2014-04-01T20:08:38Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2014-04-01T20:18:38Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>04/01/2014 20:08:38</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2014-05-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID1</con:name>
          <con:value>500000000</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID2</con:name>
          <con:value>500000001</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID3</con:name>
          <con:value>500000002</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID1</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID2</con:name>
          <con:value>D123402</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID3</con:name>
          <con:value>D123403</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAAID</con:name>
          <con:value>1.1</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="2ea19a05-affb-4fcc-859c-89eb8c97b68a" keepSession="false" maxResults="0" name="Multiple results" searchProperties="true">
      <con:settings/>
      <con:testStep name="Clear Correlation Table" type="groovy" id="f4aba0a3-0961-4217-87e1-8b50c4a67038">
        <con:settings/>
        <con:config>
          <script>context.withSql("PatientCorrelationDB") { sql ->
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add1" type="transfer" id="72d7f932-8e05-4803-9087-e868103a3429">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add1" type="request" id="a454fb87-d0a8-41c9-b9b8-455220d30c14">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add1" id="344de4eb-16b9-4c27-8984-f6f33325629c">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="12501433-d829-4b3a-9ac0-e3aecc25989e"/>
            <con:assertion type="SOAP Fault Assertion" id="48337db5-9114-45d6-88b5-2b28baf160c0"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add2" type="transfer" id="3c22360a-cd60-421e-bb0c-308ad3f2ec86">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add2" type="request" id="08dc8ab7-d371-4b72-bb4d-bac5b230e20a">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add2" id="6a56b756-d8f0-4229-a04e-58f14fc7c35b">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123401"/>
                           <urn:id root="2.2" extension="IHS50000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="2a1ae3d5-d277-4b2f-a7fb-5da611530f31"/>
            <con:assertion type="SOAP Fault Assertion" id="a296237c-b859-4517-8dbc-08fc78ed42b5"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add3" type="transfer" id="0162d8f2-1e82-44c2-a229-72b1c4f7167a">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID3</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID3</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add3</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add3" type="request" id="acdecac3-80f2-4a8e-977b-f0590b139ebd">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add3" id="817def37-44bb-4772-85cf-bfc2cca4b54e">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123402"/>
                           <urn:id root="2.2" extension="500000001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="359f9f52-eee2-4f31-98f0-79f57656d988"/>
            <con:assertion type="SOAP Fault Assertion" id="ea1f772b-7bca-410a-b659-81f27a9d2aa7"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add4" type="transfer" id="16192aec-2255-4446-80dd-5a007c4851bc">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID4</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add4</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add4</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID4</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add4</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add4</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add4</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add4</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add4</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add4" type="request" id="3bd31943-c0d3-4ad7-a95d-48cba0391157">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add4" id="c1a12f94-5d1e-44e2-8709-53d4fbb51892">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123402"/>
                           <urn:id root="2.2" extension="IHS50001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="20c13060-e777-4a4e-998b-575b06b9d683"/>
            <con:assertion type="SOAP Fault Assertion" id="4cb57382-2e84-45ac-9a59-fcdf51a9fec6"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add5" type="transfer" id="d0aefa66-74f0-4770-9cac-5e371c3465b9">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID5</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add5</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add5</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID5</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add5</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add5</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add5</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add5</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add5</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add5" type="request" id="e30f45ad-d745-4809-ae70-1fe234311a33">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add5" id="b15b39ad-9bf0-4b92-844c-a8c1cb655d92">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="500000002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="5be2d209-aa01-4728-9fa3-2b2f58d4e44a"/>
            <con:assertion type="SOAP Fault Assertion" id="6d234c79-9902-496a-ace0-899e38d24c8f"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add6" type="transfer" id="90e7131b-da7c-4dbc-b23b-9d22e6d3adb4">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalSubjectID</con:name>
            <con:sourceType>LocalSubjectID6</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add6</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add6</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID6</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add6</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add6</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add6</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID2</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add6</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID2</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add6</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add6" type="request" id="6489d596-514d-4843-9125-2fb139f8fcbb">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add6" id="056c1d78-6c80-4769-b622-d0d61dc4af1f">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="IHS50002"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="c27a771b-af06-4534-860e-cc83cac73c4d"/>
            <con:assertion type="SOAP Fault Assertion" id="41543b64-fd0d-45d4-bb55-4e9d91d9886f"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Retrieve" type="transfer" id="0709ec4b-c8da-417b-beb6-ad72f2799dac">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>SubjectIdentifier</con:name>
            <con:sourceType>RemoteSubjectID3</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>AssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QueryAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QuerySubjectIdentifier</con:name>
            <con:sourceType>LocalSubjectID3</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Retrieve" type="request" id="0d00b5ad-1f50-4fd5-a358-ecea438e6b71">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>RetrievePatientCorrelations</con:operation>
          <con:request name="Retrieve" id="e50d21ea-9394-4cac-a1cf-bbf3c52c9462">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Multiple results">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:38Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PIXQuery/MultipleResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="1.1" extension="D123402"/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000001"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="e2cc04e1-1404-4684-af87-d41bdb0d922a"/>
            <con:assertion type="SOAP Fault Assertion" id="c1ce0e23-bdea-4658-aa45-6525a71695b5"/>
            <con:assertion name="LocalPatientIDExtension" type="XPath Match" id="8eda952e-99de-4617-92d5-2e419d16c20b">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@extension</path>
                <content>D123402</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="LocalPatientIDRoot" type="XPath Match" id="8284f89a-3fb5-4510-b196-0a8ec09dd3c9">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:id[1]/@root</path>
                <content>1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match" id="e205f2ee-a38f-43a3-87e0-42ef846a7a22">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
                <content>500000001</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match" id="1dc530e4-bd2e-456c-bbd6-28736a6b015b">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
     <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2014-04-01T20:08:38Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2014-04-01T20:18:38Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>04/01/2014 20:08:38</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2014-05-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID1</con:name>
          <con:value>500000000</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID2</con:name>
          <con:value>IHS50000</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID3</con:name>
          <con:value>500000001</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID4</con:name>
          <con:value>IHS50001</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID5</con:name>
          <con:value>500000002</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID6</con:name>
          <con:value>IHS50002</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID1</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID2</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID3</con:name>
          <con:value>D123402</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID4</con:name>
          <con:value>D123402</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID5</con:name>
          <con:value>D123403</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID6</con:name>
          <con:value>D123403</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAAID</con:name>
          <con:value>1.1</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="6f809e56-9c83-48e1-8d60-c03cb53b59db" keepSession="false" maxResults="0" name="Retrieve with empty repository" searchProperties="true">
      <con:settings/>
      <con:testStep name="Clear Correlation Table" type="groovy" id="4d74ff92-6fce-4a21-9cd2-72b5b5bda0a0">
        <con:settings/>
        <con:config>
          <script>context.withSql("PatientCorrelationDB") { sql ->
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add" type="transfer" id="a039af4c-dcf8-4858-aa3d-96cd30b5268f">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add" type="request" id="4367064f-1791-4427-a762-09baf263c78a">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add" id="fbe7d60c-412b-4513-845f-057802b6a283">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with empty repository">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:39Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveWithEmptyRepository"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="" extension=""/>
                           <urn:id root="2.2" extension="500000005"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="d4bba8bf-6376-4b87-a223-1133979b63df"/>
            <con:assertion type="SOAP Fault Assertion" id="bfecfffc-5244-4bea-ac56-c8d231f92b6d"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Retrieve" type="transfer" id="41f7d874-5058-45a5-acbd-0435e9bda3f4">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>SubjectIdentifier</con:name>
            <con:sourceType>RemoteSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>AssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QuerySubjectIdentifier</con:name>
            <con:sourceType>LocalSubjectID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QueryAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Retrieve" type="request" id="ec2a2dac-3f80-4443-b2c1-066e6746decd">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>RetrievePatientCorrelations</con:operation>
          <con:request name="Retrieve" id="298742ae-9e07-44f9-b823-5f2b58bc2e3a">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with empty repository">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:39Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PIXQuery/RetrieveWithEmptyRepository"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="" extension=""/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000005"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="9b21e15f-9edd-4440-ba99-def9c1ac8149"/>
            <con:assertion type="SOAP Fault Assertion" id="9a40719e-39db-42f5-8e59-db4ed685fa09"/>
            <con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match" id="2465ebf9-140f-4e84-99a1-bf26e30339ce">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
                <content>500000005</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match" id="a7bbee00-71da-4c81-bc49-78a885cd5efb">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" id="8fca7895-4fce-4a3a-a695-f7b05cfed9c2">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:RetrievePatientCorrelationsResponse[1]/ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:patientPerson[1]/ns3:name[1]/@nullFlavor</path>
                <content>NA</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
     <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2014-04-01T20:08:39Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2014-04-01T20:18:39Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>04/01/2014 20:08:39</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2014-05-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID</con:name>
          <con:value>500000005</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>LocalAAID</con:name>
          <con:value/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="34355ad6-e834-45cf-9ca0-aea649e68d00" keepSession="false" maxResults="0" name="Retrieve with no results" searchProperties="true">
      <con:settings/>
      <con:testStep name="Clear Correlation Table" type="groovy" id="81835537-eeed-4f79-9a37-a0630978c78f">
        <con:settings/>
        <con:config>
          <script>context.withSql("PatientCorrelationDB") { sql ->
  def table = context.findProperty("PatientCorrelationTable");

  sql.execute("delete from " + table);
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add1" type="transfer" id="d3602106-5425-4702-8002-c9ba44d8b70d">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID1</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add1</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add1" type="request" id="46af5c05-06b4-4008-a7fa-4e81f88187a9">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add1" id="a742fa8f-ad4c-41ed-a112-2ef4808f8671">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with no results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:39Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveWithNoResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="1.1" extension="D123403"/>
                           <urn:id root="2.2" extension="500000000"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="b03a059c-5d3d-440a-953b-55bc2aa72998"/>
            <con:assertion type="SOAP Fault Assertion" id="961d5c50-6664-43ff-88b6-04d8c1b412fa"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Add2" type="transfer" id="8e20a1bc-b5c9-4241-894b-22d9b91f9f40">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteSubjectID</con:name>
            <con:sourceType>RemoteSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:controlActProcess[1]/urn:subject[1]/urn:registrationEvent[1]/urn:subject1[1]/urn:patient[1]/urn:id[2]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityID</con:name>
            <con:sourceType>LocalAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityID</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Add2</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201301UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Add2" type="request" id="bd11ee05-44ab-4f22-b53c-bd5ade31d3d3">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>AddPatientCorrelation</con:operation>
          <con:request name="Add2" id="81e81da9-8b7f-4eee-a5a5-2c3371faac54">
            <con:settings/>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with no results">
      <urn:AddPatientCorrelationRequest>
         <urn:PRPA_IN201301UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="22a0f9e0-4454-11dc-a6be-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:39Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201301UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="R"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PatientFeed/RetrieveWithNoResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:subject typeCode="SUBJ">
                  <urn:registrationEvent classCode="REG" moodCode="EVN">
                     <urn:id nullFlavor="NA"/>
                     <urn:statusCode code="active"/>
                     <urn:subject1 typeCode="SBJ">
                        <urn:patient classCode="PAT">
                           <urn:id root="" extension="D123403"/>
                           <urn:id root="2.2" extension="500000001"/>
                           <urn:statusCode code="active"/>
                        </urn:patient>
                     </urn:subject1>
                  </urn:registrationEvent>
               </urn:subject>
            </urn:controlActProcess>
         </urn:PRPA_IN201301UV02>
      </urn:AddPatientCorrelationRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="d48f1da8-4ac4-4d9c-a34a-81604b9c0eaa"/>
            <con:assertion type="SOAP Fault Assertion" id="763eb908-3188-4138-baa6-d7d0c9f2e232"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Populate Retrieve" type="transfer" id="31f960f9-ce6a-4d13-9699-6951e8d9dc71">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>SubjectIdentifier</con:name>
            <con:sourceType>RemoteSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>AssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:patientIdentifier[1]/urn:value[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>CreationTime</con:name>
            <con:sourceType>startDate</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:creationTime[1]/@value</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>LocalAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>RemoteAssigningAuthorityIdentifier</con:name>
            <con:sourceType>RemoteAAID</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:sourcePath xsi:nil="true"/>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:sender[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QueryAssigningAuthorityIdentifier</con:name>
            <con:sourceType>LocalAAID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@root</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
          <con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
            <con:name>QuerySubjectIdentifier</con:name>
            <con:sourceType>LocalSubjectID2</con:sourceType>
            <con:sourceStep>#TestCase#</con:sourceStep>
            <con:targetType>Request</con:targetType>
            <con:targetStep>Retrieve</con:targetStep>
            <con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:PRPA_IN201309UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:queryId[1]/@extension</con:targetPath>
            <con:upgraded>true</con:upgraded>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep name="Retrieve" type="request" id="595d1def-9350-4288-9f1a-b4f81987d79c">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>PatientCorrelationBinding</con:interface>
          <con:operation>RetrievePatientCorrelations</con:operation>
          <con:request name="Retrieve" id="6f7f3e7b-8d2b-4512-af6c-0c5cb882c5ab">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#PatientCorrelationEndpoint}</con:endpoint>
            <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientCorrelation" testCase="Retrieve with no results">
      <urn:RetrievePatientCorrelationsRequest>
         <urn:PRPA_IN201309UV02 nullFlavor="?" ITSVersion="XML_1.0">
            <urn:id root="2220c1c4-87ef-11dc-b865-3603d6866807"/>
            <urn:creationTime value="2014-04-01T20:08:39Z"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201309UV02"/>
            <urn:processingCode code="P"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root=""/>
                  <urn:telecom value="https://example.org/PIXQuery/RetrieveWithNoResults"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:code code="PRPA_TE201309UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:assignedDevice xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="" extension=""/>
                  <urn:statusCode code="new"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:patientIdentifier>
                        <urn:value root="2.2" extension="500000001"/>
                        <urn:semanticsText>Patient.Id</urn:semanticsText>
                     </urn:patientIdentifier>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201309UV02>
      </urn:RetrievePatientCorrelationsRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="2dccf366-a37e-4ba0-951d-b24b664108fd"/>
            <con:assertion type="SOAP Fault Assertion" id="34f0c9d9-e61b-4110-a9ed-62216c228286"/>
            <con:assertion name="ParamListRemotePatientIDExtension" type="XPath Match" id="ab59d379-9eec-4932-a768-3b7de38d0be6">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@extension</path>
                <content>500000001</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="ParamListRemotePatientIDRoot" type="XPath Match" id="9700a79f-220b-42c4-b45c-8feb80938e84">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:queryByParameter[1]/ns3:parameterList[1]/ns3:patientIdentifier[1]/ns3:value[1]/@root</path>
                <content>2.2</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" id="9b1370bb-454a-4f54-b2f7-fe630170a6d3">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
//ns3:RetrievePatientCorrelationsResponse[1]/ns3:PRPA_IN201310UV02[1]/ns3:controlActProcess[1]/ns3:subject[1]/ns3:registrationEvent[1]/ns3:subject1[1]/ns3:patient[1]/ns3:patientPerson[1]/ns3:name[1]/@nullFlavor</path>
                <content>NA</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
     <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty("GatewayPropDir"), log);</con:setupScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2014-04-01T20:08:39Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2014-04-01T20:18:39Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>04/01/2014 20:08:39</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2014-05-01T00:00:00Z</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID1</con:name>
          <con:value>500000000</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteSubjectID2</con:name>
          <con:value>500000001</con:value>
        </con:property>
        <con:property>
          <con:name>RemoteAAID</con:name>
          <con:value>2.2</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID1</con:name>
          <con:value>D123401</con:value>
        </con:property>
        <con:property>
          <con:name>LocalSubjectID2</con:name>
          <con:value/>
        </con:property>
        <con:property>
          <con:name>LocalAAID1</con:name>
          <con:value>1.1</con:value>
        </con:property>
        <con:property>
          <con:name>LocalAAID2</con:name>
          <con:value/>
        </con:property>
      </con:properties>
      <con:reportParameters/>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty("GatewayPropDir"), log);</con:tearDownScript>
    </con:testCase>
    <con:properties>
      <con:property>
        <con:name>PatientCorrelationEndpoint</con:name>
        <con:value>http://localhost:8080/CONNECTGateway/GatewayService/PatientCorrelationServiceUnsecured</con:value>
      </con:property>
      <con:property>
        <con:name>DBHost</con:name>
        <con:value>localhost</con:value>
      </con:property>
      <con:property>
        <con:name>DBPort</con:name>
        <con:value>3306</con:value>
      </con:property>
      <con:property>
        <con:name>DBUser</con:name>
        <con:value>nhincuser</con:value>
      </con:property>
      <con:property>
        <con:name>DBPass</con:name>
        <con:value>nhincpass</con:value>
      </con:property>
      <con:property>
        <con:name>PatientCorrelationDB</con:name>
        <con:value>patientcorrelationdb</con:value>
      </con:property>
      <con:property>
        <con:name>PatientCorrelationTable</con:name>
        <con:value>correlatedidentifiers</con:value>
      </con:property>
    </con:properties>
    <con:reportParameters/>
  </con:testSuite>
  <con:requirements/>
  <con:properties>
    <con:property>
      <con:name>GatewayConfigurationDirectory</con:name>
      <con:value>C:/Sun/AppServer/domains/domain1/config/nhin</con:value>
    </con:property>
    <con:property>
      <con:name>PatientCorrelationEndpoint</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/GatewayService/PatientCorrelationServiceUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>PatientCorrelationTable</con:name>
      <con:value>correlatedidentifiers</con:value>
    </con:property>
    <con:property>
      <con:name>PatientCorrelationDB</con:name>
      <con:value>patientcorrelationdb</con:value>
    </con:property>
    <con:property>
      <con:name>DBPass</con:name>
      <con:value>nhincpass</con:value>
    </con:property>
    <con:property>
      <con:name>DBHost</con:name>
      <con:value>localhost</con:value>
    </con:property>
    <con:property>
      <con:name>DBUser</con:name>
      <con:value>nhincuser</con:value>
    </con:property>
    <con:property>
      <con:name>DBPort</con:name>
      <con:value>3306</con:value>
    </con:property>
    <con:property>
      <con:name>GatewayPropDir</con:name>
      <con:value/>
    </con:property>
  </con:properties>
  <con:afterLoadScript>def propertiesFile = new File(new File(project.path).parent, 'PatientCorrelation-soapui-project.properties')
if (propertiesFile.exists()) {
    def props = new Properties()
    props.load(new FileReader(propertiesFile))
    props.each { key, value ->
        project.setPropertyValue(key, value)
    }
}


TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
def testRunListener = [
  afterRun: { testRunner, runContext -> },
  afterStep: { testRunner, runContext, result -> },
  beforeStep: { testRunner, runContext -> },
  beforeStep: { testRunner, runContext, testStep -> },
  beforeRun: { testRunner, runContext ->
    use (org.codehaus.groovy.runtime.TimeCategory) {
      def startDate = 5.minutes.ago
      def endDate = 5.minutes.from.now
      def expireDate = 30.days.from.now

      def df = "yyyy-MM-dd'T'HH:mm:ss'Z'"
      def dfSig = "MM/dd/yyyy' 'HH:mm:ss"

      runContext.testCase.setPropertyValue("startDate", startDate.format(df))
      runContext.testCase.setPropertyValue("endDate", endDate.format(df))
      runContext.testCase.setPropertyValue("sigDate", startDate.format(dfSig))
      runContext.testCase.setPropertyValue("expireDate", expireDate.format(df))
    }
  }
] as com.eviware.soapui.model.testsuite.TestRunListener

project.testSuiteList*.testCaseList.flatten()*.addTestRunListener(testRunListener)



com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.findProperty = { propertyName ->
    return delegate.getProperty(propertyName) ?:
                delegate.testCase.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.project.getPropertyValue(propertyName) ?:
                com.eviware.soapui.SoapUI.globalProperties.getPropertyValue(propertyName)
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.withSql = { dbOrPropertyName, block ->
  def dbName = delegate.findProperty(dbOrPropertyName) ?: dbOrPropertyName
  def host = delegate.findProperty('DBHost')
  def port = delegate.findProperty('DBPort')
  def user = delegate.findProperty('DBUser')
  def pass = delegate.findProperty('DBPass')

  def connectString = "jdbc:mysql://${host}:${port}/${dbName}"
  def sql = groovy.sql.Sql.newInstance(connectString, user, pass, "com.mysql.jdbc.Driver");
  try {
     block(sql)
  } finally {
    sql.close()
  }
}</con:afterLoadScript>
  <con:wssContainer/>
  <con:databaseConnectionContainer/>
  <con:oAuth2ProfileContainer/>
  <con:reporting>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:xmlTemplates/>
    <con:parameters/>
  </con:reporting>
  <con:sensitiveInformation/>
</con:soapui-project>