<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project abortOnError="false" name="Fanout_Test" resourceRoot="${projectDir}" runType="SEQUENTIAL" soapui-version="5.1.2" activeEnvironment="Default" id="04864499-83eb-4d04-8822-8d32765bd47b" xmlns:con="http://eviware.com/soapui/config">
  <con:settings/>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitypatientdiscovery}EntityPatientDiscoveryBindingSoap" definition="../../../target/wsdl/EntityPatientDiscovery.wsdl" name="EntityPatientDiscoveryBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="ff2f20f9-cdb1-4453-a8f6-cab70dcb9273" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/PatientDiscovery/1_0/EntityPatientDiscovery</con:endpoint>
      <con:endpoint>http://localhost:8080/CONNECTGateway/EntityPatientDiscovery</con:endpoint>
      <con:endpoint>https://localhost:${HttpsDefaultPort}/NhinConnect/EntityPatientDiscovery</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:gov:hhs:fha:nhinc:entitypatientdiscovery:RespondingGateway_PRPA_IN201305UV02RequestMessage" anonymous="optional" bindingOperationName="RespondingGateway_PRPA_IN201305UV02" inputName="RespondingGateway_PRPA_IN201305UV02Request" isOneWay="false" name="RespondingGateway_PRPA_IN201305UV02" outputName="RespondingGateway_PRPA_IN201306UV02Response" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="c2821035-568e-4478-8af2-f1da60fc29b8">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitydocquery}EntityDocQueryBindingSoap" definition="../../../target/wsdl/EntityDocQuery.wsdl" name="EntityDocQueryBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="1a4b7102-ce49-4e56-9b81-30765249494a" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:endpoints>
      <con:endpoint>http://172.16.50.54:9080/NhinConnect/EntityDocQuery</con:endpoint>
      <con:endpoint>http://172.16.50.82:9080/NhinConnect/EntityDocQuery</con:endpoint>
      <con:endpoint>http://ATHC-GFAS:9080/NhinConnect/EntityDocQuery</con:endpoint>
      <con:endpoint>http://DVANHIE3.fedsconnect.org:9080/NhinConnect/EntityDocQuery</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Gateway/DocumentQuery/2_0/EntityService/EntityDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/EntityDocQuery</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:gov:hhs:fha:nhinc:entitydocquery:RespondingGateway_CrossGatewayQueryRequest" anonymous="optional" bindingOperationName="RespondingGateway_CrossGatewayQuery" inputName="RespondingGateway_CrossGatewayQueryRequest" isOneWay="false" name="RespondingGateway_CrossGatewayQuery" outputName="RespondingGateway_CrossGatewayQueryResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="99c972eb-4358-42f0-bd58-bfd8a430a11b">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:adapterdocquery}AdapterDocQueryBindingSoap" definition="../../../target/wsdl/AdapterDocQuery.wsdl" name="AdapterDocQueryBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="1a1014d4-9362-463d-9735-30ad60c65798" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:endpoints>
      <con:endpoint>http://localhost:${HttpDefaultPort}/Adapter/DocumentQuery/A_0/AdapterDocQueryUnsecured</con:endpoint>
      <con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/AdapterDocQuery</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:RespondingGateway_CrossGatewayQuery" anonymous="optional" bindingOperationName="RespondingGateway_CrossGatewayQuery" inputName="RespondingGateway_CrossGatewayQueryRequest" isOneWay="false" name="RespondingGateway_CrossGatewayQuery" outputName="RespondingGateway_CrossGatewayQueryResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="4accda4c-fe6d-4dc1-b3ee-144483f73a02">
      <con:settings/>
      <con:call name="XDSRegistryError" id="f687704f-53f7-4a73-a5de-21e46a543d6b">
        <con:settings/>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://localhost:7784/MockDQResp</con:endpoint>
        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonadapter" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body>
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest>
            <urn1:ResponseOption/>
            <urn2:AdhocQuery id="?"/>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address>
               <urn3:addressType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:addressType>
               <urn3:city>?</urn3:city>
               <urn3:country>?</urn3:country>
               <urn3:state>?</urn3:state>
               <urn3:streetAddress>?</urn3:streetAddress>
               <urn3:zipCode>?</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth>?</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature>?</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature>?</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature>?</urn3:haveSignature>
            <urn3:haveWitnessSignature>?</urn3:haveWitnessSignature>
            <urn3:homeCommunity>
               <urn3:description>?</urn3:description>
               <urn3:homeCommunityId>?</urn3:homeCommunityId>
               <urn3:name>?</urn3:name>
            </urn3:homeCommunity>
            <urn3:nationalProviderId>?</urn3:nationalProviderId>
            <urn3:personName>
               <urn3:familyName>?</urn3:familyName>
               <urn3:givenName>?</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>?</urn3:secondNameOrInitials>
               <urn3:fullName>?</urn3:fullName>
               <urn3:prefix>?</urn3:prefix>
               <urn3:suffix>?</urn3:suffix>
            </urn3:personName>
            <urn3:phoneNumber>
               <urn3:areaCode>?</urn3:areaCode>
               <urn3:countryCode>?</urn3:countryCode>
               <urn3:extension>?</urn3:extension>
               <urn3:localNumber>?</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress>
               <urn3:addressType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:addressType>
               <urn3:city>?</urn3:city>
               <urn3:country>?</urn3:country>
               <urn3:state>?</urn3:state>
               <urn3:streetAddress>?</urn3:streetAddress>
               <urn3:zipCode>?</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName>
               <urn3:familyName>?</urn3:familyName>
               <urn3:givenName>?</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>?</urn3:secondNameOrInitials>
               <urn3:fullName>?</urn3:fullName>
               <urn3:prefix>?</urn3:prefix>
               <urn3:suffix>?</urn3:suffix>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone>
               <urn3:areaCode>?</urn3:areaCode>
               <urn3:countryCode>?</urn3:countryCode>
               <urn3:extension>?</urn3:extension>
               <urn3:localNumber>?</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN>?</urn3:SSN>
            <!--1 or more repetitions:-->
            <urn3:uniquePatientId>?</urn3:uniquePatientId>
            <urn3:witnessAddress>
               <urn3:addressType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:addressType>
               <urn3:city>?</urn3:city>
               <urn3:country>?</urn3:country>
               <urn3:state>?</urn3:state>
               <urn3:streetAddress>?</urn3:streetAddress>
               <urn3:zipCode>?</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName>
               <urn3:familyName>?</urn3:familyName>
               <urn3:givenName>?</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>?</urn3:secondNameOrInitials>
               <urn3:fullName>?</urn3:fullName>
               <urn3:prefix>?</urn3:prefix>
               <urn3:suffix>?</urn3:suffix>
            </urn3:witnessName>
            <urn3:witnessPhone>
               <urn3:areaCode>?</urn3:areaCode>
               <urn3:countryCode>?</urn3:countryCode>
               <urn3:extension>?</urn3:extension>
               <urn3:localNumber>?</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>?</urn3:code>
                  <urn3:codeSystem>?</urn3:codeSystem>
                  <urn3:codeSystemName>?</urn3:codeSystemName>
                  <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                  <urn3:displayName>?</urn3:displayName>
                  <urn3:originalText>?</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo>
               <urn3:personName>
                  <urn3:familyName>?</urn3:familyName>
                  <urn3:givenName>?</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>?</urn3:code>
                     <urn3:codeSystem>?</urn3:codeSystem>
                     <urn3:codeSystemName>?</urn3:codeSystemName>
                     <urn3:codeSystemVersion>?</urn3:codeSystemVersion>
                     <urn3:displayName>?</urn3:displayName>
                     <urn3:originalText>?</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>?</urn3:secondNameOrInitials>
                  <urn3:fullName>?</urn3:fullName>
                  <urn3:prefix>?</urn3:prefix>
                  <urn3:suffix>?</urn3:suffix>
               </urn3:personName>
               <urn3:userName>?</urn3:userName>
               <urn3:org>
                  <urn3:description>?</urn3:description>
                  <urn3:homeCommunityId>?</urn3:homeCommunityId>
                  <urn3:name>?</urn3:name>
               </urn3:org>
            </urn3:userInfo>
            <urn3:authorized>?</urn3:authorized>
            <!--1 or more repetitions:-->
            <urn3:relatesToList>?</urn3:relatesToList>
         </urn:assertion>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
        <con:credentials>
          <con:authType>Global HTTP Settings</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryRequest"/>
        <con:wsrmConfig version="1.2"/>
      </con:call>
    </con:operation>
  </con:interface>
  <con:interface anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:adapterpatientdiscovery}AdapterPatientDiscoveryBindingSoap" definition="../../../target/wsdl/AdapterPatientDiscovery.wsdl" name="AdapterPatientDiscoveryBindingSoap" soapVersion="1_1" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface" id="31fcc386-cec6-47f5-99d1-d46026e4705a" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:endpoints>
      <con:endpoint>https://PHX-ONC-WTST21:7785/mockAdapterPD</con:endpoint>
      <con:endpoint>https://localhost:${HttpsDefaultPort}/NhinConnect/AdapterPatientDiscovery</con:endpoint>
    </con:endpoints>
    <con:operation action="urn:RespondingGateway_PRPA_IN201305UV02" anonymous="optional" bindingOperationName="RespondingGateway_PRPA_IN201305UV02" inputName="RespondingGateway_PRPA_IN201305UV02Request" isOneWay="false" name="RespondingGateway_PRPA_IN201305UV02" outputName="RespondingGateway_PRPA_IN201306UV02Response" receivesAttachments="false" sendsAttachments="false" type="Request-Response" id="83040fcb-c7ee-4cff-9490-8bd67888f5b8">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:interface xsi:type="con:WsdlInterface" wsaVersion="NONE" name="AdapterMpiPortTypeBinding" type="wsdl" bindingName="{urn:gov:hhs:fha:nhinc:adaptermpi}AdapterMpiPortTypeBinding" soapVersion="1_2" anonymous="optional" definition="../../../target/wsdl/AdapterMpi.wsdl" id="951fa4e1-18f0-4f12-8ea4-28f808837100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    <con:endpoints>
      <con:endpoint>http://localhost:${DefaultHttpPort}/Adapter/PatientDiscovery/A_0/AdapterMpiService</con:endpoint>
    </con:endpoints>
    <con:operation isOneWay="false" action="FindCandidates" name="FindCandidates" bindingOperationName="FindCandidates" type="Request-Response" outputName="FindCandidatesResponse" inputName="FindCandidatesRequest" receivesAttachments="false" sendsAttachments="false" id="1528fc6e-eae5-47fb-af2d-9efd3f46b95e">
      <con:settings/>
    </con:operation>
  </con:interface>
  <con:testSuite name="Fanout_Test" id="b2466af6-cee8-490b-9aa1-4ad6a3654ea9">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="2360032f-7112-4f06-bb4f-f7c5f979bb94" keepSession="false" maxResults="0" name="PD warmup" searchProperties="true">
      <con:settings/>
      <con:testStep name="Clear correlations and AA mapping tables" type="groovy" id="44673158-c0a6-477a-840d-30f7a22ce655">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('PatientCorrelationTable'))
}

context.withSql('AAMappingDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('AAMappingTable'))
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery" type="request" id="fc6734c5-38c8-4339-9fbf-022971da5c4d">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
          <con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
          <con:request name="Patient Discovery" id="08df6b88-24ae-4d0d-bf4b-792dc2e4ecc6">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-PatientDiscovery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#LocalHCID}" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#SubjectID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>${#Project#City}</urn1:city>
               <urn1:country>${#Project#Country}</urn1:country>
               <urn1:state>${#Project#State}</urn1:state>
               <urn1:streetAddress>${#Project#StreetAddress}</urn1:streetAddress>
               <urn1:zipCode>${#Project#ZipCode}</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>${#Project#DOB}</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>${#Project#FamilyName}</urn1:familyName>
               <urn1:givenName>${#Project#GivenName}</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#SSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#UniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>1.1.1.1</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>connectopensource.org</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="d7821fe8-e378-431d-a1b7-dce5d3e5438f"/>
            <con:assertion disabled="true" type="Schema Compliance" id="a84e2299-ec8a-4a6c-af43-755c46199e61">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="7752fd02-28a4-4976-9b5e-c9a6fd678f99"/>
            <con:assertion name="Check for existance of [ns3:controlActProcess]" type="XPath Match" id="67337d0b-a356-43c7-acaa-da46af79c4d3">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
exists( //ns3:PRPA_IN201306UV02/ns3:controlActProcess)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Given Name XPath Match" type="XPath Match" id="fdc5458d-bc2e-4589-9c7d-cf1fbad95455">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path>
                <content>${#Project#GivenName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Family Name XPath Match" type="XPath Match" id="76e9d440-3d31-4d31-862e-f4de90df4306">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path>
                <content>${#Project#FamilyName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="Count correlations (1)" type="groovy" id="b4d539f2-89cb-4f19-8e52-f86fc3cff03c">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:43:52Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:53:52Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:43:52</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="cf974f56-db97-4ff9-9d77-392e6d0b589c" keepSession="false" maxResults="0" name="PD no mock" searchProperties="true">
      <con:description>could be one or two correlations based on whether the responding gateway and sending gateway correlate in the same second.</con:description>
      <con:settings/>
      <con:testStep name="Clear correlations and AA mapping tables" type="groovy" id="edc0d2fa-2aed-48d0-aa50-8c01f7e8d84e">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('PatientCorrelationTable'))
}

context.withSql('AAMappingDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('AAMappingTable'))
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="13763081-823c-40af-9f34-15e3d93fe2d0">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="a4edac99-d1c8-48cc-9b04-7afc62644c0f">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def PDURL = "https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscovery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "PatientDiscovery", PDURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery" type="request" id="913415ab-8b0d-4bba-9f9f-93bcf817d3bf">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
          <con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
          <con:request name="Patient Discovery" id="061a971f-7d19-44a8-a633-847415966652">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-PatientDiscovery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#LocalHCID}" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#SubjectID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>${#Project#City}</urn1:city>
               <urn1:country>${#Project#Country}</urn1:country>
               <urn1:state>${#Project#State}</urn1:state>
               <urn1:streetAddress>${#Project#StreetAddress}</urn1:streetAddress>
               <urn1:zipCode>${#Project#ZipCode}</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>${#Project#DOB}</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>${#Project#FamilyName}</urn1:familyName>
               <urn1:givenName>${#Project#GivenName}</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#SSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#UniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>1.1.1.1</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>connectopensource.org</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities/>
         <!--urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities-->
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="ab0e3950-b13e-496f-8969-9c5d05c22540"/>
            <con:assertion disabled="true" type="Schema Compliance" id="00a39ce1-da5f-4b19-948a-d0768cdc4ae2">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="00453e43-7e11-44c6-bab2-3b2b560a2b31"/>
            <con:assertion name="Check for existance of [ns3:controlActProcess]" type="XPath Match" id="760209bf-4b3d-48c8-bb19-9ccf269ab580">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
exists( //ns3:PRPA_IN201306UV02/ns3:controlActProcess)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Given Name XPath Match" type="XPath Match" id="a4255adc-cbc3-44d2-83e4-b3ff0e384ad9">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path>
                <content>${#Project#GivenName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Family Name XPath Match" type="XPath Match" id="e20d19db-d6c3-4b6a-966f-916a4f49ed7b">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path>
                <content>${#Project#FamilyName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Count number of asOtherIDs" id="6f98deee-7181-46f5-a147-f5cb7f156e15">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
count( //ns3:PRPA_IN201306UV02/ns3:controlActProcess/ns3:subject/ns3:registrationEvent/ns3:subject1/ns3:patient/ns3:patientPerson/ns3:asOtherIDs)</path>
                <content>8</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="count correlations" type="groovy" id="d3926153-2509-435b-bb94-4b4907698a71">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  totalRows = sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
  expectedRows = sql.firstRow('select count(*) from ' + 
  	context.findProperty('PatientCorrelationTable') + 
  	' where PatientAssigningAuthorityId = \'' + 
  	context.findProperty('LocalAA') + '\' and PatientId = \'' +
  	context.findProperty('localPatientID') + '\'')[0]
  assert expectedRows == totalRows
}</script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:43:56Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:53:56Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:43:56</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="b4c0e8cc-3d14-4c26-b2ae-a2c7d6372d60" keepSession="false" maxResults="0" name="PD happy path" searchProperties="true">
      <con:description/>
      <con:settings/>
      <con:testStep name="Clear correlations and AA mapping tables" type="groovy" id="1c10253b-a457-4bea-8b2d-d4cc376b2ea7">
        <con:settings/>
        <con:config>
          <script>import nhinc.FileUtils;
context.withSql('PatientCorrelationDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('PatientCorrelationTable'))
}

context.withSql('AAMappingDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('AAMappingTable'))
}

context.withSql('eventdb') { sql -> 
  sql.execute('delete from event')
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="7418438d-553b-4e6e-a5a8-c8fb4a262386">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify internalExchangeInfo" type="groovy" id="eca0fad3-5b1e-4ed4-8a13-f2377966b89e">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def MPIURL = "http://" + mockHost + ":7783/MockMPIResp";

nhinc.FileUtils.createOrUpdateConnection("internalExchangeInfo.xml", destConfigFileLocation, localHCID, "adaptercomponentmpiservice", MPIURL, "LEVEL_a0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="1e6c7672-5cf7-417f-beb2-f62ed863921f">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def PDURL = "https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscovery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "PatientDiscovery", PDURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery" type="request" id="3fc964bb-6140-4879-adfb-ade9be0dd500">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
          <con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
          <con:request name="Patient Discovery" id="93264021-a64a-4551-b083-d2ca6f759d7a">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-PatientDiscovery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#LocalHCID}" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#SubjectID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>${#Project#City}</urn1:city>
               <urn1:country>${#Project#Country}</urn1:country>
               <urn1:state>${#Project#State}</urn1:state>
               <urn1:streetAddress>${#Project#StreetAddress}</urn1:streetAddress>
               <urn1:zipCode>${#Project#ZipCode}</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>${#Project#DOB}</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>${#Project#FamilyName}</urn1:familyName>
               <urn1:givenName>${#Project#GivenName}</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#SSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#UniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>1.1.1.1</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>connectopensource.org</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities/>
         <!--urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities-->
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="63e57cf8-20e6-4bed-81eb-785a7ce88189"/>
            <con:assertion disabled="true" type="Schema Compliance" id="652fcf70-982c-4d29-b4f1-13b4d904476b">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="b0466337-ffa2-4b6b-b34a-a707fe3557a8"/>
            <con:assertion name="Check for existance of [ns3:controlActProcess]" type="XPath Match" id="2592706b-e6ab-4146-8173-f34742bfc95d">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
exists( //ns3:PRPA_IN201306UV02/ns3:controlActProcess)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Given Name XPath Match" type="XPath Match" id="34eda4a4-7bb4-4586-9a23-6bedca60f21b">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path>
                <content>${#Project#GivenName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Family Name XPath Match" type="XPath Match" id="9a41e399-80fd-4b9a-97d9-ed7fdb6ee8a3">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path>
                <content>${#Project#FamilyName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="count events" type="groovy" id="256ffdb7-6418-4895-9053-80a73c9dbf10">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  results = sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
  assert 9 == results
}

context.withSql('eventdb') { sql -> 
  results = sql.firstRow('select count(*) from event')[0]
  assert ((80 &lt;= results) &amp;&amp; (results &lt;= 84))
}</script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockMPI_happy_path").start();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "adaptermpi", "adaptermpiwssecured", "adaptermpiwsunsecured", log);
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "mpi", "mpiwssecured", "mpiwsunsecured", log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockMPI_happy_path").getMockRunner().stop();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "adaptermpi", "adaptermpiwsunsecured", "adaptermpiwssecured", log);
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "mpi", "mpiwsunsecured", "mpiwssecured", log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:44:08Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:54:08Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:44:08</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="78fe48f8-26da-4ea7-a912-93458c56fe57" keepSession="false" maxResults="0" name="PD happy path passthrough" searchProperties="true" disabled="true">
      <con:description/>
      <con:settings/>
      <con:testStep type="manualTestStep" name="PD to passthrough" id="70b4ad74-31f0-46d9-b55d-5664db35e8bc">
        <con:description>Set PD to passthrough, both inbound and outbound</con:description>
        <con:settings/>
        <con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
      </con:testStep>
      <con:testStep name="Modify gateway.properties" type="groovy" id="c17b266d-d927-4fcb-afef-e9a5824eeda8">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "patientDiscoveryPassthrough", "true", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear correlations and AA mapping tables" type="groovy" id="942c36b0-d698-480a-887a-cf7693d44e9c">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('PatientCorrelationTable'))
}

context.withSql('AAMappingDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('AAMappingTable'))
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="79fc6958-6088-4dae-a571-83792deee7a5">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify internalExchangeInfo" type="groovy" id="ddc31590-284c-4579-9a2d-75e73e93c9f2">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");
def adapPDURL = "http://" + mockHost + ":7785/mockPDAdapter";

nhinc.FileUtils.createOrUpdateConnection("internalExchangeInfo.xml", destConfigFileLocation, localHCID, "adapterpatientdiscovery", adapPDURL, "LEVEL_a0", log)</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="c3b058fd-30a4-49a6-a2cb-c7fbfafa01ef">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def PDURL = "https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscovery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "PatientDiscovery", PDURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery" type="request" id="66005733-63eb-472c-bc20-a8fbbe1b521b">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
          <con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
          <con:request name="Patient Discovery" id="73d8091a-8f48-4ac7-91ee-77022d259092">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-PatientDiscovery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#LocalHCID}" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#SubjectID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>${#Project#City}</urn1:city>
               <urn1:country>${#Project#Country}</urn1:country>
               <urn1:state>${#Project#State}</urn1:state>
               <urn1:streetAddress>${#Project#StreetAddress}</urn1:streetAddress>
               <urn1:zipCode>${#Project#ZipCode}</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>${#Project#DOB}</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>${#Project#FamilyName}</urn1:familyName>
               <urn1:givenName>${#Project#GivenName}</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#SSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#UniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>1.1.1.1</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>connectopensource.org</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities/>
         <!--urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities-->
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="59771b4b-afd5-4a7c-9475-1551acf1f42f"/>
            <con:assertion disabled="true" type="Schema Compliance" id="9934decf-0b86-4d81-a989-b6eb39029f40">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="1695bc7c-47d6-4446-b8f5-4abb6a2d5cd8"/>
            <con:assertion name="Check for existance of [ns3:controlActProcess]" type="XPath Match" id="a4abd889-df62-4a70-a260-82aac7ae2d3f">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
exists( //ns3:PRPA_IN201306UV02/ns3:controlActProcess)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Given Name XPath Match" type="XPath Match" id="dee85ae3-2155-43b0-ac73-f1c9f8395673">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path>
                <content>${#Project#GivenName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Family Name XPath Match" type="XPath Match" id="5caefa0f-f0a1-4bd1-b41d-b83da1a1fc18">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path>
                <content>${#Project#FamilyName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="count correlations" type="groovy" id="798e697b-9ebe-4c99-903a-cd29559e40b9">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 8 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockPD_adapter").start();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "PatientDiscoveryProxyConfig.xml", "adapterpatientdiscovery", "adapterpatientdiscoverywssecured", "adapterpatientdiscoverywsunsecured", log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockPD_adapter").getMockRunner().stop();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "PatientDiscoveryProxyConfig.xml", "adapterpatientdiscovery", "adapterpatientdiscoverywsunsecured", "adapterpatientdiscoverywssecured", log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-01-23T20:26:28Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-01-23T20:36:28Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>01/23/2013 20:26:28</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-02-22T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="a7aa2352-3074-4eba-8a33-9cba17ebb7da" keepSession="false" maxResults="0" name="PD all" searchProperties="true">
      <con:description/>
      <con:settings/>
      <con:testStep name="Clear correlations and AA mapping tables" type="groovy" id="7fe0c9e2-4e81-4c1b-9fbd-5338465a2bcc">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('PatientCorrelationTable'))
}

context.withSql('AAMappingDB') { sql -> 
  sql.execute('delete from ' + context.findProperty('AAMappingTable'))
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="87a2063f-2fd8-47c8-b755-aeca1e26f08e">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify internalExchangeInfo" type="groovy" id="08d488c6-1aec-4efd-9285-9159ba172e85">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def MPIURL = "http://" + mockHost + ":7781/MockMPIResp";

nhinc.FileUtils.createOrUpdateConnection("internalExchangeInfo.xml", destConfigFileLocation, localHCID, "adaptercomponentmpiservice", MPIURL, "LEVEL_a0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="311f9aac-62a3-4518-911a-d1bc9c915b12">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def PDURL = "https://localhost:8181/Gateway/PatientDiscovery/1_0/NhinService/NhinPatientDiscovery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "PatientDiscovery", PDURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "PatientDiscovery", PDURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Patient Discovery" type="request" id="3c5ddb67-6a86-46ed-ab31-85d21a0abd27">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
          <con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
          <con:request name="Patient Discovery" id="bc6db0c0-f88a-4a16-9451-fee5aeaf8b34">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-PatientDiscovery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Patient Discovery">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="T"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#RemoteHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.2.345.678.999"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#LocalAA}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="${#Project#LocalHCID}" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#Gender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#BirthTime}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#FamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#GivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#LocalAA}" extension="${#Project#SubjectID}"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>${#Project#City}</urn1:city>
               <urn1:country>${#Project#Country}</urn1:country>
               <urn1:state>${#Project#State}</urn1:state>
               <urn1:streetAddress>${#Project#StreetAddress}</urn1:streetAddress>
               <urn1:zipCode>${#Project#ZipCode}</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>${#Project#DOB}</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>NEEDED</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>true</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>true</urn1:haveSignature>
            <urn1:haveWitnessSignature>true</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCDescription}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>${#Project#FamilyName}</urn1:familyName>
               <urn1:givenName>${#Project#GivenName}</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>FJ</urn1:secondNameOrInitials>
               <urn1:fullName>Joe Smith</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1234</urn1:extension>
               <urn1:localNumber>3456789</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Melbourne</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>123 Johnson Rd</urn1:streetAddress>
               <urn1:zipCode>12345</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Hughes</urn1:familyName>
               <urn1:givenName>Howie</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>HH</urn1:secondNameOrInitials>
               <urn1:fullName>Howie Hughes</urn1:fullName>
               <urn1:prefix>Dr</urn1:prefix>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>123</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>1546</urn1:extension>
               <urn1:localNumber>4567892</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>W</urn1:code>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#SSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#UniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>W</urn1:code>
               </urn1:addressType>
               <urn1:city>Frankfort</urn1:city>
               <urn1:country>US</urn1:country>
               <urn1:state>MN</urn1:state>
               <urn1:streetAddress>432 Jackson St</urn1:streetAddress>
               <urn1:zipCode>65498</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Ugble</urn1:familyName>
               <urn1:givenName>Gary</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>G</urn1:code>
               </urn1:nameType>
               <urn1:secondNameOrInitials>GU</urn1:secondNameOrInitials>
               <urn1:fullName>Gary Ugble</urn1:fullName>
               <urn1:prefix>Mr</urn1:prefix>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>987</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>6549</urn1:extension>
               <urn1:localNumber>2222222</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>H</urn1:code>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Anderson</urn1:familyName>
                  <urn1:givenName>Wilma</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>G</urn1:code>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>WA</urn1:secondNameOrInitials>
                  <urn1:fullName>Wilma Anderson</urn1:fullName>
                  <urn1:prefix>Mrs</urn1:prefix>
               </urn1:personName>
               <urn1:userName>wanderson</urn1:userName>
               <urn1:org>
                  <urn1:description>${#Project#LocalHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#LocalHCDescription}</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>1.1.1.1</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>connectopensource.org</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>TestSaml</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>Claim-Ref-1234</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>Claim-Instance-1</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities/>
         <!--urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>${#Project#RemoteHCDescription}</urn1:description>
                  <urn1:homeCommunityId>${#Project#RemoteHCID}</urn1:homeCommunityId>
                  <urn1:name>${#Project#RemoteHCDescription}</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities-->
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="de34bc63-7434-470e-aa03-5a7e96a0e12e"/>
            <con:assertion type="Schema Compliance" disabled="true" id="b3422711-83d1-43fc-9a3b-5eb9641fbd3b">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="6d09533e-1e15-424d-b1fd-9eca0350ae7f"/>
            <con:assertion name="Check for existance of [ns3:controlActProcess]" type="XPath Match" id="c332cf2e-0c25-4932-948c-ac9b71c00437">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
exists( //ns3:PRPA_IN201306UV02/ns3:controlActProcess)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Given Name XPath Match" type="XPath Match" id="f663d2be-4f0f-431d-b275-485db865c92b">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:given[1]</path>
                <content>${#Project#GivenName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion name="Family Name XPath Match" type="XPath Match" id="e8551f69-9195-42d0-a498-b73dbd8b3df3">
              <con:configuration>
                <path>declare namespace ns1='urn:hl7-org:v3';
//ns1:PRPA_IN201306UV02[1]/ns1:controlActProcess[1]/ns1:subject[1]/ns1:registrationEvent[1]/ns1:subject1[1]/ns1:patient[1]/ns1:patientPerson[1]/ns1:name[1]/ns1:family[1]</path>
                <content>${#Project#FamilyName}</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Count number of asOtherIDs" id="bd2992a6-14b7-4dc8-b7c8-7478e5382249">
              <con:configuration>
                <path>declare namespace ns3='urn:hl7-org:v3';
count( //ns3:PRPA_IN201306UV02/ns3:controlActProcess/ns3:subject/ns3:registrationEvent/ns3:subject1/ns3:patient/ns3:patientPerson/ns3:asOtherIDs)</path>
                <content>4</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep name="count correlations" type="groovy" id="3848d077-e157-4bfb-8e96-807e4904917f">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  assert 4 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}</script>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockMPI_all").start();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "adaptermpi", "adaptermpiwssecured", "adaptermpiwsunsecured", log);
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "mpi", "mpiwssecured", "mpiwsunsecured", log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockMPI_all").getMockRunner().stop();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "adaptermpi", "adaptermpiwsunsecured", "adaptermpiwssecured", log);
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "AdapterMpiConfig.xml", "mpi", "mpiwsunsecured", "mpiwssecured", log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:44:16Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:54:16Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:44:16</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="fab1796e-3ef1-4637-94de-12293f6ce045" keepSession="false" maxResults="0" name="DQ warmup" searchProperties="true">
      <con:settings/>
      <con:testStep name="Modify gateway.properties" type="groovy" id="7767fbe5-6544-4f6b-a3e9-0d8d3a2ee0f6">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "documentQueryQuerySelf", "false", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table &amp; Add Correlation" type="groovy" id="f2ac81a0-b9eb-417c-b249-5c0c2d97ad17">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)

  def localAA = context.findProperty( "LocalAA" )
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "RemoteAA" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (?, ?, ?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remotePatientID, localAA, localPatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy" id="331f498c-c4f9-4a7f-8e62-78c29b5f6a60">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -> 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def insertSql = "insert into " + table + " (assigningauthorityid, homecommunityid) " + 
                   "values (?, ?)"
  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query" type="request" id="057eca92-64ef-4fb0-a420-f8fab79b274e">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query" id="7d378bb5-40ac-4f01-b5d8-0df09a5fe618">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Query">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="LeafClass" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>'${#Project#DQPatientID}^^^&amp;${#Project#LocalAA}&amp;ISO'</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryStatus">
                  <urn2:ValueList>
                     <urn2:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
         <urn2:Slot name="$XDSDocumentEntryClassCode">
            <urn2:ValueList>
                    <urn2:Value>34133-9</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCodeScheme">
                  <urn2:ValueList>
                     <urn2:Value>2.16.840.1.113883.6.1</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerberg</urn3:userName>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>1.1.1.1</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>connectopensource.org</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
         <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#RemoteHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="7a9f7342-ece2-4efd-becd-86d97d3ae88b"/>
            <con:assertion disabled="true" type="Schema Compliance" id="3a6782ca-2886-4937-a573-9bdb246bc038">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="970fc808-47db-497b-8640-33989d4c502c"/>
            <con:assertion name="DocID Match" type="GroovyScriptAssertion" id="b789309c-9c13-4a12-be94-be324bffbde5">
              <con:configuration>
                <scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent );
holder.namespaces["ns1"] = "urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0";
holder.namespaces["ns3"] = "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0";

def documentID = context.findProperty('DQDocID')
def msgDocID = holder["//ns1:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[@identificationScheme='urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab']/@value"];
assert (documentID == msgDocID)</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:44:22Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:54:22Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:44:22</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="94648f94-2016-416c-a170-156933a4b82e" keepSession="false" maxResults="0" name="DQ no mock" searchProperties="true">
      <con:settings/>
      <con:testStep name="Modify gateway.properties" type="groovy" id="4c97f2ad-ac12-4ea3-aca9-543287130abb">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "documentQueryQuerySelf", "false", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table &amp; Add Correlation" type="groovy" id="568421b1-de9c-45de-ae16-0bd6c096c1f7">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)

  def localAA = context.findProperty( "LocalAA" )
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "RemoteAA" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (?, ?, ?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["2.2", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["3.3", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["4.4", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["5.5", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["6.6", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["7.7", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["8.8", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, [localAA, localPatientID, "2.2", remotePatientID])
  sql.executeUpdate(insertSql, [localAA, localPatientID, "3.3", remotePatientID])
  sql.executeUpdate(insertSql, [localAA, localPatientID, "4.4", remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy" id="c448203d-c714-438f-ab4f-73ba147698aa">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -> 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def insertSql = "insert into " + table + " (assigningauthorityid, homecommunityid) " + 
                   "values (?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, ["2.2", "2.2"])
  sql.executeUpdate(insertSql, ["3.3", "3.3"])
  sql.executeUpdate(insertSql, ["4.4", "4.4"])
  sql.executeUpdate(insertSql, ["5.5", "5.5"])
  sql.executeUpdate(insertSql, ["6.6", "6.6"])
  sql.executeUpdate(insertSql, ["7.7", "7.7"])
  sql.executeUpdate(insertSql, ["8.8", "8.8"])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="f6ae7e75-650f-4e99-8430-e1275819d510">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="a0501242-a89d-47b6-9407-b0ef474380ec">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def DQURL = "https://" + mockHost + ":8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "QueryForDocuments", DQURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query fanout" type="request" id="095c5dd7-0dd2-4f17-a198-cd166374f465">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query fanout" id="7715e2fd-1648-4547-9a79-ef224659e795">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Query">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="LeafClass" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>'${#Project#DQPatientID}^^^&amp;${#Project#LocalAA}&amp;ISO'</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryStatus">
                  <urn2:ValueList>
                     <urn2:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCode">
                  <urn2:ValueList>
                     <urn2:Value>34133-9</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCodeScheme">
                  <urn2:ValueList>
                     <urn2:Value>2.16.840.1.113883.6.1</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerberg</urn3:userName>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>1.1.1.1</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>connectopensource.org</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities/>
         <!--urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>2.2</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>3.3</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities-->
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="ee5f2b9b-b638-4e0e-adab-80362c73c6fb"/>
            <con:assertion type="Schema Compliance" id="7a18e957-a071-4d68-806e-57f16e9483bb">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="a0b9c63f-9dea-4b7a-bb8a-d453824d5cc5"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:44:25Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:54:25Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:44:25</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DQ no mock passthrough" searchProperties="true" disabled="true" id="db23086b-1370-4fac-a467-aa3896146b8a">
      <con:settings/>
      <con:testStep type="manualTestStep" name="DQ to passthrough" id="76e407aa-989e-4f25-9fbb-054db682b683">
        <con:description>Set DQ to passthrough, both inbound and outbound</con:description>
        <con:settings/>
        <con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
      </con:testStep>
      <con:testStep name="Modify gateway.properties" type="groovy" id="fb1c7c08-0c8a-446b-a647-778754720900">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "documentQueryQuerySelf", "false", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table &amp; Add Correlation" type="groovy" id="7085ac93-cac0-43ca-befa-9f6d8f186a6a">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)

  def localAA = context.findProperty( "LocalAA" )
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "RemoteAA" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (?, ?, ?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["2.2", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["3.3", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["4.4", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["5.5", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["6.6", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["7.7", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["8.8", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, [localAA, localPatientID, "2.2", remotePatientID])
  sql.executeUpdate(insertSql, [localAA, localPatientID, "3.3", remotePatientID])
  sql.executeUpdate(insertSql, [localAA, localPatientID, "4.4", remotePatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy" id="a8b2f872-fe17-42f4-a9f8-be737b1678d5">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -> 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def insertSql = "insert into " + table + " (assigningauthorityid, homecommunityid) " + 
                   "values (?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, ["2.2", "2.2"])
  sql.executeUpdate(insertSql, ["3.3", "3.3"])
  sql.executeUpdate(insertSql, ["4.4", "4.4"])
  sql.executeUpdate(insertSql, ["5.5", "5.5"])
  sql.executeUpdate(insertSql, ["6.6", "6.6"])
  sql.executeUpdate(insertSql, ["7.7", "7.7"])
  sql.executeUpdate(insertSql, ["8.8", "8.8"])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="6c00a5b4-8120-4efb-be25-c8cb4571e1ee">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="d9590e91-78d4-464a-b7be-618730824866">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def DQURL = "https://" + mockHost + ":8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "QueryForDocuments", DQURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query fanout" type="request" id="fad8fab1-61d7-4067-a504-68e20c95ce84">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query fanout" id="f471dcbc-43ef-4ea7-be2e-a16d4930ff28">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Query">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="LeafClass" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>'${#Project#DQPatientID}^^^&amp;${#Project#LocalAA}&amp;ISO'</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryStatus">
                  <urn2:ValueList>
                     <urn2:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCode">
                  <urn2:ValueList>
                     <urn2:Value>34133-9</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCodeScheme">
                  <urn2:ValueList>
                     <urn2:Value>2.16.840.1.113883.6.1</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerberg</urn3:userName>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>1.1.1.1</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>connectopensource.org</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <!--urn:NhinTargetCommunities/-->
         <urn:NhinTargetCommunities>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>2.2</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
            <urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>3.3</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="44dd1053-6c97-4b98-883e-937898a1651c"/>
            <con:assertion type="Schema Compliance" id="92bed4c4-2a48-40f6-97c6-6bd3c3b586b7">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="67c980fd-3080-4e73-8dd6-49620227296b"/>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:testStep type="manualTestStep" name="Check log" id="104cf105-3f77-41d2-a8f0-941470f4d548">
        <con:description>Check the log for the line:
WARN   PassthroughOutboundDocQuery     Multiple targets in request message in passthrough mode.  Only sending to target HCID: 2.2.  Not sending request to: 3.3.</con:description>
        <con:settings/>
        <con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-01-28T13:41:06Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-01-28T13:51:06Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>01/28/2013 13:41:06</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-02-27T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="e988f772-1136-42da-9211-f4f9cc2d7098" keepSession="false" maxResults="0" name="DQ happy path" searchProperties="true">
      <con:settings/>
      <con:testStep name="Modify gateway.properties" type="groovy" id="15a7c599-7b00-473e-860d-86d4518c7c40">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "documentQueryQuerySelf", "false", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table &amp; Add Correlation" type="groovy" id="5ead257f-8987-43f8-a37b-280f2c00bd0c">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)

  def localAA = context.findProperty( "LocalAA" )
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "RemoteAA" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (?, ?, ?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["2.2", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["3.3", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["4.4", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["5.5", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["6.6", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["7.7", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["8.8", remotePatientID, localAA, localPatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy" id="69737c07-6704-4a3d-89fa-83804c3100bd">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -> 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def insertSql = "insert into " + table + " (assigningauthorityid, homecommunityid) " + 
                   "values (?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, ["2.2", "2.2"])
  sql.executeUpdate(insertSql, ["3.3", "3.3"])
  sql.executeUpdate(insertSql, ["4.4", "4.4"])
  sql.executeUpdate(insertSql, ["5.5", "5.5"])
  sql.executeUpdate(insertSql, ["6.6", "6.6"])
  sql.executeUpdate(insertSql, ["7.7", "7.7"])
  sql.executeUpdate(insertSql, ["8.8", "8.8"])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="99dcd1c5-de2e-4f4a-902b-624468f6bba7">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="b1ce0c1f-15ad-4afb-b46e-efa320b41fcb">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def DQURL = "https://" + mockHost + ":8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "QueryForDocuments", DQURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify internalExchangeInfo" type="groovy" id="0a90b934-f1fd-4e3b-8a8b-4272b8288291">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def AdapterDQURL = "http://" + mockHost + ":7782/MockDQResp";

nhinc.FileUtils.createOrUpdateConnection("internalExchangeInfo.xml", destConfigFileLocation, localHCID, "adapterdocquery", AdapterDQURL, "LEVEL_a0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay" id="d408c79c-ea4b-4d4e-98cf-0bb328245cf0">
        <con:settings/>
        <con:config>
          <delay>30000</delay>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query fanout" type="request" id="045d14b5-5c3f-47bc-b6b4-0d7ef1cec0da">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query fanout" id="a91fd724-0914-45cd-952a-b99b8377a99d">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Query">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="LeafClass" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>'${#Project#DQPatientID}^^^&amp;${#Project#LocalAA}&amp;ISO'</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryStatus">
                  <urn2:ValueList>
                     <urn2:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
         <urn2:Slot name="$XDSDocumentEntryClassCode">
            <urn2:ValueList>
                    <urn2:Value>34133-9</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCodeScheme">
                  <urn2:ValueList>
                     <urn2:Value>2.16.840.1.113883.6.1</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerberg</urn3:userName>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>1.1.1.1</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>connectopensource.org</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
         <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities/>
            <!--urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#RemoteHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities-->
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="1fbea85c-b07f-43ed-8baf-b273ad6e432c"/>
            <con:assertion type="Schema Compliance" id="e036600e-687c-41c7-b13f-510b537fc1ff">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="d1e7c9f8-b463-4f8d-ad57-b2ba1aae0fdc"/>
            <con:assertion name="DocID Match" type="GroovyScriptAssertion" id="9a9cdf6e-8803-4e80-ac4d-fdf5e437bc0e">
              <con:configuration>
                <scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent );
holder.namespaces["ns1"] = "urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0";
holder.namespaces["ns3"] = "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0";

def documentID = context.findProperty('DQDocID')
def msgDocID = holder["//ns1:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject/ns3:ExternalIdentifier[@identificationScheme='urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab']/@value"];
assert (msgDocID.toString().contains(documentID))
assert (msgDocID.toString().contains("1.123401.66666"))
assert (msgDocID.toString().contains("1.123401.44444"))</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockDQ_happy_path").start();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "DocumentQueryProxyConfig.xml", "adapterdocquery", "adapterdocquerywssecured", "adapterdocquerywsunsecured", log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockDQ_happy_path").getMockRunner().stop();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "DocumentQueryProxyConfig.xml", "adapterdocquery", "adapterdocquerywsunsecured", "adapterdocquerywssecured", log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:44:31Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:54:31Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:44:31</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" id="c9b0592a-9f0d-4079-9292-1027fe6f3fd3" keepSession="false" maxResults="0" name="DQ all" searchProperties="true">
      <con:settings/>
      <con:testStep name="Modify gateway.properties" type="groovy" id="af9233e5-6829-492e-b911-724de2afa28f">
        <con:settings/>
        <con:config>
          <script>nhinc.FileUtils.updateProperty(context.findProperty('GatewayPropDir'), "gateway.properties", "documentQueryQuerySelf", "false", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear Correlation Table &amp; Add Correlation" type="groovy" id="c7f3bfb6-40c6-41b4-857f-4b0229d101ae">
        <con:settings/>
        <con:config>
          <script>context.withSql('PatientCorrelationDB') { sql -> 
  def table = context.findProperty('PatientCorrelationTable')
  
  sql.execute('delete from ' + table)

  def localAA = context.findProperty( "LocalAA" )
  def localPatientID = context.findProperty("LocalPatientID")
  def remoteAA = context.findProperty( "RemoteAA" )
  def remotePatientID = context.findProperty("RemotePatientID")
  def insertSql = "insert into " + table + " (PatientAssigningAuthorityId, PatientId, CorrelatedPatientAssignAuthId, CorrelatedPatientId) " + 
                   "values (?, ?, ?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["2.2", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["3.3", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["4.4", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["5.5", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["6.6", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["7.7", remotePatientID, localAA, localPatientID])
  sql.executeUpdate(insertSql, ["8.8", remotePatientID, localAA, localPatientID])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="Clear AA Mapping Table &amp; Add Mapping" type="groovy" id="580bdb23-99f6-49f6-a400-8d4f34fd9b4a">
        <con:settings/>
        <con:config>
          <script>context.withSql('AAMappingDB') { sql -> 
  def table = context.findProperty('AAMappingTable')
  
  sql.execute('delete from ' + table)

  def remoteAA = context.findProperty( "RemoteAA" )
  def remoteHCID = context.findProperty("RemoteHCID")
  def insertSql = "insert into " + table + " (assigningauthorityid, homecommunityid) " + 
                   "values (?, ?)"
//  sql.executeUpdate(insertSql, [remoteAA, remoteHCID])
  sql.executeUpdate(insertSql, ["2.2", "2.2"])
  sql.executeUpdate(insertSql, ["3.3", "3.3"])
  sql.executeUpdate(insertSql, ["4.4", "4.4"])
  sql.executeUpdate(insertSql, ["5.5", "5.5"])
  sql.executeUpdate(insertSql, ["6.6", "6.6"])
  sql.executeUpdate(insertSql, ["7.7", "7.7"])
  sql.executeUpdate(insertSql, ["8.8", "8.8"])
}</script>
        </con:config>
      </con:testStep>
      <con:testStep name="copy exchangeInfo" type="groovy" id="1d676f6f-7678-4292-bd3f-55e16af50aa7">
        <con:settings/>
        <con:config>
          <script>def sourceDir =  context.expand('${projectDir}');
def sourceFile = "exchangeInfo_FANOUT.xml";
def destDir = context.findProperty( "GatewayPropDir" );
def destFile = "exchangeInfo.xml";

nhinc.FileUtils.copyFile(sourceDir, sourceFile, destDir, destFile, log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify exchangeInfo" type="groovy" id="0c394e74-558b-4fa3-a68c-23853e1390ad">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def DQURL = "https://" + mockHost + ":8181/Gateway/DocumentQuery/2_0/NhinService/RespondingGateway_Query_Service/DocQuery";

nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "1.1", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "2.2", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "3.3", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "4.4", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "5.5", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "6.6", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "7.7", "QueryForDocuments", DQURL, "2.0", log);
nhinc.FileUtils.createOrUpdateConnection("exchangeInfo.xml", destConfigFileLocation, "8.8", "QueryForDocuments", DQURL, "2.0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep name="modify internalExchangeInfo" type="groovy" id="6b555dc5-ff47-47f4-a201-563480739d84">
        <con:settings/>
        <con:config>
          <script>def destConfigFileLocation = context.findProperty("GatewayPropDir");
def mockHost = context.findProperty("mockHost");
def localHCID = context.findProperty("LocalHCID");

def AdapterDQURL = "http://" + mockHost + ":7784/MockDQResp";

nhinc.FileUtils.createOrUpdateConnection("internalExchangeInfo.xml", destConfigFileLocation, localHCID, "adapterdocquery", AdapterDQURL, "LEVEL_a0", log);</script>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Delay" id="bae5baf9-e8f0-4787-8bfa-7447b32748f3">
        <con:settings/>
        <con:config>
          <delay>30000</delay>
        </con:config>
      </con:testStep>
      <con:testStep name="Document Query fanout" type="request" id="d8f82fe5-c36c-4588-96a2-7aaaf4669cb1">
        <con:settings/>
        <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:interface>EntityDocQueryBindingSoap</con:interface>
          <con:operation>RespondingGateway_CrossGatewayQuery</con:operation>
          <con:request name="Document Query fanout" id="370e55a0-adcc-484a-b79e-25b05913c225">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>${#Project#Endpoint-DocQuery}</con:endpoint>
            <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:gov:hhs:fha:nhinc:common:nhinccommonentity" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:urn3="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soap:Header/>
   <soap:Body testSuite="Entity_g1" testCase="Document Query">
      <urn:RespondingGateway_CrossGatewayQueryRequest>
         <urn1:AdhocQueryRequest federated="false" startIndex="0" maxResults="-1">
            <urn1:ResponseOption returnType="LeafClass" returnComposedObjects="false"/>
            <urn2:AdhocQuery home="urn:oid:1.1" id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d">
               <urn2:Slot name="$XDSDocumentEntryPatientId">
                  <urn2:ValueList>
                     <urn2:Value>'${#Project#DQPatientID}^^^&amp;${#Project#LocalAA}&amp;ISO'</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryStatus">
                  <urn2:ValueList>
                     <urn2:Value>('urn:oasis:names:tc:ebxml-regrep:StatusType:Approved')</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCode">
                  <urn2:ValueList>
                     <urn2:Value>34133-9</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
               <urn2:Slot name="$XDSDocumentEntryClassCodeScheme">
                  <urn2:ValueList>
                     <urn2:Value>2.16.840.1.113883.6.1</urn2:Value>
                  </urn2:ValueList>
               </urn2:Slot>
            </urn2:AdhocQuery>
         </urn1:AdhocQueryRequest>
         <urn:assertion>
            <urn3:address xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>AddrCity</urn3:city>
               <urn3:country>AddrCountry</urn3:country>
               <urn3:state>AddrState</urn3:state>
               <urn3:streetAddress>AddrStreet</urn3:streetAddress>
               <urn3:zipCode>AddrZip</urn3:zipCode>
            </urn3:address>
            <urn3:dateOfBirth xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">06/04/1959 05:21:00</urn3:dateOfBirth>
            <urn3:explanationNonClaimantSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">Electronic</urn3:explanationNonClaimantSignature>
            <urn3:haveSecondWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSecondWitnessSignature>
            <urn3:haveSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveSignature>
            <urn3:haveWitnessSignature xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">false</urn3:haveWitnessSignature>
            <urn3:homeCommunity xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:description>${#Project#LocalHCDescription}</urn3:description>
               <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
               <urn3:name>${#Project#LocalHCDescription}</urn3:name>
            </urn3:homeCommunity>
            <urn3:personName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sandy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
               <urn3:fullName>Sandy S. Smith</urn3:fullName>
            </urn3:personName>
            <urn3:phoneNumber xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5436</urn3:extension>
               <urn3:localNumber>253-6849</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:phoneNumber>
            <urn3:secondWitnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>AddrCode</urn3:code>
                  <urn3:codeSystem>AddrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>AddrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>AddrCode</urn3:displayName>
                  <urn3:originalText>AddrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Addr2City</urn3:city>
               <urn3:country>Addr2Country</urn3:country>
               <urn3:state>Addr2State</urn3:state>
               <urn3:streetAddress>Addr2Street</urn3:streetAddress>
               <urn3:zipCode>Addr2Zip</urn3:zipCode>
            </urn3:secondWitnessAddress>
            <urn3:secondWitnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Sammy</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>s</urn3:secondNameOrInitials>
               <urn3:fullName>Sammy S. Smith</urn3:fullName>
            </urn3:secondWitnessName>
            <urn3:secondWitnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>5424</urn3:extension>
               <urn3:localNumber>542-6823</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:secondWitnessPhone>
            <urn3:SSN xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">253-98-7546</urn3:SSN>
            <urn3:uniquePatientId xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">500000000^^^&amp;1.1&amp;ISO</urn3:uniquePatientId>
            <urn3:witnessAddress xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:addressType>
                  <urn3:code>addrCode</urn3:code>
                  <urn3:codeSystem>addrCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>addrCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>addrCode</urn3:displayName>
                  <urn3:originalText>addrCode</urn3:originalText>
               </urn3:addressType>
               <urn3:city>Burnell</urn3:city>
               <urn3:country>USA</urn3:country>
               <urn3:state>FL</urn3:state>
               <urn3:streetAddress>825 North</urn3:streetAddress>
               <urn3:zipCode>32184</urn3:zipCode>
            </urn3:witnessAddress>
            <urn3:witnessName xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:familyName>Smith</urn3:familyName>
               <urn3:givenName>Scott</urn3:givenName>
               <urn3:nameType>
                  <urn3:code>nameCode</urn3:code>
                  <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>nameCode</urn3:displayName>
                  <urn3:originalText>nameCode</urn3:originalText>
               </urn3:nameType>
               <urn3:secondNameOrInitials>S.</urn3:secondNameOrInitials>
               <urn3:fullName>Scott S. Smith</urn3:fullName>
            </urn3:witnessName>
            <urn3:witnessPhone xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:areaCode>321</urn3:areaCode>
               <urn3:countryCode>1</urn3:countryCode>
               <urn3:extension>8432</urn3:extension>
               <urn3:localNumber>985-2239</urn3:localNumber>
               <urn3:phoneNumberType>
                  <urn3:code>phoneCode</urn3:code>
                  <urn3:codeSystem>phoneCodeSyst</urn3:codeSystem>
                  <urn3:codeSystemName>phoneCodeSystName</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>phoneCode</urn3:displayName>
                  <urn3:originalText>phoneCode</urn3:originalText>
               </urn3:phoneNumberType>
            </urn3:witnessPhone>
            <urn3:userInfo xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:personName>
                  <urn3:familyName>Skagerberg</urn3:familyName>
                  <urn3:givenName>Karl</urn3:givenName>
                  <urn3:nameType>
                     <urn3:code>nameCode</urn3:code>
                     <urn3:codeSystem>nameCodeSyst</urn3:codeSystem>
                     <urn3:codeSystemName>nameCodeSystName</urn3:codeSystemName>
                     <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                     <urn3:displayName>nameCode</urn3:displayName>
                     <urn3:originalText>nameCode</urn3:originalText>
                  </urn3:nameType>
                  <urn3:secondNameOrInitials>S</urn3:secondNameOrInitials>
                  <urn3:fullName>Kasrl S. Skagerberg</urn3:fullName>
               </urn3:personName>
               <urn3:userName>kskagerberg</urn3:userName>
               <urn3:org>
                  <urn3:description>${#Project#LocalHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#LocalHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#LocalHCDescription}</urn3:name>
               </urn3:org>
               <urn3:roleCoded>
                  <urn3:code>307969004</urn3:code>
                  <urn3:codeSystem>2.16.840.1.113883.6.96</urn3:codeSystem>
                  <urn3:codeSystemName>SNOMED_CT</urn3:codeSystemName>
                  <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
                  <urn3:displayName>Public Health</urn3:displayName>
                  <urn3:originalText>Public Health</urn3:originalText>
               </urn3:roleCoded>
            </urn3:userInfo>
            <urn3:authorized xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">true</urn3:authorized>
            <urn3:purposeOfDisclosureCoded xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:code>PUBLICHEALTH</urn3:code>
               <urn3:codeSystem>2.16.840.1.113883.3.18.7.1</urn3:codeSystem>
               <urn3:codeSystemName>nhin-purpose</urn3:codeSystemName>
               <urn3:codeSystemVersion>1.0</urn3:codeSystemVersion>
               <urn3:displayName>Use or disclosure of Psychotherapy Notes</urn3:displayName>
               <urn3:originalText>Use or disclosure of Psychotherapy Notes</urn3:originalText>
            </urn3:purposeOfDisclosureCoded>
            <urn3:samlAuthnStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:authInstant>2009-04-16T13:15:39Z</urn3:authInstant>
               <urn3:sessionIndex>987</urn3:sessionIndex>
               <urn3:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn3:authContextClassRef>
               <urn3:subjectLocalityAddress>1.1.1.1</urn3:subjectLocalityAddress>
               <urn3:subjectLocalityDNSName>connectopensource.org</urn3:subjectLocalityDNSName>
            </urn3:samlAuthnStatement>
            <urn3:samlAuthzDecisionStatement xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
               <urn3:decision>Permit</urn3:decision>
               <urn3:resource>https://1.1.1.1:8181/SamlReceiveService/SamlProcessWS</urn3:resource>
               <urn3:action>TestSaml</urn3:action>
               <urn3:evidence>
                  <urn3:assertion>
                     <urn3:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn3:id>
                     <urn3:issueInstant>2009-04-16T13:10:39.093Z</urn3:issueInstant>
                     <urn3:version>2.0</urn3:version>
                     <urn3:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn3:issuerFormat>
                     <urn3:issuer>CN=SAML User,OU=connect,O=FHA,L=Melbourne,ST=FL,C=US</urn3:issuer>
                     <urn3:conditions>
                        <urn3:notBefore>2009-04-16T13:10:39.093Z</urn3:notBefore>
                        <urn3:notOnOrAfter>2009-12-31T12:00:00.000Z</urn3:notOnOrAfter>
                     </urn3:conditions>
                     <urn3:accessConsentPolicy>urn:oid:1.2.3.4</urn3:accessConsentPolicy>
                     <urn3:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn3:instanceAccessConsentPolicy>
                  </urn3:assertion>
               </urn3:evidence>
            </urn3:samlAuthzDecisionStatement>
         </urn:assertion>
         <urn:NhinTargetCommunities/>
         <!--urn3:nhinTargetCommunity>
               <urn3:homeCommunity>
                  <urn3:description>${#Project#RemoteHCDescription}</urn3:description>
                  <urn3:homeCommunityId>${#Project#RemoteHCID}</urn3:homeCommunityId>
                  <urn3:name>${#Project#RemoteHCDescription}</urn3:name>
               </urn3:homeCommunity>
            </urn3:nhinTargetCommunity>
         </urn:NhinTargetCommunities-->
      </urn:RespondingGateway_CrossGatewayQueryRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
            <con:assertion type="SOAP Response" id="856ec3e7-f7f3-4df8-a0fa-cda770989d90"/>
            <con:assertion type="Schema Compliance" id="ff0b0ec7-8e94-4267-be61-00299f0b372c">
              <con:configuration/>
            </con:assertion>
            <con:assertion type="SOAP Fault Assertion" id="77e157e0-c831-4081-947c-3f1bf3f1e003"/>
            <con:assertion name="DocID Match" type="GroovyScriptAssertion" id="2a83df7b-4a66-46cc-9e84-bf65f0e749e8">
              <con:configuration>
                <scriptText>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
def holder = groovyUtils.getXmlHolder( messageExchange.responseContent );
holder.namespaces["ns1"] = "urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0";
holder.namespaces["ns3"] = "urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0";

def documentID = context.findProperty('DQDocID')
def msgDocID = holder["//ns1:AdhocQueryResponse[1]/ns3:RegistryObjectList[1]/ns3:ExtrinsicObject[1]/ns3:ExternalIdentifier[@identificationScheme='urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab']/@value"];
assert ('1.123401.44444' == msgDocID)</scriptText>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="RegistryError count" id="b59e2211-6b0d-4b31-af28-b4a1e5452a1f">
              <con:configuration>
                <path>declare namespace ns2='urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0';

count(//ns2:RegistryError)</path>
                <content>5</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="ExtrinsicObject count" id="a7fc995a-00c1-49a8-aca9-6884ee0acaf5">
              <con:configuration>
                <path>declare namespace ns1='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';

count(//ns1:ExtrinsicObject)</path>
                <content>6</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:wsaConfig mustUnderstand="NONE" version="200508"/>
            <con:wsrmConfig version="1.2"/>
          </con:request>
        </con:config>
      </con:testStep>
      <con:setupScript>nhinc.FileUtils.backupConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockDQ_all").start();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "DocumentQueryProxyConfig.xml", "adapterdocquery", "adapterdocquerywssecured", "adapterdocquerywsunsecured", log);</con:setupScript>
      <con:tearDownScript>nhinc.FileUtils.restoreConfiguration(context.findProperty('GatewayPropDir'), log);
testCase.getTestSuite().getProject().getMockServiceByName("mockDQ_all").getMockRunner().stop();
nhinc.FileUtils.updateSpringConfig(context.findProperty('GatewayPropDir'), "DocumentQueryProxyConfig.xml", "adapterdocquery", "adapterdocquerywsunsecured", "adapterdocquerywssecured", log);</con:tearDownScript>
      <con:properties>
        <con:property>
          <con:name>startDate</con:name>
          <con:value>2013-09-05T19:44:37Z</con:value>
        </con:property>
        <con:property>
          <con:name>endDate</con:name>
          <con:value>2013-09-05T19:54:37Z</con:value>
        </con:property>
        <con:property>
          <con:name>sigDate</con:name>
          <con:value>09/05/2013 19:44:37</con:value>
        </con:property>
        <con:property>
          <con:name>expireDate</con:name>
          <con:value>2013-10-05T00:00:00Z</con:value>
        </con:property>
      </con:properties>
      <con:reportParameters/>
    </con:testCase>
    <con:properties/>
    <con:setupScript/>
  </con:testSuite>
  <con:mockService bindToHostOnly="false" docroot="" host="localhost" name="mockMPI_all" path="/MockMPIResp" port="7781" id="7892c1ec-1953-4cc8-ba84-3566fc5c4c49">
    <con:settings>
      <con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting>
    </con:settings>
    <con:mockOperation interface="AdapterMpiPortTypeBinding" name="FindCandidates" operation="FindCandidates" id="07236df9-e75d-4dca-a12c-d834164611d9">
      <con:settings/>
      <con:dispatchStyle>SEQUENCE</con:dispatchStyle>
      <con:defaultResponse>Gallow 1</con:defaultResponse>
      <con:response encoding="UTF-8" name="Gallow 1" id="65c022c0-19d4-4845-b483-bfbddafe7b7c" httpResponseStatus="200">
        <con:settings/>
        <con:script>context.patientid = Math.random()
context.root = Math.random()</con:script>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow1" root="56781"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="MAA" id="4910b5df-9043-4791-a4b1-d7b3c03e4993" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="2dec1e:133c34b2251:-7d95" root="1.1"/>
         <ns3:creationTime value="2011112121319"/>
         <ns3:interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="T"/>
         <ns3:acceptAckCode code="NE"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="DEV">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="2.2"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="DEV">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="1.1"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="CACT">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="EVN" classCode="REG">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="SBJ">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="3456.1" root="1.1.1"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <ns3:name>
                              <ns3:family partType="FAM">Evans</ns3:family>
                              <ns3:given partType="GIV">Daniel</ns3:given>
                              <ns3:given partType="GIV">Peter</ns3:given>
                           </ns3:name>
                           <ns3:telecom value="tel:+1-987-555-9876"/>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="20040315"/>
                           <ns3:addr>
                              <ns3:streetAddressLine>4000 Minor St</ns3:streetAddressLine>
                              <ns3:city>Springfield</ns3:city>
                              <ns3:state>MO</ns3:state>
                              <ns3:postalCode>65801</ns3:postalCode>
                           </ns3:addr>
                           <ns3:asOtherIDs classCode="SD">
                              <ns3:id extension="999123404" root="2.16.840.1.113883.4.1"/>
                              <ns3:scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <ns3:id root="2.16.840.1.113883.4.1"/>
                              </ns3:scopingOrganization>
                           </ns3:asOtherIDs>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <ns3:id root="1.1.1"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="EVN" classCode="CASE">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="CST">
                     <ns3:assignedEntity classCode="ASSIGNED">
                        <ns3:id root="1.1.1"/>
                        <ns3:code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="EVN" classCode="REG">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="SBJ">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="3456.2" root="1.1.2"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <ns3:name>
                              <ns3:family partType="FAM">Evans</ns3:family>
                              <ns3:given partType="GIV">Daniel</ns3:given>
                              <ns3:given partType="GIV">Peter</ns3:given>
                           </ns3:name>
                           <ns3:telecom value="tel:+1-987-555-9876"/>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="20040315"/>
                           <ns3:addr>
                              <ns3:streetAddressLine>4000 Minor St</ns3:streetAddressLine>
                              <ns3:city>Springfield</ns3:city>
                              <ns3:state>MO</ns3:state>
                              <ns3:postalCode>65801</ns3:postalCode>
                           </ns3:addr>
                           <ns3:asOtherIDs classCode="SD">
                              <ns3:id extension="999123404" root="2.16.840.1.113883.4.1"/>
                              <ns3:scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <ns3:id root="2.16.840.1.113883.4.1"/>
                              </ns3:scopingOrganization>
                           </ns3:asOtherIDs>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <ns3:id root="1.1.2"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="EVN" classCode="CASE">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="CST">
                     <ns3:assignedEntity classCode="ASSIGNED">
                        <ns3:id root="1.1.2"/>
                        <ns3:code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <ns3:queryResponseCode code="OK"/>
            </ns3:queryAck>
            <ns3:queryByParameter>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <ns3:statusCode code="new"/>
               <ns3:responseModalityCode code="R"/>
               <ns3:responsePriorityCode code="I"/>
               <ns3:parameterList>
                  <ns3:livingSubjectAdministrativeGender>
                     <ns3:value code="M"/>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectAdministrativeGender>
                  <ns3:livingSubjectBirthTime>
                     <ns3:value value="20040315"/>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectBirthTime>
                  <ns3:livingSubjectId>
                     <ns3:value extension="1111" root="2.2"/>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectId>
                  <ns3:livingSubjectName>
                     <ns3:value>
                        <ns3:family partType="FAM">Evans</ns3:family>
                        <ns3:given partType="GIV">Daniel</ns3:given>
                     </ns3:value>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectName>
               </ns3:parameterList>
            </ns3:queryByParameter>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Bad Response" id="b82c3e84-5d7a-45c2-a50c-ec7e2ad13b7d" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent>this is a bad response</con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="ResponderBusy" id="b61f698a-9e1c-4e6c-82ae-9b98260a9e7f" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               
            </subject>
	<detectedIssueEvent classCode="ALRT" moodCode="EVN">
		<code code="ActAdministrativeDetectedIssueCode" codeSystem="2.16.840.1.113883.5.4"/>
		<mitigatedBy typeCode="MITGT">
          		<detectedIssueManagement classCode="ACT" moodCode="EVN">
				<code code="ResponderBusy" codeSystem="1.3.6.1.4.1.19376.1.2.27.3"/>
			</detectedIssueManagement>
		</mitigatedBy>
	</detectedIssueEvent>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="QE"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="AnswerNotAvailable" id="a1e8d887-eb9f-4381-8e5b-bcb7cef7dbdc" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               
            </subject>
	<detectedIssueEvent classCode="ALRT" moodCode="EVN">
		<code code="ActAdministrativeDetectedIssueCode" codeSystem="2.16.840.1.113883.5.4"/>
		<mitigatedBy typeCode="MITGT">
          		<detectedIssueManagement classCode="ACT" moodCode="EVN">
				<code code="AnswerNotAvailable" codeSystem="1.3.6.1.4.1.19376.1.2.27.3"/>
			</detectedIssueManagement>
		</mitigatedBy>
	</detectedIssueEvent>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="QE"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Soap Fault" id="641f971e-2c6e-4c28-80d8-b1a68d883f6e" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:dsc="http://schemas.microsoft.com/windows/2008/12/wdp/distributedscan/configuration">
   <soap:Header>
      <wsa:Action>http://schemas.xmlsoap.org/ws/2004/08/addressing/fault</wsa:Action>
      <!--Headers excluded for brevity-->
   </soap:Header>
   <soap:Body>
      <soap:Fault>
         <soap:Code>
            <soap:Value>soap:Receiver</soap:Value>
            <soap:Subcode>
               <soap:Value>dsc:ClientErrorJobTokenNotFound</soap:Value>
            </soap:Subcode>
         </soap:Code>
         <soap:Reason>
            <soap:Text xml:lang="en">A PostScan job identified by the 
            specified dsc:JobToken argument could not be found.</soap:Text>
         </soap:Reason>
      </soap:Fault>
   </soap:Body>
</soap:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Soap Fault 2" id="77fe08c8-cab5-480a-94b1-7d96da020f45" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
  <soap:Body>
    <soap:Fault>
      <soap:Code>
        <soap:Value>Server</soap:Value>
      </soap:Code>
      <soap:Reason>
        <!--1 or more repetitions:-->
        <soap:Text xml:lang="en">Missing operation for soapAction [null] and body element [{urn:hl7-org:v3}PRPA_IN201305UV02] with SOAP Version [SOAP 1.2]</soap:Text>
      </soap:Reason>
    </soap:Fault>
  </soap:Body>
</soap:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Gallow 2" id="9da52deb-cac0-430e-ae5c-e8d7e5c4b024" httpResponseStatus="200">
        <con:settings/>
        <con:script>context.patientid = Math.random()
context.root = Math.random()</con:script>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow2" root="56782"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:dispatchConfig xsi:type="con:MockOperationQueryMatchDispatch" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <con:query>
          <con:name>MAA</con:name>
          <con:query>declare namespace ns3='urn:hl7-org:v3';

//ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</con:query>
          <con:match>2.2</con:match>
          <con:response>MAA</con:response>
        </con:query>
        <con:query>
          <con:name>Bad Response</con:name>
          <con:query>declare namespace ns3='urn:hl7-org:v3';

//ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</con:query>
          <con:match>3.3</con:match>
          <con:response>Bad Response</con:response>
        </con:query>
        <con:query>
          <con:name>ResponderBusy</con:name>
          <con:query>declare namespace ns3='urn:hl7-org:v3';

//ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</con:query>
          <con:match>4.4</con:match>
          <con:response>ResponderBusy</con:response>
        </con:query>
        <con:query>
          <con:name>AnswerNotAvailable</con:name>
          <con:query>declare namespace ns3='urn:hl7-org:v3';

//ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</con:query>
          <con:match>5.5</con:match>
          <con:response>AnswerNotAvailable</con:response>
        </con:query>
        <con:query>
          <con:name>Soap Fault</con:name>
          <con:query>declare namespace ns3='urn:hl7-org:v3';

//ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</con:query>
          <con:match>6.6</con:match>
          <con:response>Soap Fault</con:response>
        </con:query>
        <con:query>
          <con:name>Soap Fault 2</con:name>
          <con:query>declare namespace ns3='urn:hl7-org:v3';

//ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</con:query>
          <con:match>7.7</con:match>
          <con:response>Soap Fault 2</con:response>
        </con:query>
      </con:dispatchConfig>
    </con:mockOperation>
    <con:properties/>
  </con:mockService>
  <con:mockService bindToHostOnly="false" docroot="" host="localhost" name="mockDQ_all" path="/MockDQResp" port="7784" id="c8934894-332e-47ba-83db-824c6dd7f092">
    <con:settings>
      <con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting>
    </con:settings>
    <con:mockOperation interface="AdapterDocQueryBindingSoap" name="RespondingGateway_CrossGatewayQuery" operation="RespondingGateway_CrossGatewayQuery" id="55a64734-9ebd-4a7e-a269-a68d5bc5fb34">
      <con:settings/>
      <con:dispatchStyle>QUERY_MATCH</con:dispatchStyle>
      <con:defaultResponse>correct doc</con:defaultResponse>
      <con:response encoding="UTF-8" name="correct doc" id="5e0fb015-7f2b-41b5-8054-f1263cca1ee4" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns8:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="urn:hl7-org:v3" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns5="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns7="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns8="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns9="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
         <ns6:RegistryObjectList>
            <ns6:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d">
               <ns6:Slot name="creationTime">
                  <ns6:ValueList>
                     <ns6:Value>20080617124906</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="hash">
                  <ns6:ValueList>
                     <ns6:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="intendedRecipient">
                  <ns6:ValueList>
                     <ns6:Value>Scott Borst</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="languageCode">
                  <ns6:ValueList>
                     <ns6:Value>en-US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="legalAuthenticator">
                  <ns6:ValueList>
                     <ns6:Value>legal</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStartTime">
                  <ns6:ValueList>
                     <ns6:Value>19990320050000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStopTime">
                  <ns6:ValueList>
                     <ns6:Value>20080101050000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="size">
                  <ns6:ValueList>
                     <ns6:Value>30845</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientId">
                  <ns6:ValueList>
                     <ns6:Value>D123401^^^&amp;2.2&amp;ISO</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientInfo">
                  <ns6:ValueList>
                     <ns6:Value>PID-3|pid1^^^domain</ns6:Value>
                     <ns6:Value>PID-5|Younger^Gallow^^^</ns6:Value>
                     <ns6:Value>PID-7|19990627</ns6:Value>
                     <ns6:Value>PID-8|M</ns6:Value>
                     <ns6:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="URI">
                  <ns6:ValueList>
                     <ns6:Value>1.123401.11111</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="repositoryUniqueId">
                  <ns6:ValueList>
                     <ns6:Value>1</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Name>
                  <ns6:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns6:Name>
               <ns6:Description>
                  <ns6:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns6:Description>
               <ns6:Classification nodeRepresentation="" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns6:Slot name="authorPerson">
                     <ns6:ValueList>
                        <ns6:Value>Dr. Joseph Hoodwink</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorInstitution">
                     <ns6:ValueList>
                        <ns6:Value>Main Children's Hospital</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorRole">
                     <ns6:ValueList>
                        <ns6:Value>Primary Care Provider</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorSpecialty">
                     <ns6:ValueList>
                        <ns6:Value>Pediatrician</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>2.16.840.1.113883.6.1</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Summarization of Episode Note"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>Confidential</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Confidential"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>formatCodeScheme_value</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>UTF-8</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="UTF-8"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:ExternalIdentifier value="1.123401.44444" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
               <ns6:ExternalIdentifier value="D123401^^^&amp;2.2&amp;ISO" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
            </ns6:ExtrinsicObject>
            <ns6:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f">
               <ns6:Slot name="creationTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627174924</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="hash">
                  <ns6:ValueList>
                     <ns6:Value>ac0eec55d17eaa9c24054f8a7ecc5d3caa45d9f0</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="intendedRecipient">
                  <ns6:ValueList>
                     <ns6:Value>Scott Borst</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="languageCode">
                  <ns6:ValueList>
                     <ns6:Value>en-US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="legalAuthenticator">
                  <ns6:ValueList>
                     <ns6:Value>legal</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStartTime">
                  <ns6:ValueList>
                     <ns6:Value>20070911040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStopTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="size">
                  <ns6:ValueList>
                     <ns6:Value>26934</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientId">
                  <ns6:ValueList>
                     <ns6:Value>D123402^^^&amp;1.1&amp;ISO</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientInfo">
                  <ns6:ValueList>
                     <ns6:Value>PID-3|pid1^^^domain</ns6:Value>
                     <ns6:Value>PID-5|Schnur^Anna^^^</ns6:Value>
                     <ns6:Value>PID-7|19560813</ns6:Value>
                     <ns6:Value>PID-8|F</ns6:Value>
                     <ns6:Value>PID-11|312 HILL ROAD^^HILLSBORO^MO^37660^US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="URI">
                  <ns6:ValueList>
                     <ns6:Value>1.123402.11111</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="repositoryUniqueId">
                  <ns6:ValueList>
                     <ns6:Value>1</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Name>
                  <ns6:LocalizedString value="Schnur CONNECT TESTGATEWAY Document 1"/>
               </ns6:Name>
               <ns6:Description>
                  <ns6:LocalizedString value="Document 1 Schnur CONNECT TESTGATEWAY comments"/>
               </ns6:Description>
               <ns6:Classification nodeRepresentation="" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns6:Slot name="authorPerson">
                     <ns6:ValueList>
                        <ns6:Value>Axolotl Elysium</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorInstitution">
                     <ns6:ValueList>
                        <ns6:Value>Test Two Workgroup</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorRole">
                     <ns6:ValueList>
                        <ns6:Value>Primary Care Provider</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorSpecialty">
                     <ns6:ValueList>
                        <ns6:Value>General</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>2.16.840.1.113883.6.1</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Summarization of Episode Note"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>Confidential</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Confidential"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>formatCodeScheme_value</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>UTF-8</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="UTF-8"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:ExternalIdentifier value="1.123401.55555" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
               <ns6:ExternalIdentifier value="D123401^^^&amp;2.2&amp;ISO" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
            </ns6:ExtrinsicObject>
            <ns6:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31">
               <ns6:Slot name="creationTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627174924</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="hash">
                  <ns6:ValueList>
                     <ns6:Value>ac0eec55d17eaa9c24054f8a7ecc5d3caa45d9f0</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="intendedRecipient">
                  <ns6:ValueList>
                     <ns6:Value>Scott Borst</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="languageCode">
                  <ns6:ValueList>
                     <ns6:Value>en-US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="legalAuthenticator">
                  <ns6:ValueList>
                     <ns6:Value>legal</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStartTime">
                  <ns6:ValueList>
                     <ns6:Value>20070911040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStopTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="size">
                  <ns6:ValueList>
                     <ns6:Value>26934</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientId">
                  <ns6:ValueList>
                     <ns6:Value>D123402^^^&amp;1.1&amp;ISO</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientInfo">
                  <ns6:ValueList>
                     <ns6:Value>PID-3|pid1^^^domain</ns6:Value>
                     <ns6:Value>PID-5|Schnur^Anna^^^</ns6:Value>
                     <ns6:Value>PID-7|19560813</ns6:Value>
                     <ns6:Value>PID-8|F</ns6:Value>
                     <ns6:Value>PID-11|312 HILL ROAD^^HILLSBORO^MO^37660^US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="URI">
                  <ns6:ValueList>
                     <ns6:Value>1.123402.11111</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="repositoryUniqueId">
                  <ns6:ValueList>
                     <ns6:Value>1</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Name>
                  <ns6:LocalizedString value="Schnur CONNECT TESTGATEWAY Document 1"/>
               </ns6:Name>
               <ns6:Description>
                  <ns6:LocalizedString value="Document 1 Schnur CONNECT TESTGATEWAY comments"/>
               </ns6:Description>
               <ns6:Classification nodeRepresentation="" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns6:Slot name="authorPerson">
                     <ns6:ValueList>
                        <ns6:Value>Axolotl Elysium</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorInstitution">
                     <ns6:ValueList>
                        <ns6:Value>Test Two Workgroup</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorRole">
                     <ns6:ValueList>
                        <ns6:Value>Primary Care Provider</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorSpecialty">
                     <ns6:ValueList>
                        <ns6:Value>General</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>2.16.840.1.113883.6.1</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Summarization of Episode Note"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>Confidential</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Confidential"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>formatCodeScheme_value</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>UTF-8</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="UTF-8"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:ExternalIdentifier value="1.123401.66666" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
               <ns6:ExternalIdentifier value="D123401^^^&amp;2.2&amp;ISO" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
            </ns6:ExtrinsicObject>
         </ns6:RegistryObjectList>
      </ns8:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Soap Fault" id="e563e2de-b0ef-4599-be49-a6c60ec54c7d" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:dsc="http://schemas.microsoft.com/windows/2008/12/wdp/distributedscan/configuration">
   <soap:Header>
      <wsa:Action>http://schemas.xmlsoap.org/ws/2004/08/addressing/fault</wsa:Action>
      <!--Headers excluded for brevity-->
   </soap:Header>
   <soap:Body>
      <soap:Fault>
         <soap:Code>
            <soap:Value>soap:Receiver</soap:Value>
            <soap:Subcode>
               <soap:Value>dsc:ClientErrorJobTokenNotFound</soap:Value>
            </soap:Subcode>
         </soap:Code>
         <soap:Reason>
            <soap:Text xml:lang="en">A PostScan job identified by the 
            specified dsc:JobToken argument could not be found.</soap:Text>
         </soap:Reason>
      </soap:Fault>
   </soap:Body>
</soap:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Soap Fault 2" id="3a3946de-1176-4362-9b7e-18ef2ebbe3e8" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
  <soap:Body>
    <soap:Fault>
      <soap:Code>
        <soap:Value>Server</soap:Value>
      </soap:Code>
      <soap:Reason>
        <!--1 or more repetitions:-->
        <soap:Text xml:lang="en">Missing operation for soapAction [null] and body element [{urn:hl7-org:v3}PRPA_IN201305UV02] with SOAP Version [SOAP 1.2]</soap:Text>
      </soap:Reason>
    </soap:Fault>
  </soap:Body>
</soap:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response name="XDSStoredQueryParamNumber error" encoding="UTF-8" id="4719f12b-a4bf-4792-b157-95789e780c76" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soap:Header/>
   <soap:Body>
      <urn:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure">
         <urn1:RegistryErrorList>
            <urn1:RegistryError codeContext="A parameter which only accepts a single value is coded with multiple values" errorCode="XDSStoredQueryParamNumber" severity="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error" location="com.vangent.hieos.services.xds.registry.transactions.AdhocQueryRequest"/>
         </urn1:RegistryErrorList>
         <urn2:RegistryObjectList></urn2:RegistryObjectList>
      </urn:AdhocQueryResponse>
   </soap:Body>
</soap:Envelope>]]></con:responseContent>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryResponse"/>
      </con:response>
      <con:response name="XDSRegistryError error" encoding="UTF-8" id="5388762b-8902-452f-924f-7d0f8d4b5440" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soap:Header/>
   <soap:Body>
      <urn:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure">
         <urn1:RegistryErrorList>
            <urn1:RegistryError codeContext="A parameter which only accepts a single value is coded with multiple values" errorCode="XDSRegistryError" severity="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error" location="com.vangent.hieos.services.xds.registry.transactions.AdhocQueryRequest"/>
         </urn1:RegistryErrorList>
         <urn2:RegistryObjectList></urn2:RegistryObjectList>
      </urn:AdhocQueryResponse>
   </soap:Body>
</soap:Envelope>]]></con:responseContent>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryResponse"/>
      </con:response>
      <con:response name="XDSStoredQueryMissingParam error" encoding="UTF-8" id="31a51304-6388-4e17-8ca1-922205e4d7a8" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:urn1="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:urn2="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
   <soap:Header/>
   <soap:Body>
      <urn:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Failure">
         <urn1:RegistryErrorList>
            <urn1:RegistryError codeContext="A parameter which only accepts a single value is coded with multiple values" errorCode="XDSStoredQueryMissingParam" severity="urn:oasis:names:tc:ebxml-regrep:ErrorSeverityType:Error" location="com.vangent.hieos.services.xds.registry.transactions.AdhocQueryRequest"/>
         </urn1:RegistryErrorList>
         <urn2:RegistryObjectList></urn2:RegistryObjectList>
      </urn:AdhocQueryResponse>
   </soap:Body>
</soap:Envelope>]]></con:responseContent>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryResponse"/>
      </con:response>
      <con:dispatchConfig xsi:type="con:MockOperationQueryMatchDispatch" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <con:query>
          <con:name>Soap Fault</con:name>
          <con:query>declare namespace ns='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
//ns:AdhocQuery[1]/ns:Slot/ns:ValueList/ns:Value/text()</con:query>
          <con:match>'D123401^^^&amp;8.8&amp;ISO'</con:match>
          <con:response>Soap Fault</con:response>
        </con:query>
        <con:query>
          <con:name>Soap Fault 2</con:name>
          <con:query>declare namespace ns='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
//ns:AdhocQuery[1]/ns:Slot/ns:ValueList/ns:Value/text()</con:query>
          <con:match>'D123401^^^&amp;4.4&amp;ISO'</con:match>
          <con:response>Soap Fault 2</con:response>
        </con:query>
        <con:query>
          <con:name>XDSStoredQueryParamNumber error</con:name>
          <con:query>declare namespace ns='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
//ns:AdhocQuery[1]/ns:Slot/ns:ValueList/ns:Value/text()</con:query>
          <con:match>'D123401^^^&amp;5.5&amp;ISO'</con:match>
          <con:response>XDSStoredQueryParamNumber error</con:response>
        </con:query>
        <con:query>
          <con:name>XDSRegistryError error</con:name>
          <con:query>declare namespace ns='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
//ns:AdhocQuery[1]/ns:Slot/ns:ValueList/ns:Value/text()</con:query>
          <con:match>'D123401^^^&amp;2.2&amp;ISO'</con:match>
          <con:response>XDSRegistryError error</con:response>
        </con:query>
        <con:query>
          <con:name>XDSStoredQueryMissingParam error</con:name>
          <con:query>declare namespace ns='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
//ns:AdhocQuery[1]/ns:Slot/ns:ValueList/ns:Value/text()</con:query>
          <con:match>'D123401^^^&amp;6.6&amp;ISO'</con:match>
          <con:response>XDSStoredQueryMissingParam error</con:response>
        </con:query>
        <con:query>
          <con:name>correct doc</con:name>
          <con:query>declare namespace ns='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0';
//ns:AdhocQuery[1]/ns:Slot/ns:ValueList/ns:Value/text()</con:query>
          <con:match>'D123401^^^&amp;7.7&amp;ISO'</con:match>
          <con:response>correct doc</con:response>
        </con:query>
      </con:dispatchConfig>
    </con:mockOperation>
    <con:properties/>
  </con:mockService>
  <con:mockService bindToHostOnly="false" docroot="" host="localhost" name="mockMPI_happy_path" path="/MockMPIResp" port="7783" id="d3ef3864-6183-43dc-b1fa-576e753b0cc7">
    <con:settings>
      <con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting>
    </con:settings>
    <con:mockOperation interface="AdapterMpiPortTypeBinding" name="FindCandidates" operation="FindCandidates" id="db976e37-58f5-449d-9e71-622b76801efd">
      <con:settings/>
      <con:dispatchStyle>SEQUENCE</con:dispatchStyle>
      <con:defaultResponse>Gallow 1</con:defaultResponse>
      <con:response encoding="UTF-8" name="Gallow 1" id="53de696a-0f5f-40cb-86be-2cf275bc0508" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow1" root="56781"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptercomponentmpi/AdapterComponentMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="MAA" id="9d146fbf-c3a7-4f13-ba9f-7e99d2c778a3" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="2dec1e:133c34b2251:-7d95" root="1.1"/>
         <ns3:creationTime value="2011112121319"/>
         <ns3:interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="T"/>
         <ns3:acceptAckCode code="NE"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="DEV">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="2.2"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="DEV">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="1.1"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="CACT">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="EVN" classCode="REG">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="SBJ">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="3456.1" root="1.1.1"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <ns3:name>
                              <ns3:family partType="FAM">Evans</ns3:family>
                              <ns3:given partType="GIV">Daniel</ns3:given>
                              <ns3:given partType="GIV">Peter</ns3:given>
                           </ns3:name>
                           <ns3:telecom value="tel:+1-987-555-9876"/>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="20040315"/>
                           <ns3:addr>
                              <ns3:streetAddressLine>4000 Minor St</ns3:streetAddressLine>
                              <ns3:city>Springfield</ns3:city>
                              <ns3:state>MO</ns3:state>
                              <ns3:postalCode>65801</ns3:postalCode>
                           </ns3:addr>
                           <ns3:asOtherIDs classCode="SD">
                              <ns3:id extension="999123404" root="2.16.840.1.113883.4.1"/>
                              <ns3:scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <ns3:id root="2.16.840.1.113883.4.1"/>
                              </ns3:scopingOrganization>
                           </ns3:asOtherIDs>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <ns3:id root="1.1.1"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="EVN" classCode="CASE">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="CST">
                     <ns3:assignedEntity classCode="ASSIGNED">
                        <ns3:id root="1.1.1"/>
                        <ns3:code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="EVN" classCode="REG">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="SBJ">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="3456.2" root="1.1.2"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <ns3:name>
                              <ns3:family partType="FAM">Evans</ns3:family>
                              <ns3:given partType="GIV">Daniel</ns3:given>
                              <ns3:given partType="GIV">Peter</ns3:given>
                           </ns3:name>
                           <ns3:telecom value="tel:+1-987-555-9876"/>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="20040315"/>
                           <ns3:addr>
                              <ns3:streetAddressLine>4000 Minor St</ns3:streetAddressLine>
                              <ns3:city>Springfield</ns3:city>
                              <ns3:state>MO</ns3:state>
                              <ns3:postalCode>65801</ns3:postalCode>
                           </ns3:addr>
                           <ns3:asOtherIDs classCode="SD">
                              <ns3:id extension="999123404" root="2.16.840.1.113883.4.1"/>
                              <ns3:scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <ns3:id root="2.16.840.1.113883.4.1"/>
                              </ns3:scopingOrganization>
                           </ns3:asOtherIDs>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <ns3:id root="1.1.2"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="EVN" classCode="CASE">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="CST">
                     <ns3:assignedEntity classCode="ASSIGNED">
                        <ns3:id root="1.1.2"/>
                        <ns3:code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <ns3:queryResponseCode code="OK"/>
            </ns3:queryAck>
            <ns3:queryByParameter>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <ns3:statusCode code="new"/>
               <ns3:responseModalityCode code="R"/>
               <ns3:responsePriorityCode code="I"/>
               <ns3:parameterList>
                  <ns3:livingSubjectAdministrativeGender>
                     <ns3:value code="M"/>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectAdministrativeGender>
                  <ns3:livingSubjectBirthTime>
                     <ns3:value value="20040315"/>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectBirthTime>
                  <ns3:livingSubjectId>
                     <ns3:value extension="1111" root="2.2"/>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectId>
                  <ns3:livingSubjectName>
                     <ns3:value>
                        <ns3:family partType="FAM">Evans</ns3:family>
                        <ns3:given partType="GIV">Daniel</ns3:given>
                     </ns3:value>
                     <ns3:semanticsText representation="TXT"/>
                  </ns3:livingSubjectName>
               </ns3:parameterList>
            </ns3:queryByParameter>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Gallow 3" id="afbd7dde-6600-47df-b339-595a68ac58b0" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow3" root="56783"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Gallow 4" id="4ec72425-8bc5-488b-8dfe-bc98d26fbae3" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow4" root="56784"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Gallow 5" id="5f5c652c-3453-4bc1-9e4c-0d8de4055214" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow5" root="56785"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Gallow 6" id="b2b00255-6bb1-4758-b16c-272319e6c7ba" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow6" root="56786"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Gallow 7" id="08c22e6c-dd74-4dd4-92c0-87cf9a7ead19" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow7" root="56787"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response encoding="UTF-8" name="Gallow 8" id="439b9fe9-4c78-4b19-8461-7c4bc04f2b72" httpResponseStatus="200">
        <con:settings/>
        <con:script/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="gallow8" root="56788"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adaptermpi/AdapterMpiPortType/FindCandidatesResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:response name="MAA" id="d1f530cc-1101-45f6-857f-a61673928165" httpResponseStatus="200" encoding="UTF-8">
        <con:settings/>
        <con:responseContent/>
      </con:response>
      <con:response name="MAA" id="a6eeec21-ab79-458c-a4cb-520f016cac16" httpResponseStatus="200" encoding="UTF-8">
        <con:settings/>
        <con:responseContent/>
      </con:response>
      <con:dispatchConfig xsi:type="con:MockOperationQueryMatchDispatch" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <con:query>
          <con:name>MAA</con:name>
          <con:query>declare namespace ns3='urn:hl7-org:v3';

//ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</con:query>
          <con:match>3.3</con:match>
          <con:response>MAA</con:response>
        </con:query>
      </con:dispatchConfig>
    </con:mockOperation>
    <con:properties/>
  </con:mockService>
  <con:mockService bindToHostOnly="false" docroot="" host="localhost" name="mockDQ_happy_path" path="/MockDQResp" port="7782" id="20ecea19-c062-4143-aed7-8a06857009db">
    <con:settings>
      <con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting>
    </con:settings>
    <con:mockOperation interface="AdapterDocQueryBindingSoap" name="RespondingGateway_CrossGatewayQuery" operation="RespondingGateway_CrossGatewayQuery" id="32ac2f82-e460-40ee-9e84-47c0f0f07dba">
      <con:settings/>
      <con:dispatchStyle>SEQUENCE</con:dispatchStyle>
      <con:defaultResponse>correct doc</con:defaultResponse>
      <con:response encoding="UTF-8" name="correct doc" id="8108e206-8dc5-40ff-9669-984ddf5b3904" httpResponseStatus="200">
        <con:settings/>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns8:AdhocQueryResponse status="urn:oasis:names:tc:ebxml-regrep:ResponseStatusType:Success" xmlns:ns2="urn:hl7-org:v3" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns5="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns7="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns8="urn:oasis:names:tc:ebxml-regrep:xsd:query:3.0" xmlns:ns9="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
         <ns6:RegistryObjectList>
            <ns6:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d">
               <ns6:Slot name="creationTime">
                  <ns6:ValueList>
                     <ns6:Value>20080617124906</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="hash">
                  <ns6:ValueList>
                     <ns6:Value>be56ce49a2a021c5c88bd4a3eef617ce5b94e002</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="intendedRecipient">
                  <ns6:ValueList>
                     <ns6:Value>Scott Borst</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="languageCode">
                  <ns6:ValueList>
                     <ns6:Value>en-US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="legalAuthenticator">
                  <ns6:ValueList>
                     <ns6:Value>legal</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStartTime">
                  <ns6:ValueList>
                     <ns6:Value>19990320050000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStopTime">
                  <ns6:ValueList>
                     <ns6:Value>20080101050000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="size">
                  <ns6:ValueList>
                     <ns6:Value>30845</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientId">
                  <ns6:ValueList>
                     <ns6:Value>D123401^^^&amp;2.2&amp;ISO</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientInfo">
                  <ns6:ValueList>
                     <ns6:Value>PID-3|pid1^^^domain</ns6:Value>
                     <ns6:Value>PID-5|Younger^Gallow^^^</ns6:Value>
                     <ns6:Value>PID-7|19990627</ns6:Value>
                     <ns6:Value>PID-8|M</ns6:Value>
                     <ns6:Value>PID-11|1111 Main Street^^Kingsport^TN^37662^US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="URI">
                  <ns6:ValueList>
                     <ns6:Value>1.123401.11111</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="repositoryUniqueId">
                  <ns6:ValueList>
                     <ns6:Value>1</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Name>
                  <ns6:LocalizedString value="Younger CONNECT TESTGATEWAY Document 1"/>
               </ns6:Name>
               <ns6:Description>
                  <ns6:LocalizedString value="Document 1 Younder CONNECT TESTGATEWAY comments"/>
               </ns6:Description>
               <ns6:Classification nodeRepresentation="" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns6:Slot name="authorPerson">
                     <ns6:ValueList>
                        <ns6:Value>Dr. Joseph Hoodwink</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorInstitution">
                     <ns6:ValueList>
                        <ns6:Value>Main Children's Hospital</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorRole">
                     <ns6:ValueList>
                        <ns6:Value>Primary Care Provider</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorSpecialty">
                     <ns6:ValueList>
                        <ns6:Value>Pediatrician</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>2.16.840.1.113883.6.1</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Summarization of Episode Note"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>Confidential</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Confidential"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>formatCodeScheme_value</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>UTF-8</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="UTF-8"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:ExternalIdentifier value="1.123401.44444" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
               <ns6:ExternalIdentifier value="D123401^^^&amp;2.2&amp;ISO" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:d44e754c-36e2-45c6-aafb-ad788fee5f7d" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
            </ns6:ExtrinsicObject>
            <ns6:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f">
               <ns6:Slot name="creationTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627174924</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="hash">
                  <ns6:ValueList>
                     <ns6:Value>ac0eec55d17eaa9c24054f8a7ecc5d3caa45d9f0</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="intendedRecipient">
                  <ns6:ValueList>
                     <ns6:Value>Scott Borst</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="languageCode">
                  <ns6:ValueList>
                     <ns6:Value>en-US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="legalAuthenticator">
                  <ns6:ValueList>
                     <ns6:Value>legal</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStartTime">
                  <ns6:ValueList>
                     <ns6:Value>20070911040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStopTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="size">
                  <ns6:ValueList>
                     <ns6:Value>26934</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientId">
                  <ns6:ValueList>
                     <ns6:Value>D123402^^^&amp;1.1&amp;ISO</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientInfo">
                  <ns6:ValueList>
                     <ns6:Value>PID-3|pid1^^^domain</ns6:Value>
                     <ns6:Value>PID-5|Schnur^Anna^^^</ns6:Value>
                     <ns6:Value>PID-7|19560813</ns6:Value>
                     <ns6:Value>PID-8|F</ns6:Value>
                     <ns6:Value>PID-11|312 HILL ROAD^^HILLSBORO^MO^37660^US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="URI">
                  <ns6:ValueList>
                     <ns6:Value>1.123402.11111</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="repositoryUniqueId">
                  <ns6:ValueList>
                     <ns6:Value>1</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Name>
                  <ns6:LocalizedString value="Schnur CONNECT TESTGATEWAY Document 1"/>
               </ns6:Name>
               <ns6:Description>
                  <ns6:LocalizedString value="Document 1 Schnur CONNECT TESTGATEWAY comments"/>
               </ns6:Description>
               <ns6:Classification nodeRepresentation="" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns6:Slot name="authorPerson">
                     <ns6:ValueList>
                        <ns6:Value>Axolotl Elysium</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorInstitution">
                     <ns6:ValueList>
                        <ns6:Value>Test Two Workgroup</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorRole">
                     <ns6:ValueList>
                        <ns6:Value>Primary Care Provider</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorSpecialty">
                     <ns6:ValueList>
                        <ns6:Value>General</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>2.16.840.1.113883.6.1</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Summarization of Episode Note"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>Confidential</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Confidential"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>formatCodeScheme_value</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>UTF-8</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="UTF-8"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:ExternalIdentifier value="1.123401.55555" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
               <ns6:ExternalIdentifier value="D123401^^^&amp;2.2&amp;ISO" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:6c8b060e-88ad-4c2d-8b95-81451d7a4f1f" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
            </ns6:ExtrinsicObject>
            <ns6:ExtrinsicObject isOpaque="false" mimeType="text/xml" status="Active" objectType="urn:uuid:7edca82f-054d-47f2-a032-9b2a5b5186c1" home="urn:oid:1.1" id="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31">
               <ns6:Slot name="creationTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627174924</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="hash">
                  <ns6:ValueList>
                     <ns6:Value>ac0eec55d17eaa9c24054f8a7ecc5d3caa45d9f0</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="intendedRecipient">
                  <ns6:ValueList>
                     <ns6:Value>Scott Borst</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="languageCode">
                  <ns6:ValueList>
                     <ns6:Value>en-US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="legalAuthenticator">
                  <ns6:ValueList>
                     <ns6:Value>legal</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStartTime">
                  <ns6:ValueList>
                     <ns6:Value>20070911040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="serviceStopTime">
                  <ns6:ValueList>
                     <ns6:Value>20080627040000</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="size">
                  <ns6:ValueList>
                     <ns6:Value>26934</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientId">
                  <ns6:ValueList>
                     <ns6:Value>D123402^^^&amp;1.1&amp;ISO</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="sourcePatientInfo">
                  <ns6:ValueList>
                     <ns6:Value>PID-3|pid1^^^domain</ns6:Value>
                     <ns6:Value>PID-5|Schnur^Anna^^^</ns6:Value>
                     <ns6:Value>PID-7|19560813</ns6:Value>
                     <ns6:Value>PID-8|F</ns6:Value>
                     <ns6:Value>PID-11|312 HILL ROAD^^HILLSBORO^MO^37660^US</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="URI">
                  <ns6:ValueList>
                     <ns6:Value>1.123402.11111</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Slot name="repositoryUniqueId">
                  <ns6:ValueList>
                     <ns6:Value>1</ns6:Value>
                  </ns6:ValueList>
               </ns6:Slot>
               <ns6:Name>
                  <ns6:LocalizedString value="Schnur CONNECT TESTGATEWAY Document 1"/>
               </ns6:Name>
               <ns6:Description>
                  <ns6:LocalizedString value="Document 1 Schnur CONNECT TESTGATEWAY comments"/>
               </ns6:Description>
               <ns6:Classification nodeRepresentation="" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" id="">
                  <ns6:Slot name="authorPerson">
                     <ns6:ValueList>
                        <ns6:Value>Axolotl Elysium</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorInstitution">
                     <ns6:ValueList>
                        <ns6:Value>Test Two Workgroup</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorRole">
                     <ns6:ValueList>
                        <ns6:Value>Primary Care Provider</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Slot name="authorSpecialty">
                     <ns6:ValueList>
                        <ns6:Value>General</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="34133-9" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>2.16.840.1.113883.6.1</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Summarization of Episode Note"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="Confidential" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>Confidential</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="Confidential"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="CDAR2/IHE 1.0" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>formatCodeScheme_value</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="formatCodeDisplayName_value"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="UTF-8" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>UTF-8</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="UTF-8"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:Classification nodeRepresentation="test" classifiedObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" id="">
                  <ns6:Slot name="codingScheme">
                     <ns6:ValueList>
                        <ns6:Value>test</ns6:Value>
                     </ns6:ValueList>
                  </ns6:Slot>
                  <ns6:Name>
                     <ns6:LocalizedString value="test"/>
                  </ns6:Name>
               </ns6:Classification>
               <ns6:ExternalIdentifier value="1.123401.66666" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.uniqueId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
               <ns6:ExternalIdentifier value="D123401^^^&amp;2.2&amp;ISO" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="urn:uuid:ba11f2e7-065f-4f03-ae34-71e060e58e31" id="">
                  <ns6:Name>
                     <ns6:LocalizedString value="XDSDocumentEntry.patientId"/>
                  </ns6:Name>
               </ns6:ExternalIdentifier>
            </ns6:ExtrinsicObject>
         </ns6:RegistryObjectList>
      </ns8:AdhocQueryResponse>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:wsaConfig action="urn:gov:hhs:fha:nhinc:adapterdocquery/AdapterDocQueryPortType/RespondingGateway_CrossGatewayQueryResponse" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:dispatchConfig/>
    </con:mockOperation>
    <con:properties/>
  </con:mockService>
  <con:mockService bindToHostOnly="false" docroot="" host="localhost" name="mockPD_adapter" path="/mockPDAdapter" port="7785" id="b47c9f1d-ce69-4f9b-95f4-0de1cf433f76">
    <con:settings>
      <con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting>
    </con:settings>
    <con:mockOperation interface="AdapterPatientDiscoveryBindingSoap" name="RespondingGateway_PRPA_IN201305UV02" operation="RespondingGateway_PRPA_IN201305UV02" id="5e733d1d-7e32-4fa5-bdf5-70da4fe9d03a">
      <con:settings/>
      <con:dispatchStyle>SEQUENCE</con:dispatchStyle>
      <con:defaultResponse>Gallow</con:defaultResponse>
      <con:response encoding="UTF-8" name="Gallow" id="be95067b-bdb3-463e-8ed1-e2cd02d2c969" httpResponseStatus="200">
        <con:settings/>
        <con:script>context.patientid = Math.random()
context.root = Math.random()</con:script>
        <con:responseContent><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">
   <S:Body>
      <PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <id extension="3b839b4e:133af7051a3:-7fbd" root="1.1"/>
         <creationTime value="2011111725448"/>
         <interactionId extension="PRPA_IN201306UV02" root="2.16.840.1.113883.1.6"/>
         <processingCode code="P"/>
         <processingModeCode code="T"/>
         <acceptAckCode code="NE"/>
         <receiver typeCode="RCV">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="2.2"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </receiver>
         <sender typeCode="SND">
            <device determinerCode="INSTANCE" classCode="DEV">
               <id root="1.2.345.678.999"/>
               <asAgent classCode="AGNT">
                  <representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <id root="1.1"/>
                  </representedOrganization>
               </asAgent>
            </device>
         </sender>
         <acknowledgement>
            <typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <typeCode code="AA"/>
            <targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </acknowledgement>
         <controlActProcess moodCode="EVN" classCode="CACT">
            <code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
            <subject typeCode="SUBJ">
               <registrationEvent moodCode="EVN" classCode="REG">
                  <id nullFlavor="NA"/>
                  <statusCode code="active"/>
                  <subject1 typeCode="SBJ">
                     <patient classCode="PAT">
                        <id extension="${patientid}" root="${root}"/>
                        <statusCode code="SD"/>
                        <patientPerson determinerCode="INSTANCE" classCode="PSN">
                           <name>
                              <family partType="FAM">Younger</family>
                              <given partType="GIV">Gallow</given>
                           </name>
                           <telecom value="tel:+1-888-555-1234"/>
                           <administrativeGenderCode code="M"/>
                           <birthTime value="19630804"/>
                           <addr>
                              <city>LEESBURG</city>
                              <state>VA</state>
                              <postalCode>20176</postalCode>
                           </addr>
                           <asOtherIDs classCode="SD">
                              <id extension="999123401" root="2.16.840.1.113883.4.1"/>
                              <scopingOrganization determinerCode="INSTANCE" classCode="ORG">
                                 <id root="2.16.840.1.113883.4.1"/>
                              </scopingOrganization>
                           </asOtherIDs>
                        </patientPerson>
                        <providerOrganization determinerCode="INSTANCE" classCode="ORG">
                           <id root="1.1"/>
                           <contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </providerOrganization>
                        <subjectOf1>
                           <queryMatchObservation moodCode="EVN" classCode="CASE">
                              <code code="IHE_PDQ"/>
                              <value xsi:type="INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </queryMatchObservation>
                        </subjectOf1>
                     </patient>
                  </subject1>
                  <custodian typeCode="CST">
                     <assignedEntity classCode="ASSIGNED">
                        <id root="1.1"/>
                        <code codeSystem="1.3.6.1.4.1.19376.1.2.27.2" code="NotHealthDataLocator"/>
                     </assignedEntity>
                  </custodian>
               </registrationEvent>
            </subject>
            <queryAck>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <queryResponseCode code="OK"/>
            </queryAck>
            <queryByParameter>
               <queryId extension="-abd3453dcd24wkkks545" root="2.2"/>
               <statusCode code="new"/>
               <responseModalityCode code="R"/>
               <responsePriorityCode code="I"/>
               <parameterList>
                  <livingSubjectAdministrativeGender>
                     <value code="M"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectAdministrativeGender>
                  <livingSubjectBirthTime>
                     <value value="19630804"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectBirthTime>
                  <livingSubjectId>
                     <value extension="1111" root="2.2"/>
                     <semanticsText representation="TXT"/>
                  </livingSubjectId>
                  <livingSubjectName>
                     <value>
                        <family partType="FAM">Younger</family>
                        <given partType="GIV">Gallow</given>
                     </value>
                     <semanticsText representation="TXT"/>
                  </livingSubjectName>
               </parameterList>
            </queryByParameter>
         </controlActProcess>
      </PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
        <con:header>
          <con:name>Content-Type</con:name>
          <con:value>application/soap+xml; charset=utf-8</con:value>
        </con:header>
        <con:wsaConfig action="urn:RespondingGateway_PRPA_IN201305UV02" mustUnderstand="NONE" version="200508"/>
      </con:response>
      <con:dispatchConfig/>
    </con:mockOperation>
    <con:properties/>
  </con:mockService>
  <con:properties>
    <con:property>
      <con:name>AAMappingDB</con:name>
      <con:value>assigningauthoritydb</con:value>
    </con:property>
    <con:property>
      <con:name>AAMappingTable</con:name>
      <con:value>aa_to_home_community_mapping</con:value>
    </con:property>
    <con:property>
      <con:name>AQPatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>AQUserID</con:name>
      <con:value>kskagerb</con:value>
    </con:property>
    <con:property>
      <con:name>AsyncMsgDB</con:name>
      <con:value>asyncmsgs</con:value>
    </con:property>
    <con:property>
      <con:name>AsyncMsgsDB</con:name>
      <con:value>asyncmsgs</con:value>
    </con:property>
    <con:property>
      <con:name>AsyncMsgTable</con:name>
      <con:value>asyncmsgrepo</con:value>
    </con:property>
    <con:property>
      <con:name>AuditRepoDB</con:name>
      <con:value>auditrepo</con:value>
    </con:property>
    <con:property>
      <con:name>AuditRepoTable</con:name>
      <con:value>auditrepository</con:value>
    </con:property>
    <con:property>
      <con:name>BirthTime</con:name>
      <con:value>19630804</con:value>
    </con:property>
    <con:property>
      <con:name>City</con:name>
      <con:value>Melbourne</con:value>
    </con:property>
    <con:property>
      <con:name>Country</con:name>
      <con:value>US</con:value>
    </con:property>
    <con:property>
      <con:name>DBHost</con:name>
      <con:value>localhost</con:value>
    </con:property>
    <con:property>
      <con:name>DBPass</con:name>
      <con:value>nhincpass</con:value>
    </con:property>
    <con:property>
      <con:name>DBPort</con:name>
      <con:value>3306</con:value>
    </con:property>
    <con:property>
      <con:name>DBUser</con:name>
      <con:value>nhincuser</con:value>
    </con:property>
    <con:property>
      <con:name>DeferredDocRetrieveReqMessageID</con:name>
      <con:value>dcd29642-5bc0-4e6f-84be-de0870b075ec</con:value>
    </con:property>
    <con:property>
      <con:name>DeferredDocRetrieveReqMessageIDLocal</con:name>
      <con:value>b508147b-482f-4bc3-9de0-42ee85f1ccac</con:value>
    </con:property>
    <con:property>
      <con:name>DeferredDocRetrieveReqMessageIDRemote</con:name>
      <con:value>dcd29642-5bc0-4e6f-84be-de0870b075ec</con:value>
    </con:property>
    <con:property>
      <con:name>DeferredPatientDiscoveryReqMessageID</con:name>
      <con:value>uuid:6666666666.66666.666.66</con:value>
    </con:property>
    <con:property>
      <con:name>DeferredQueryReqMessageID</con:name>
      <con:value>091cda8e-95b0-4ac8-a8bb-11224affede4</con:value>
    </con:property>
    <con:property>
      <con:name>DeferredQueryReqMessageIDLocal</con:name>
      <con:value>013c7195-12e1-454b-ac0a-c7705e1f3a14</con:value>
    </con:property>
    <con:property>
      <con:name>DOB</con:name>
      <con:value>19800516</con:value>
    </con:property>
    <con:property>
      <con:name>DQDocID</con:name>
      <con:value>1.123401.55555</con:value>
    </con:property>
    <con:property>
      <con:name>DQPatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>DRDocID</con:name>
      <con:value>1.123407.777777</con:value>
    </con:property>
    <con:property>
      <con:name>DRRepoID</con:name>
      <con:value>1</con:value>
    </con:property>
    <con:property>
      <con:name>DynamicDQDocID</con:name>
      <con:value>103.8.9284320.020.3590.75^1266324032288</con:value>
    </con:property>
    <con:property>
      <con:name>DynamicDRDocID</con:name>
      <con:value/>
    </con:property>
    <con:property>
      <con:name>Endpoint-AuditLogQuery</con:name>
      <con:value>http://localhost:8080/CONNECTAdapter/EntityAuditQuery</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DeferredDQRequest</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocQueryDeferredRequestUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DeferredDQResponse</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocQueryDeferredResponseUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DocQuery</con:name>
      <con:value>http://localhost:8080/Gateway/DocumentQuery/2_0/EntityService/EntityDocQueryUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DocRetrieve</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocRetrieve</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DocRetrieveDeferredRequest</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocRetrieveDeferredRequest</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-DocRetrieveDeferredResponse</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocRetrieveDeferredResponse</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-EntityAdminDist</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/AdministrativeDistribution_Service</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-EntityXDRRequest</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocSubmissionDeferredRequestUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-Notify</con:name>
      <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationConsumer</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-PatientDiscovery</con:name>
      <con:value>http://localhost:8080/Gateway/PatientDiscovery/1_0/EntityPatientDiscovery</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-PatientDiscoveryAsyncReq</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredRequestUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-PatientDiscoveryAsyncResp</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityPatientDiscoveryDeferredResponseUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-Reidentification</con:name>
      <con:value>http://localhost:8080/CONNECTAdapter/EntitySubjectDiscovery</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-Subscribe</con:name>
      <con:value>http://localhost:8080/CONNECTAdapter/EntityNotificationProducer</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-Unsubscribe</con:name>
      <con:value>http://localhost:8080/CONNECTAdapter/EntitySubscriptionManager</con:value>
    </con:property>
    <con:property>
      <con:name>Endpoint-XDREntity</con:name>
      <con:value>http://localhost:8080/CONNECTGateway/EntityService/EntityDocSubmissionUnsecured</con:value>
    </con:property>
    <con:property>
      <con:name>ExpirationDate</con:name>
      <con:value>20100520</con:value>
    </con:property>
    <con:property>
      <con:name>FamilyName</con:name>
      <con:value>Younger</con:value>
    </con:property>
    <con:property>
      <con:name>GatewayPropDir</con:name>
      <con:value></con:value>
    </con:property>
    <con:property>
      <con:name>Gender</con:name>
      <con:value>M</con:value>
    </con:property>
    <con:property>
      <con:name>GivenName</con:name>
      <con:value>Gallow</con:value>
    </con:property>
    <con:property>
      <con:name>LocalAA</con:name>
      <con:value>1.1</con:value>
    </con:property>
    <con:property>
      <con:name>LocalConfigDir</con:name>
      <con:value>C:/SelfTest/EndToEndSelfTest</con:value>
    </con:property>
    <con:property>
      <con:name>LocalHCDescription</con:name>
      <con:value>InternalTest1</con:value>
    </con:property>
    <con:property>
      <con:name>LocalHCID</con:name>
      <con:value>1.1</con:value>
    </con:property>
    <con:property>
      <con:name>LocalPatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>mockHost</con:name>
      <con:value>localhost</con:value>
    </con:property>
    <con:property>
      <con:name>MPIDir</con:name>
      <con:value>C:/glassfish-2.1.1/domains/domain1/config</con:value>
    </con:property>
    <con:property>
      <con:name>NHINGatewayConfigDir</con:name>
      <con:value>C:/glassfish-2.1.1/domains/domain1/config/nhin</con:value>
    </con:property>
    <con:property>
      <con:name>NHINGatewayHost</con:name>
      <con:value>localhost</con:value>
    </con:property>
    <con:property>
      <con:name>NotificationEndpoint</con:name>
      <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationConsumerService/HiemNotify</con:value>
    </con:property>
    <con:property>
      <con:name>NotifySubscriptionID</con:name>
      <con:value>-f7c1a5d:1204e50e42e:-79eb</con:value>
    </con:property>
    <con:property>
      <con:name>NotifySubscriptionManagerEndpointAddress</con:name>
      <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
    </con:property>
    <con:property>
      <con:name>PatientCorrelationDB</con:name>
      <con:value>patientcorrelationdb</con:value>
    </con:property>
    <con:property>
      <con:name>PatientCorrelationTable</con:name>
      <con:value>correlatedidentifiers</con:value>
    </con:property>
    <con:property>
      <con:name>PseudonymAA</con:name>
      <con:value>ABC</con:value>
    </con:property>
    <con:property>
      <con:name>PseudonymPatientID</con:name>
      <con:value>PSEUDO001</con:value>
    </con:property>
    <con:property>
      <con:name>PurposeOfDisclosure</con:name>
      <con:value>Mental</con:value>
    </con:property>
    <con:property>
      <con:name>RealAA</con:name>
      <con:value>1.1.1</con:value>
    </con:property>
    <con:property>
      <con:name>RealPatientID</con:name>
      <con:value>D1234010050</con:value>
    </con:property>
    <con:property>
      <con:name>RemoteAA</con:name>
      <con:value>2.2</con:value>
    </con:property>
    <con:property>
      <con:name>RemoteHCDescription</con:name>
      <con:value>Business Entity</con:value>
    </con:property>
    <con:property>
      <con:name>RemoteHCID</con:name>
      <con:value>2.2</con:value>
    </con:property>
    <con:property>
      <con:name>RemotePatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>SSN</con:name>
      <con:value>123456789</con:value>
    </con:property>
    <con:property>
      <con:name>State</con:name>
      <con:value>FL</con:value>
    </con:property>
    <con:property>
      <con:name>StreetAddress</con:name>
      <con:value>123 Johnson Rd</con:value>
    </con:property>
    <con:property>
      <con:name>SubjectID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>SubscribePatientID</con:name>
      <con:value>D123401</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionDB</con:name>
      <con:value>subscriptionrepository</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionEndpoint</con:name>
      <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/NotificationProducerService/HiemSubscription</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionManagerEndpointAddress</con:name>
      <con:value>https://localhost:8181/CONNECTNhinServicesWeb/NhinService/SubscriptionManagerService/HiemUnsubscribe</con:value>
    </con:property>
    <con:property>
      <con:name>SubscriptionTable</con:name>
      <con:value>subscription</con:value>
    </con:property>
    <con:property>
      <con:name>UniquePatientId</con:name>
      <con:value>1111^^^&amp;amp;1.1&amp;amp;ISO</con:value>
    </con:property>
    <con:property>
      <con:name>UnSubscriptionID</con:name>
      <con:value>3e74139f-5271-4db1-98c0-88748fa3e4e3</con:value>
    </con:property>
    <con:property>
      <con:name>UnsubSubscriptionID</con:name>
      <con:value/>
    </con:property>
    <con:property>
      <con:name>ZipCode</con:name>
      <con:value>12345</con:value>
    </con:property>
  </con:properties>
  <con:afterLoadScript>def propertiesFilename = project.path[0..(project.path.size()-4)] + 'properties'
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
	def props = new Properties()
	props.load(new FileReader(propertiesFile))
	props.each { key, value ->
	    project.setPropertyValue(key, value)
	}
}


TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
def testRunListener = [
  afterRun: { testRunner, runContext -> },
  afterStep: { testRunner, runContext, result -> },
  beforeStep: { testRunner, runContext -> },
  beforeStep: { testRunner, runContext, testStep -> },
  beforeRun: { testRunner, runContext -> 
    use (org.codehaus.groovy.runtime.TimeCategory) {
      def startDate = 5.minutes.ago
      def endDate = 5.minutes.from.now
      def expireDate = 30.days.from.now

      def df = "yyyy-MM-dd'T'HH:mm:ss'Z'"
      def dfSig = "MM/dd/yyyy' 'HH:mm:ss"

      runContext.testCase.setPropertyValue("startDate", startDate.format(df))
      runContext.testCase.setPropertyValue("endDate", endDate.format(df))
      runContext.testCase.setPropertyValue("sigDate", startDate.format(dfSig))
      runContext.testCase.setPropertyValue("expireDate", expireDate.format(df))
    }
  }   
] as com.eviware.soapui.model.testsuite.TestRunListener

project.testSuiteList*.testCaseList.flatten()*.addTestRunListener(testRunListener)



com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.findProperty = { propertyName ->
    return delegate.getProperty(propertyName) ?:
                delegate.testCase.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.project.getPropertyValue(propertyName) ?:
                com.eviware.soapui.SoapUI.globalProperties.getPropertyValue(propertyName)
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.withSql = { dbOrPropertyName, block ->
  def dbName = delegate.findProperty(dbOrPropertyName) ?: dbOrPropertyName
  def host = delegate.findProperty('DBHost')
  def port = delegate.findProperty('DBPort')
  def user = delegate.findProperty('DBUser')
  def pass = delegate.findProperty('DBPass')

  def connectString = "jdbc:mysql://${host}:${port}/${dbName}"
  def sql = groovy.sql.Sql.newInstance(connectString, user, pass, "com.mysql.jdbc.Driver");
  try {
     block(sql)
  } finally {
    sql.close()
  }
}</con:afterLoadScript>
  <con:wssContainer/>
  <con:oAuth2ProfileContainer/>
  <con:sensitiveInformation/>
</con:soapui-project>