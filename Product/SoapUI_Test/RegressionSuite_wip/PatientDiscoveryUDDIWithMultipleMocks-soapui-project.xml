<?xml version="1.0" encoding="UTF-8" standalone="no"?><con:soapui-project xmlns:con="http://eviware.com/soapui/config" abortOnError="false" name="PatientDiscoveryTestforUDDI-Multiple Mocks" resourceRoot="" runType="SEQUENTIAL" soapui-version="3.5.1">
	<con:settings/>
	<con:interface xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:entitypatientdiscovery}EntityPatientDiscoveryBindingSoap" definition="WSDL path not set.  #EntityPatientDiscovery.wsdl" name="EntityPatientDiscoveryBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface">
		<con:settings/>
		
		<con:endpoints>
			<con:endpoint>https://localhost:${HttpsDefaultPort}/NhinConnect/EntityPatientDiscovery</con:endpoint>
			<con:endpoint>https://localhost:${HttpsDefaultPort}/NhinConnect/EntityPatientDiscoverySecured</con:endpoint>
		</con:endpoints>
		<con:operation action="urn:RespondingGateway_PRPA_IN201305UV02" anonymous="optional" bindingOperationName="RespondingGateway_PRPA_IN201305UV02" inputName="RespondingGateway_PRPA_IN201305UV02Request" isOneWay="false" name="RespondingGateway_PRPA_IN201305UV02" outputName="RespondingGateway_PRPA_IN201306UV02Response" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
	</con:interface>
	<con:interface xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:nhincproxypatientdiscovery}NhincProxyPatientDiscoveryBinding" definition="WSDL path not set.  #NhincProxyPatientDiscovery.wsdl" name="NhincProxyPatientDiscoveryBinding" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface">
		<con:settings/>
		
		<con:endpoints>
			<con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/NhincProxyPatientDiscovery</con:endpoint>
		</con:endpoints>
		<con:operation action="urn:Proxy_PRPA_IN201305UV" anonymous="optional" bindingOperationName="Proxy_PRPA_IN201305UV" inputName="Proxy_PRPA_IN201305UVProxyRequest" isOneWay="false" name="Proxy_PRPA_IN201305UV" outputName="Proxy_PRPA_IN201306UVProxyResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
	</con:interface>
	<con:interface xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" anonymous="optional" bindingName="{urn:gov:hhs:fha:nhinc:adapterpolicyengine}AdapterPolicyEngineBindingSoap" definition="WSDL path not set.  #AdapterPolicyEngine.wsdl" name="AdapterPolicyEngineBindingSoap" soapVersion="1_2" type="wsdl" wsaVersion="NONE" xsi:type="con:WsdlInterface">
		<con:settings/>
		
		<con:endpoints>
			<con:endpoint>http://localhost:${HttpDefaultPort}/NhinConnect/AdapterPolicyEngine</con:endpoint>
		</con:endpoints>
		<con:operation action="urn:CheckPolicy" anonymous="optional" bindingOperationName="CheckPolicy" inputName="CheckPolicyRequest" isOneWay="false" name="CheckPolicy" outputName="CheckPolicyResponse" receivesAttachments="false" sendsAttachments="false" type="Request-Response">
			<con:settings/>
		</con:operation>
	</con:interface>
	<con:testSuite name="PatientDiscoveryTestforUDDI-Multiple Mocks TestSuite">
		<con:settings/>
		<con:runType>SEQUENTIAL</con:runType>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="f6520436-ce22-48c4-ba09-08e5f687a7e7" keepSession="false" maxResults="0" name="1 region (FL ) in the target XML - 2 respone messages - Alt Path 1" searchProperties="true">
			<con:settings/>
			<con:testStep name="Initialize Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 region (FL ) in the target XML - 2 respone messages - Alt Path 1">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-FL</urn1:region>
            </urn1:nhinTargetCommunity>		
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>2</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse6" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse6</con:path>
					<con:port>6691</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="6.6"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="6.6.6"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="6.6.6"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="6.6.6"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="XPath Match - 6.6" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>6.6</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="XPath Match - 7.7" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}

					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}


					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:53:52Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="d4847b96-fc48-4b72-ae06-6279807e10f3" keepSession="false" maxResults="0" name="1 non-existant region in the target XML - Alt Path 3" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

//def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
//def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 non-existant region in the target XML - Alt Path 3">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-CO</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (0)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 0 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}

					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (0)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 0 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}

					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:54:05Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="a8553869-f031-4366-a053-dbbb1839f751" keepSession="false" maxResults="0" name="1 region GA + 1 HCID from the same region in the the target- 1 response - Alt Path 7" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 region GA + 1 HCID from the same region in the the target- 1 response - Alt Path 7">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>7.7</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
               <urn1:region>US-GA</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>1</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="XPath Match - 7.7" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}

					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (1)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 1 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}


					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:54:07Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="74b46707-7f13-4e0f-97b0-fad595261df7" keepSession="false" maxResults="0" name="1 region + 1 HCID in the target XML - 3 messages - Alt Path 4" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

def mockPatientDiscoveryURL4 = "http://" + mockHost + ":4491/EntityPatientDiscoveryMockResponse4";
def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "4.4", "mockpatientdiscovery", mockPatientDiscoveryURL4, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 region + 1 HCID in the target XML - 3 messages - Alt Path 4">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>4.4</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-FL</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>3</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse4" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse4</con:path>
					<con:port>4491</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="4.4"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="4.4.4"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="4.4.4"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="4.4.4"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="XPath Match - 4.4" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>4.4</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse6" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse6</con:path>
					<con:port>6691</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="6.6"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="6.6.6"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="6.6.6"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="6.6.6"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="XPath Match - 6.6" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>6.6</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="XPath Match - 7.7" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (3)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 3 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (3)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 3 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}


					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:54:14Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="439833fc-ab29-4087-94c9-db7a3e99a359" keepSession="false" maxResults="0" name="(1 region + 1 HCID) and 1 HCID in the target- 5 messages - Alt Path 5" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

//def mockPatientDiscoveryURL1 = "http://" + mockHost + ":1191/EntityPatientDiscoveryMockResponse1";
def mockPatientDiscoveryURL4 = "http://" + mockHost + ":4491/EntityPatientDiscoveryMockResponse4";
def mockPatientDiscoveryURL5 = "http://" + mockHost + ":5591/EntityPatientDiscoveryMockResponse5";
def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "1.1", "mockpatientdiscovery", mockPatientDiscoveryURL1, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "4.4", "mockpatientdiscovery", mockPatientDiscoveryURL4, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "5.5", "mockpatientdiscovery", mockPatientDiscoveryURL5, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="(1 region + 1 HCID) and 1 HCID in the target- 5 messages - Alt Path 5">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>4.4</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>6.6</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
               <urn1:region>US-VA</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>4</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse4" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse4</con:path>
					<con:port>4491</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="4.4"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="4.4.4"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="4.4.4"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="4.4.4"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="XPath Match - 4.4" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>4.4</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse5" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse5</con:path>
					<con:port>5591</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="5.5"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="5.5.5"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="5.5.5"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="5.5.5"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>5.5</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse6" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse6</con:path>
					<con:port>6691</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="6.6"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="6.6.6"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="6.6.6"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="6.6.6"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>6.6</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (4)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 4 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (4)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 4 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:54:34Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="64b57bad-3246-4764-95e8-ada9be07d36c" keepSession="false" maxResults="0" name="1 region (FL ) and 1 non-existent region in the target XML - 3 response messages" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 region (FL ) and 1 non-existent region in the target XML - 3 response messages">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-FL</urn1:region>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-NH</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>2</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse6" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse6</con:path>
					<con:port>6691</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="6.6"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="6.6.6"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="6.6.6"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="6.6.6"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>6.6</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}

					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}

					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:54:57Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="fc4b8e7c-24d9-471b-9ada-fff89c7520bd" keepSession="false" maxResults="0" name="2 regions in the target XML - 2 Response messages - Happy Path" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="2 regions in the target XML - 2 Response messages - Happy Path">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
          <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-FL</urn1:region>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-GA</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>2</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse6" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse6</con:path>
					<con:port>6691</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="6.6"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="6.6.6"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="6.6.6"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="6.6.6"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>6.6</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:55:14Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="5ff38550-7ac7-414f-b36d-ea6b83fa1f80" keepSession="false" maxResults="0" name="1 region + 1 HCID in the target XML - 4 messages - Alt Path 6" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

//def mockPatientDiscoveryURL1 = "http://" + mockHost + ":1191/EntityPatientDiscoveryMockResponse1";
def mockPatientDiscoveryURL4 = "http://" + mockHost + ":4491/EntityPatientDiscoveryMockResponse4";
def mockPatientDiscoveryURL5 = "http://" + mockHost + ":5591/EntityPatientDiscoveryMockResponse5";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "1.1", "mockpatientdiscovery", mockPatientDiscoveryURL1, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "4.4", "mockpatientdiscovery", mockPatientDiscoveryURL4, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "5.5", "mockpatientdiscovery", mockPatientDiscoveryURL5, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 region + 1 HCID in the target XML - 4 messages - Alt Path 6">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <!--<urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>4.4</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>5.5</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>7.7</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity> -->
            <urn1:nhinTargetCommunity>
               <urn1:region>US-VA</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>3</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse4" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse4</con:path>
					<con:port>4491</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="4.4"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="4.4.4"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="4.4.4"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="4.4.4"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>4.4</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse5" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse5</con:path>
					<con:port>5591</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="5.5"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="5.5.5"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="5.5.5"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="5.5.5"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>5.5</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (3)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 3 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (3)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 3 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:55:28Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="5183b7c1-fed0-4dc6-98cd-e5bd80401c99" keepSession="false" maxResults="0" name="1 region (VA ) in the target XML - 4 response messages - Alt Path 2" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

//def mockPatientDiscoveryURL1 = "http://" + mockHost + ":1191/EntityPatientDiscoveryMockResponse1";
def mockPatientDiscoveryURL4 = "http://" + mockHost + ":4491/EntityPatientDiscoveryMockResponse4";
def mockPatientDiscoveryURL5 = "http://" + mockHost + ":5591/EntityPatientDiscoveryMockResponse5";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "1.1", "mockpatientdiscovery", mockPatientDiscoveryURL1, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "4.4", "mockpatientdiscovery", mockPatientDiscoveryURL4, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "5.5", "mockpatientdiscovery", mockPatientDiscoveryURL5, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 region (VA ) in the target XML - 4 response messages - Alt Path 2">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:region>US-VA</urn1:region>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>3</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse4" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse4</con:path>
					<con:port>4491</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="4.4"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="4.4.4"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="4.4.4"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="4.4.4"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>4.4</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse5" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse5</con:path>
					<con:port>5591</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="5.5"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="5.5.5"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="5.5.5"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="5.5.5"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>5.5</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (3)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 3 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (3)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 3 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:55:46Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="23c1111b-d124-4b8a-a179-5f49264b1fb9" keepSession="false" maxResults="0" name="1 non-existant HCID in the target XML" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="1 non-existant HCID in the target XML">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <!--<urn1:region>US-QA</urn1:region>-->
 		<urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>9.9</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (0)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 0 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (0)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 0 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:56:06Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="cdd8f2fc-3a1b-4a41-8534-0e977b5fa276" keepSession="false" maxResults="0" name="No target community - Fan Out" searchProperties="true">
			<con:settings/>
			<con:testStep disabled="true" name="EntityPatientDiscovery Test Case Properties" type="properties">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" createMissingOnLoad="true" discardValuesOnSave="true" saveFirst="true" xsi:type="con:PropertiesStep">
					<con:source>C:/Projects/NHINC/Current/Product/SoapUI_Test/RegressionSuite/PatientDiscoveryUDDIWithMultipleMocks-soapui-project.properties</con:source>
					<con:target/>
					<con:properties>
						<con:property>
							<con:name>LocalAA</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalHCIDescription</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalHCID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PatientDiscoveryEndpoint</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDSubjectID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDzipCode</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDRespondingAA</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDRespondingHCID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDpurposeOfDisclosure</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDSSN</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDdOB</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDexpirationDate</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDuniquePatientId</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDstreetAddress</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDstate</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDCity</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDcountry</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDdateOfSignature</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDRespondingHCDesc</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDRespondingHCName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDlivingSubjectAdministrativeGender</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDlivingSubjectBirthTime</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>LocalHCIDName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PDAssignAuthID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>NHINGatewayConfigDir</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>NHINGatewayHost</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PEReceivingHCID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>mockHost</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>SingleMatchPrefix</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>SingleMatchGivenName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>SingleMatchFullName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>SingleMatchFamilyName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>NoMatchPrefix</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>NoMatchGivenName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>NoMatchFullName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>NoMatchFamilyName</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>hcid1</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>hc1description</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>hcid2</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>hc2description</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>hcid3</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>hc3description</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>testHCID</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>testHCDescription</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>Region1</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>Region2</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>Region3</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.DBHost</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.DBUser</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.DBPass</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.DBPort</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.PatientCorrelationDB</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.PatientCorrelationTable</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.AssigningauthorityDB</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DB.AssigningauthoritytohomecommunitymappingTable</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DBHost</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DBUser</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DBPass</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>DBPort</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PatientCorrelationDB</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>PatientCorrelationTable</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>AssigningauthorityDB</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
						<con:property>
							<con:name>AssigningauthoritytohomecommunitymappingTable</con:name>
							<con:value xsi:nil="true"/>
						</con:property>
					</con:properties>
				</con:config>
			</con:testStep>
			<con:testStep disabled="true" name="EntityPatientDiscovery Property Transfer" type="transfer">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:PropertyTransfersStep">
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PatientDiscoveryEndPoint</con:name>
						<con:sourceType>PatientDiscoveryEndpoint</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Endpoint</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath/>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>LocalHCID</con:name>
						<con:sourceType>LocalHCID</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:sender[1]/urn:device[1]/urn:asAgent[1]/urn:representedOrganization[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers disabled="true" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>ReceivingHCID</con:name>
						<con:sourceType>PDRespondingHCID</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:receiver[1]/urn:device[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" setNullOnMissingSource="true" transferTextContent="true" transferToAll="false">
						<con:name>PDQueryRequestHCID</con:name>
						<con:sourceType>LocalHCID</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:sender[1]/urn:device[1]/urn:asAgent[1]/urn:representedOrganization[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PDQueryRequestSubjectGivenName</con:name>
						<con:sourceType>SingleMatchGivenName</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:livingSubjectName[1]/urn:value[1]/urn:given[1]</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PDQueryRequestSubjectFamName</con:name>
						<con:sourceType>SingleMatchFamilyName</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:livingSubjectName[1]/urn:value[1]/urn:family[1]</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PDQueryRequestSubjectBirthTime</con:name>
						<con:sourceType>PDlivingSubjectBirthTime</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:livingSubjectBirthTime[1]/urn:value[1]/@value</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PDQueryRequestSubjectGender</con:name>
						<con:sourceType>PDlivingSubjectAdministrativeGender</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:livingSubjectAdministrativeGender[1]/urn:value[1]/@code</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssertionSSN</con:name>
						<con:sourceType>PDSSN</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:assertion[1]/urn1:SSN[1]</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssertionUniquePatientID</con:name>
						<con:sourceType>PDuniquePatientId</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:assertion[1]/urn1:uniquePatientId[1]</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PDAssignAuthId</con:name>
						<con:sourceType>PDAssignAuthID</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:controlActProcess[1]/urn:authorOrPerformer[1]/urn:assignedDevice[1]/urn:id[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PDQueryReqSubjectAssignAuthID</con:name>
						<con:sourceType>PDAssignAuthID</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:livingSubjectId[1]/urn:value[1]/@root</con:targetPath>
					</con:transfers>
					<con:transfers disabled="false" entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>PDQueryRequestSubjectID</con:name>
						<con:sourceType>PDSubjectID</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:PRPA_IN201305UV02[1]/urn:controlActProcess[1]/urn:queryByParameter[1]/urn:parameterList[1]/urn:livingSubjectId[1]/urn:value[1]/@extension</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssertionHCID</con:name>
						<con:sourceType>LocalHCID</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:assertion[1]/urn1:homeCommunity[1]/urn1:homeCommunityId[1]</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" setNullOnMissingSource="true" transferTextContent="true" transferToAll="false">
						<con:name>AssertionHCIDDesc</con:name>
						<con:sourceType>LocalHCIDescription</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:assertion[1]/urn1:homeCommunity[1]/urn1:description[1]</con:targetPath>
					</con:transfers>
					<con:transfers entitize="false" failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferChildNodes="false" transferTextContent="true" transferToAll="false" useXQuery="false">
						<con:name>AssertionHCIDname</con:name>
						<con:sourceType>LocalHCIDName</con:sourceType>
						<con:sourceStep>EntityPatientDiscovery Test Case Properties</con:sourceStep>
						<con:sourcePath xsi:nil="true"/>
						<con:targetType>Request</con:targetType>
						<con:targetStep>EntityPatientDiscoveryRequest</con:targetStep>
						<con:targetPath>declare namespace urn1='urn:gov:hhs:fha:nhinc:common:nhinccommon';
declare namespace urn='urn:hl7-org:v3';
//urn:RespondingGateway_PRPA_IN201305UV02Request[1]/urn:assertion[1]/urn1:homeCommunity[1]/urn1:name[1]</con:targetPath>
					</con:transfers>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

//def mockPatientDiscoveryURL1 = "http://" + mockHost + ":1191/EntityPatientDiscoveryMockResponse1";
def mockPatientDiscoveryURL4 = "http://" + mockHost + ":4491/EntityPatientDiscoveryMockResponse4";
def mockPatientDiscoveryURL5 = "http://" + mockHost + ":5591/EntityPatientDiscoveryMockResponse5";
def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

//FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "1.1", "mockpatientdiscovery", mockPatientDiscoveryURL1, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "4.4", "mockpatientdiscovery", mockPatientDiscoveryURL4, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "5.5", "mockpatientdiscovery", mockPatientDiscoveryURL5, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="No target community - Fan Out">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="${#Project#LocalHCID}"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="1.1"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>7</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse4" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse4</con:path>
					<con:port>4491</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="4.4"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="4.4.4"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="4.4.4"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="4.4.4"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>4.4</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse5" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse5</con:path>
					<con:port>5591</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="5.5"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="5.5.5"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="5.5.5"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="5.5.5"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>5.5</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse6" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse6</con:path>
					<con:port>6691</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="6.6"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="6.6.6"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="6.6.6"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="6.6.6"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>6.6</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (4)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 4 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (5)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 5 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:53:21Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:testCase failOnError="true" failTestCaseOnErrors="true" id="7061a565-9f60-43d9-9281-76b9e457023d" keepSession="false" maxResults="0" name="2 HCIDs in target XML" searchProperties="true">
			<con:settings/>
			<con:testStep name="Copy InternalConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-internalConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "internalConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Copy UDDIConfigurationInfo" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def testCase = testRunner.getTestCase()
def testSuite = testCase.getTestSuite()
def project = testSuite.getProject()
def projectPropFullFile = project.getPath()
def projectPropPath = groovyUtils.projectPath

def sourceDir = projectPropPath;
def sourceFile = "PatientDiscovery-uddiConnectionInfo2.4.xml";
//def destDir = context.findProperty( "NHINGatewayConfigDir" );
def destDir = System.env['NHINC_PROPERTIES_DIR'];
def destFile = "uddiConnectionInfo.xml";

log.info(sourceDir +'; ' + sourceFile  +'; ' + destDir +'; ' + destFile );

FileUtils.MoveFile(sourceDir, sourceFile, destDir, destFile, context, log);






					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Set Response Mode" type="groovy">
				<con:settings/>
				<con:config>
					<script>//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destDir = dataSource.getPropertyValue( "NHINGatewayConfigDir" );

def destDir = System.env['NHINC_PROPERTIES_DIR']

FileUtils.UpdateProperty(destDir, 'gateway.properties', 'patientDiscoveryResponseMode', 'Trust',context,log)</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear correlations table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  def table = context.findProperty('PatientCorrelationTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="clear AAtoHCIDmapping table" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  def table = context.findProperty('AssigningauthoritytohomecommunitymappingTable')

  sql.execute('delete from ' + table)
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="ModifyInternalConnectionInfoUsingTestHelper" type="groovy">
				<con:settings/>
				<con:config>
					<script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
//def dataSource = testRunner.testCase.getTestStepByName( "EntityPatientDiscovery Test Case Properties" );
//def destConfigFileLocation = dataSource.getPropertyValue("NHINGatewayConfigDir");
def destConfigFileLocation = System.env['NHINC_PROPERTIES_DIR'];
def NHINGatewayHost = context.findProperty("NHINGatewayHost");
def mockHost = context.findProperty("mockHost");
def patientdiscoveryURL = "https://" + NHINGatewayHost + ":8181/CONNECTGatewayTest/NhinPatientDiscoveryTestHelper";

def mockPatientDiscoveryURL6 = "http://" + mockHost + ":6691/EntityPatientDiscoveryMockResponse6";
def mockPatientDiscoveryURL7 = "http://" + mockHost + ":7781/EntityPatientDiscoveryMockResponse7";

FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "6.6", "mockpatientdiscovery", mockPatientDiscoveryURL6, context, log)
FileUtils.CreateOrUpdateConnection(destConfigFileLocation, "7.7", "mockpatientdiscovery", mockPatientDiscoveryURL7, context, log)
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="EntityPatientDiscoveryRequest" type="request">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RequestStep">
					<con:interface>EntityPatientDiscoveryBindingSoap</con:interface>
					<con:operation>RespondingGateway_PRPA_IN201305UV02</con:operation>
					<con:request name="EntityPatientDiscoveryRequest">
						<con:settings/>
						<con:encoding>UTF-8</con:encoding>
						<con:endpoint>${#Project#PatientDiscoveryEndpoint}</con:endpoint>
						<con:request><![CDATA[
							<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:urn="urn:hl7-org:v3" xmlns:urn1="urn:gov:hhs:fha:nhinc:common:nhinccommon">
   <soapenv:Header/>
   <soapenv:Body projectName="PatientDiscoveryTestforUDDI-Multiple Mocks" testCase="2 HCIDs in target XML">
      <urn:RespondingGateway_PRPA_IN201305UV02Request>
         <urn:PRPA_IN201305UV02 ITSVersion="XML_1.0">
            <urn:id root="1.1" extension="-5a3e95b1:11d1fa33d45:-7f9b"/>
            <urn:creationTime value="20091116084800"/>
            <urn:interactionId root="2.16.840.1.113883.1.6" extension="PRPA_IN201305UV02"/>
            <urn:processingCode code="T"/>
            <urn:processingModeCode code="I"/>
            <urn:acceptAckCode code="AL"/>
            <urn:receiver typeCode="RCV">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="2.2"/>
               </urn:device>
            </urn:receiver>
            <urn:sender typeCode="SND">
               <urn:device classCode="DEV" determinerCode="INSTANCE">
                  <urn:id root="1.1"/>
                  <urn:asAgent classCode="AGNT">
                     <urn:representedOrganization classCode="ORG" determinerCode="INSTANCE">
                        <urn:id root="${#Project#LocalHCID}"/>
                     </urn:representedOrganization>
                  </urn:asAgent>
               </urn:device>
            </urn:sender>
            <urn:controlActProcess classCode="CACT" moodCode="EVN">
               <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
               <urn:authorOrPerformer typeCode="AUT">
                  <urn:assignedDevice>
                     <urn:id root="${#Project#PDAssignAuthID}"/>
                  </urn:assignedDevice>
               </urn:authorOrPerformer>
               <urn:queryByParameter>
                  <urn:queryId root="2.2" extension="-abd3453dcd24wkkks545"/>
                  <urn:statusCode code="new"/>
                  <urn:responseModalityCode code="R"/>
                  <urn:responsePriorityCode code="I"/>
                  <urn:parameterList>
                     <urn:livingSubjectAdministrativeGender>
                        <urn:value code="${#Project#PDlivingSubjectAdministrativeGender}"/>
                        <urn:semanticsText representation="TXT">LivingSubject.administrativeGender</urn:semanticsText>
                     </urn:livingSubjectAdministrativeGender>
                     <urn:livingSubjectBirthTime>
                        <urn:value value="${#Project#PDlivingSubjectBirthTime}" operator="I"/>
                        <urn:semanticsText representation="TXT">LivingSubject.birthTime</urn:semanticsText>
                     </urn:livingSubjectBirthTime>
                     <urn:livingSubjectName>
                        <urn:value>
                           <urn:family partType="FAM">${#Project#SingleMatchFamilyName}</urn:family>
                           <urn:given partType="GIV">${#Project#SingleMatchGivenName}</urn:given>
                        </urn:value>
                        <urn:semanticsText representation="TXT">LivingSubject.name</urn:semanticsText>
                     </urn:livingSubjectName>
                     <urn:livingSubjectId>
                        <urn:value root="${#Project#PDAssignAuthID}" extension="${#Project#PDSubjectID}" assigningAuthorityName="?"/>
                        <urn:semanticsText representation="TXT"/>
                     </urn:livingSubjectId>
                  </urn:parameterList>
               </urn:queryByParameter>
            </urn:controlActProcess>
         </urn:PRPA_IN201305UV02>
         <urn:NhinTargetCommunities>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>6.6</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
            <urn1:nhinTargetCommunity>
               <urn1:homeCommunity>
                  <urn1:description>desc</urn1:description>
                  <urn1:homeCommunityId>7.7</urn1:homeCommunityId>
                  <urn1:name>Name</urn1:name>
               </urn1:homeCommunity>
            </urn1:nhinTargetCommunity>
         </urn:NhinTargetCommunities>
         <urn:PRPA_IN201305UV/>
         <urn:assertion>
            <urn1:address>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>AddrCity</urn1:city>
               <urn1:country>AddrCountry</urn1:country>
               <urn1:state>AddrState</urn1:state>
               <urn1:streetAddress>AddrStreet</urn1:streetAddress>
               <urn1:zipCode>AddrZip</urn1:zipCode>
            </urn1:address>
            <urn1:dateOfBirth>06/04/1959 05:21:00</urn1:dateOfBirth>
            <urn1:explanationNonClaimantSignature>Electronic</urn1:explanationNonClaimantSignature>
            <urn1:haveSecondWitnessSignature>false</urn1:haveSecondWitnessSignature>
            <urn1:haveSignature>false</urn1:haveSignature>
            <urn1:haveWitnessSignature>false</urn1:haveWitnessSignature>
            <urn1:homeCommunity>
               <urn1:description>${#Project#LocalHCIDescription}</urn1:description>
               <urn1:homeCommunityId>${#Project#LocalHCID}</urn1:homeCommunityId>
               <urn1:name>${#Project#LocalHCIDName}</urn1:name>
            </urn1:homeCommunity>
            <urn1:personName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sandy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
               <urn1:fullName>Sandy S. Smith</urn1:fullName>
            </urn1:personName>
            <urn1:phoneNumber>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5436</urn1:extension>
               <urn1:localNumber>253-6849</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:phoneNumber>
            <urn1:secondWitnessAddress>
               <urn1:addressType>
                  <urn1:code>AddrCode</urn1:code>
                  <urn1:codeSystem>AddrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>AddrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>AddrCode</urn1:displayName>
                  <urn1:originalText>AddrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Addr2City</urn1:city>
               <urn1:country>Addr2Country</urn1:country>
               <urn1:state>Addr2State</urn1:state>
               <urn1:streetAddress>Addr2Street</urn1:streetAddress>
               <urn1:zipCode>Addr2Zip</urn1:zipCode>
            </urn1:secondWitnessAddress>
            <urn1:secondWitnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Sammy</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>s</urn1:secondNameOrInitials>
               <urn1:fullName>Sammy S. Smith</urn1:fullName>
            </urn1:secondWitnessName>
            <urn1:secondWitnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>5424</urn1:extension>
               <urn1:localNumber>542-6823</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:secondWitnessPhone>
            <urn1:SSN>${#Project#PDSSN}</urn1:SSN>
            <urn1:uniquePatientId>${#Project#PDuniquePatientId}</urn1:uniquePatientId>
            <urn1:witnessAddress>
               <urn1:addressType>
                  <urn1:code>addrCode</urn1:code>
                  <urn1:codeSystem>addrCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>addrCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>addrCode</urn1:displayName>
                  <urn1:originalText>addrCode</urn1:originalText>
               </urn1:addressType>
               <urn1:city>Burnell</urn1:city>
               <urn1:country>USA</urn1:country>
               <urn1:state>FL</urn1:state>
               <urn1:streetAddress>825 North</urn1:streetAddress>
               <urn1:zipCode>32184</urn1:zipCode>
            </urn1:witnessAddress>
            <urn1:witnessName>
               <urn1:familyName>Smith</urn1:familyName>
               <urn1:givenName>Scott</urn1:givenName>
               <urn1:nameType>
                  <urn1:code>nameCode</urn1:code>
                  <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>nameCode</urn1:displayName>
                  <urn1:originalText>nameCode</urn1:originalText>
               </urn1:nameType>
               <urn1:secondNameOrInitials>S.</urn1:secondNameOrInitials>
               <urn1:fullName>Scott S. Smith</urn1:fullName>
            </urn1:witnessName>
            <urn1:witnessPhone>
               <urn1:areaCode>321</urn1:areaCode>
               <urn1:countryCode>1</urn1:countryCode>
               <urn1:extension>8432</urn1:extension>
               <urn1:localNumber>985-2239</urn1:localNumber>
               <urn1:phoneNumberType>
                  <urn1:code>phoneCode</urn1:code>
                  <urn1:codeSystem>phoneCodeSyst</urn1:codeSystem>
                  <urn1:codeSystemName>phoneCodeSystName</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>phoneCode</urn1:displayName>
                  <urn1:originalText>phoneCode</urn1:originalText>
               </urn1:phoneNumberType>
            </urn1:witnessPhone>
            <urn1:userInfo>
               <urn1:personName>
                  <urn1:familyName>Skagerberg</urn1:familyName>
                  <urn1:givenName>Karl</urn1:givenName>
                  <urn1:nameType>
                     <urn1:code>nameCode</urn1:code>
                     <urn1:codeSystem>nameCodeSyst</urn1:codeSystem>
                     <urn1:codeSystemName>nameCodeSystName</urn1:codeSystemName>
                     <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                     <urn1:displayName>nameCode</urn1:displayName>
                     <urn1:originalText>nameCode</urn1:originalText>
                  </urn1:nameType>
                  <urn1:secondNameOrInitials>S</urn1:secondNameOrInitials>
                  <urn1:fullName>Kasrl S. Skagerberg</urn1:fullName>
               </urn1:personName>
               <urn1:userName>kskagerb</urn1:userName>
               <urn1:org>
                  <urn1:description>InternalSelfTest2</urn1:description>
                  <urn1:homeCommunityId>2.2</urn1:homeCommunityId>
                  <urn1:name>InternalSelfTest2</urn1:name>
               </urn1:org>
               <urn1:roleCoded>
                  <urn1:code>307969004</urn1:code>
                  <urn1:codeSystem>2.16.840.1.113883.6.96</urn1:codeSystem>
                  <urn1:codeSystemName>SNOMED_CT</urn1:codeSystemName>
                  <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
                  <urn1:displayName>Public Health</urn1:displayName>
                  <urn1:originalText>Public Health</urn1:originalText>
               </urn1:roleCoded>
            </urn1:userInfo>
            <urn1:authorized>true</urn1:authorized>
            <urn1:purposeOfDisclosureCoded>
               <urn1:code>PUBLICHEALTH</urn1:code>
               <urn1:codeSystem>2.16.840.1.113883.3.18.7.1</urn1:codeSystem>
               <urn1:codeSystemName>nhin-purpose</urn1:codeSystemName>
               <urn1:codeSystemVersion>1.0</urn1:codeSystemVersion>
               <urn1:displayName>Use or disclosure of Psychotherapy Notes</urn1:displayName>
               <urn1:originalText>Use or disclosure of Psychotherapy Notes</urn1:originalText>
            </urn1:purposeOfDisclosureCoded>
            <urn1:samlAuthnStatement>
               <urn1:authInstant>2009-04-16T13:15:39Z</urn1:authInstant>
               <urn1:sessionIndex>987</urn1:sessionIndex>
               <urn1:authContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</urn1:authContextClassRef>
               <urn1:subjectLocalityAddress>158.147.185.168</urn1:subjectLocalityAddress>
               <urn1:subjectLocalityDNSName>cs.myharris.net</urn1:subjectLocalityDNSName>
            </urn1:samlAuthnStatement>
            <urn1:samlAuthzDecisionStatement>
               <urn1:decision>Permit</urn1:decision>
               <urn1:resource>https://158.147.185.168:8181/SamlReceiveService/SamlProcessWS</urn1:resource>
               <urn1:action>EXECUTE</urn1:action>
               <urn1:evidence>
                  <urn1:assertion>
                     <urn1:id>40df7c0a-ff3e-4b26-baeb-f2910f6d05a9</urn1:id>
                     <urn1:issueInstant>2009-04-16T13:10:39.093Z</urn1:issueInstant>
                     <urn1:version>2.0</urn1:version>
                     <urn1:issuerFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</urn1:issuerFormat>
                     <urn1:issuer>CN=SAML User,OU=Harris,O=HITS,L=Melbourne,ST=FL,C=US</urn1:issuer>
                     <urn1:conditions>
                        <urn1:notBefore>2009-04-16T13:10:39.093Z</urn1:notBefore>
                        <urn1:notOnOrAfter>2009-12-31T12:00:00.000Z</urn1:notOnOrAfter>
                     </urn1:conditions>
                     <urn1:accessConsentPolicy>urn:oid:1.2.3.4</urn1:accessConsentPolicy>
                     <urn1:instanceAccessConsentPolicy>urn:oid:1.2.3.4.123456789</urn1:instanceAccessConsentPolicy>
                  </urn1:assertion>
               </urn1:evidence>
            </urn1:samlAuthzDecisionStatement>
         </urn:assertion>
      </urn:RespondingGateway_PRPA_IN201305UV02Request>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
						<con:assertion type="SOAP Response"/>
						<con:assertion disabled="true" type="Schema Compliance">
							<con:configuration/>
						</con:assertion>
						<con:assertion type="SOAP Fault Assertion"/>
						<con:assertion type="XPath Match">
							<con:configuration>
								<path>declare namespace ns3='urn:hl7-org:v3';
count(//ns3:RespondingGateway_PRPA_IN201306UV02Response[1]/ns3:communityResponse)</path>
								<content>2</content>
								<allowWildcards>false</allowWildcards>
								<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							</con:configuration>
						</con:assertion>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
						<con:wsrmConfig version="1.2"/>
					</con:request>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse6" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse6</con:path>
					<con:port>6691</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                      <ns3:id root="6.6"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="6.6.6"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="6.6.6"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="6.6.6"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>6.6</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="NHINCProxyPatientDiscoveryMockResponse7" type="mockresponse">
				<con:settings/>
				<con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" startStep="EntityPatientDiscoveryRequest" xsi:type="con:MockResponseStep">
					<con:interface>NhincProxyPatientDiscoveryBinding</con:interface>
					<con:operation>Proxy_PRPA_IN201305UV</con:operation>
					<con:path>/EntityPatientDiscoveryMockResponse7</con:path>
					<con:port>7781</con:port>
					<con:timeout>40000</con:timeout>
					<con:response>
						<con:settings/>
						<con:responseContent><![CDATA[
							<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
   <S:Body>
      <ns3:PRPA_IN201306UV02 ITSVersion="XML_1.0" xmlns="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns2="urn:gov:hhs:fha:nhinc:common:nhinccommon" xmlns:ns3="urn:hl7-org:v3" xmlns:ns4="urn:gov:hhs:fha:nhinc:common:patientcorrelationfacade">
         <ns3:id extension="4191797c:1259356875e:-7c2d" root="1.1.1"/>
         <ns3:creationTime value="2009121522276"/>
         <ns3:interactionId extension="PRPA_IN201306UV" root="2.16.840.1.113883.1.6"/>
         <ns3:processingCode code="P"/>
         <ns3:processingModeCode code="R"/>
         <ns3:acceptAckCode code="AL"/>
         <ns3:receiver typeCode="RCV">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:receiver>
         <ns3:sender typeCode="SND">
            <ns3:device determinerCode="INSTANCE" classCode="">
               <ns3:id root="1.2.345.678.999"/>
               <ns3:asAgent classCode="AGNT">
                  <ns3:representedOrganization determinerCode="INSTANCE" classCode="ORG">
                     <ns3:id root="7.7"/>
                  </ns3:representedOrganization>
               </ns3:asAgent>
            </ns3:device>
         </ns3:sender>
         <ns3:acknowledgement>
            <ns3:typeId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
            <ns3:typeCode code="AA"/>
            <ns3:targetMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:acknowledgement>
         <ns3:controlActProcess moodCode="EVN" classCode="">
            <ns3:code codeSystem="2.16.840.1.113883.1.6" code="PRPA_TE201306UV"/>
		<ns3:authorOrPerformer typeCode="AUT" nullFlavor="">
                     <ns3:assignedDevice classCode="">
                        <ns3:id root="7.7.7"/>
                     </ns3:assignedDevice>
                  </ns3:authorOrPerformer>
            <ns3:subject typeCode="SUBJ">
               <ns3:registrationEvent moodCode="" classCode="">
                  <ns3:id nullFlavor="NA"/>
                  <ns3:statusCode code="active"/>
                  <ns3:subject1 typeCode="">
                     <ns3:patient classCode="PAT">
                        <ns3:id extension="1234" root="7.7.7"/>
                        <ns3:statusCode code="SD"/>
                        <ns3:patientPerson>
                           <ns3:name>
                              <ns3:family partType="FAM">Smith</ns3:family>
                              <ns3:given partType="GIV">Joe</ns3:given>
                           </ns3:name>
                           <ns3:administrativeGenderCode code="M"/>
                           <ns3:birthTime value="19560301"/>
                           <ns3:addr>
                              <ns3:city>Orlando</ns3:city>
                              <ns3:state>FL</ns3:state>
                              <ns3:postalCode>98765</ns3:postalCode>
                           </ns3:addr>
                        </ns3:patientPerson>
                        <ns3:providerOrganization determinerCode="" classCode="">
                           <ns3:id root="7.7.7"/>
                           <ns3:contactParty xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                        </ns3:providerOrganization>
                        <ns3:subjectOf1>
                           <ns3:queryMatchObservation moodCode="" classCode="">
                              <ns3:code code="IHE_PDQ"/>
                              <ns3:value xsi:type="ns3:INT" value="100" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                           </ns3:queryMatchObservation>
                        </ns3:subjectOf1>
                     </ns3:patient>
                  </ns3:subject1>
                  <ns3:custodian typeCode="">
                     <ns3:assignedEntity classCode="">
                        <ns3:id root="1.1.2.16.840.1.113883.3.198"/>
                     </ns3:assignedEntity>
                  </ns3:custodian>
               </ns3:registrationEvent>
            </ns3:subject>
            <ns3:queryAck>
               <ns3:queryId extension="-abd3453dcd24wkkks545" root="1.1"/>
               <ns3:queryResponseCode code="OK"/>
               <ns3:resultTotalQuantity value="1"/>
               <ns3:resultCurrentQuantity value="1"/>
               <ns3:resultRemainingQuantity value="0"/>
            </ns3:queryAck>
            <ns3:queryByParameter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
         </ns3:controlActProcess>
      </ns3:PRPA_IN201306UV02>
   </S:Body>
</S:Envelope>]]></con:responseContent>
						<con:wsaConfig mustUnderstand="NONE" version="200508"/>
					</con:response>
					<con:assertion name="SingleMatchGivenName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:given[1]</path>
							<content>${#Project#SingleMatchGivenName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion name="SingleMatchFamilyName" type="XPath Match">
						<con:configuration>
							<path>declare namespace ns1='urn:hl7-org:v3';
//ns1:Proxy_PRPA_IN201305UVProxyRequest[1]/ns1:PRPA_IN201305UV02[1]/ns1:controlActProcess[1]/ns1:queryByParameter[1]/ns1:parameterList[1]/ns1:livingSubjectName[1]/ns1:value[1]/ns1:family[1]</path>
							<content>${#Project#SingleMatchFamilyName}</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match">
						<con:configuration>
							<path>declare namespace ns3='urn:hl7-org:v3';
//ns3:Proxy_PRPA_IN201305UVProxyRequest[1]/ns3:PRPA_IN201305UV02[1]/ns3:receiver[1]/ns3:device[1]/ns3:asAgent[1]/ns3:representedOrganization[1]/ns3:id[1]/@root</path>
							<content>7.7</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
						</con:configuration>
					</con:assertion>
					<con:host/>
				</con:config>
			</con:testStep>
			<con:testStep name="count correlations (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('PatientCorrelationDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('PatientCorrelationTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="count mapping (2)" type="groovy">
				<con:settings/>
				<con:config>
					<script>context.withSql('AssigningauthorityDB') { sql -&gt; 
  assert 2 == sql.firstRow('select count(*) from ' + context.findProperty('AssigningauthoritytohomecommunitymappingTable'))[0]
}
					</script>
				</con:config>
			</con:testStep>
			<con:testStep name="Restore Configurations" type="groovy">
				<con:settings/>
				<con:config>
					<script>FileUtils.InitializeNHINCProperties(context, log);
					</script>
				</con:config>
			</con:testStep>
			<con:properties>
				<con:property>
					<con:name>startDate</con:name>
					<con:value>2010-05-18T00:00:00Z</con:value>
				</con:property>
				<con:property>
					<con:name>endDate</con:name>
					<con:value>2010-05-18T21:56:08Z</con:value>
				</con:property>
				<con:property>
					<con:name>sigDate</con:name>
					<con:value>05/18/2010 00:00:00</con:value>
				</con:property>
				<con:property>
					<con:name>expireDate</con:name>
					<con:value>2010-06-17T00:00:00Z</con:value>
				</con:property>
			</con:properties>
			<con:reportParameters/>
			<con:tearDownScript>FileUtils.restoreToMasterConfiguration(context, log);</con:tearDownScript>
		</con:testCase>
		<con:properties/>
		<con:reportParameters/>
	</con:testSuite>
	<con:requirements/>
	<con:properties>
		
		<con:property><con:name>AssigningauthorityDB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>AssigningauthoritytohomecommunitymappingTable</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>DB.AssigningauthorityDB</con:name><con:value>assigningauthoritydb</con:value></con:property><con:property><con:name>DB.AssigningauthoritytohomecommunitymappingTable</con:name><con:value>aa_to_home_community_mapping</con:value></con:property><con:property><con:name>DB.DBHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>DB.DBPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>DB.DBPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>DB.DBUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>DB.PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>DB.PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		<con:property><con:name>DBHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>DBPass</con:name><con:value>nhincpass</con:value></con:property><con:property><con:name>DBPort</con:name><con:value>3306</con:value></con:property><con:property><con:name>DBUser</con:name><con:value>nhincuser</con:value></con:property><con:property><con:name>Endpoint-Querybystate</con:name><con:value>http://localhost:8080/CONNECTCommon/NhincComponentConnectionManager</con:value></con:property><con:property><con:name>hc1description</con:name><con:value>Test1</con:value></con:property><con:property><con:name>hc2description</con:name><con:value>Test2</con:value></con:property><con:property><con:name>hc3description</con:name><con:value>Test3</con:value></con:property><con:property><con:name>hcid1</con:name><con:value>4.4</con:value></con:property>
		
		<con:property><con:name>hcid2</con:name><con:value>5.5</con:value></con:property><con:property><con:name>hcid3</con:name><con:value>6.6</con:value></con:property><con:property><con:name>LocalAA</con:name><con:value>1.1</con:value></con:property><con:property><con:name>LocalConfigDir</con:name><con:value>C:/SelfTest/EndToEndSelfTest</con:value></con:property><con:property><con:name>LocalHCID</con:name><con:value>1.1</con:value></con:property><con:property><con:name>LocalHCIDescription</con:name><con:value>Test HCID1</con:value></con:property><con:property><con:name>LocalHCIDName</con:name><con:value>HCID1</con:value></con:property><con:property><con:name>mockHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>MPIDir</con:name><con:value>C:/Sun/AppServer/domains/domain1/config</con:value></con:property><con:property><con:name>NHINGatewayConfigDir</con:name><con:value>c:/sun/appserver/domains/domain1/config/nhin</con:value></con:property><con:property><con:name>NHINGatewayHost</con:name><con:value>localhost</con:value></con:property><con:property><con:name>NoMatchFamilyName</con:name><con:value>Winslet</con:value></con:property><con:property><con:name>NoMatchFullName</con:name><con:value>Kate Winslet</con:value></con:property><con:property><con:name>NoMatchGivenName</con:name><con:value>Kate</con:value></con:property><con:property><con:name>NoMatchPrefix</con:name><con:value>Ms.</con:value></con:property><con:property><con:name>PatientCorrelationDB</con:name><con:value>patientcorrelationdb</con:value></con:property><con:property><con:name>PatientCorrelationTable</con:name><con:value>correlatedidentifiers</con:value></con:property><con:property><con:name>PatientDiscoveryEndpoint</con:name><con:value>http://localhost:8080/CONNECTGateway/EntityPatientDiscovery</con:value></con:property><con:property><con:name>PDAssignAuthID</con:name><con:value>1.1.2.16.840.1.113883.3.198</con:value></con:property><con:property><con:name>PDCity</con:name><con:value>Melbourne</con:value></con:property><con:property><con:name>PDcountry</con:name><con:value>US</con:value></con:property><con:property><con:name>PDdateOfSignature</con:name><con:value>20080520</con:value></con:property><con:property><con:name>PDdOB</con:name><con:value>19800516</con:value></con:property><con:property><con:name>PDexpirationDate</con:name><con:value>20100520</con:value></con:property><con:property><con:name>PDlivingSubjectAdministrativeGender</con:name><con:value>M</con:value></con:property><con:property><con:name>PDlivingSubjectBirthTime</con:name><con:value>19630804</con:value></con:property><con:property><con:name>PDpurposeOfDisclosure</con:name><con:value>Mental</con:value></con:property><con:property><con:name>PDRespondingAA</con:name><con:value>2.2</con:value></con:property><con:property><con:name>PDRespondingHCDesc</con:name><con:value>Test HCID2</con:value></con:property><con:property><con:name>PDRespondingHCID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>PDRespondingHCName</con:name><con:value>HCID2</con:value></con:property><con:property><con:name>PDSSN</con:name><con:value>123456789</con:value></con:property><con:property><con:name>PDstate</con:name><con:value>FL</con:value></con:property><con:property><con:name>PDstreetAddress</con:name><con:value>123 Johnson Rd</con:value></con:property><con:property><con:name>PDSubjectID</con:name><con:value>1234</con:value></con:property><con:property><con:name>PDuniquePatientId</con:name><con:value>1234^^^&amp;amp;1.1&amp;amp;ISO</con:value></con:property><con:property><con:name>PDzipCode</con:name><con:value>12345</con:value></con:property><con:property><con:name>PEReceivingHCID</con:name><con:value>2.2</con:value></con:property><con:property><con:name>Region1</con:name><con:value>US-VA</con:value></con:property><con:property><con:name>Region2</con:name><con:value>Us-FL</con:value></con:property><con:property><con:name>Region3</con:name><con:value>US-MA</con:value></con:property><con:property><con:name>SingleMatchFamilyName</con:name><con:value>Smith</con:value></con:property><con:property><con:name>SingleMatchFullName</con:name><con:value>Joe Smith</con:value></con:property><con:property><con:name>SingleMatchGivenName</con:name><con:value>Joe</con:value></con:property>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	<con:property><con:name>SingleMatchPrefix</con:name><con:value>Mr.</con:value></con:property><con:property><con:name>testHCDescription</con:name><con:value>Test HCID</con:value></con:property><con:property><con:name>testHCID</con:name><con:value>8.8</con:value></con:property></con:properties>
	<con:afterLoadScript>def propertiesFilename = project.path[0..(project.path.size()-4)] + 'properties'
def propertiesFile = new File(propertiesFilename)
if (propertiesFile.exists()) {
	def props = new Properties()
	props.load(new FileReader(propertiesFile))
	props.each { key, value -&gt;
	    project.setPropertyValue(key, value)
	}
}


TimeZone.setDefault(TimeZone.getTimeZone("UTC"))
def testRunListener = [
  afterRun: { testRunner, runContext -&gt; },
  afterStep: { testRunner, runContext, result -&gt; },
  beforeStep: { testRunner, runContext -&gt; },
  beforeStep: { testRunner, runContext, testStep -&gt; },
  beforeRun: { testRunner, runContext -&gt; 
    use (org.codehaus.groovy.runtime.TimeCategory) {
      def startDate = 5.minutes.ago
      def endDate = 5.minutes.from.now
      def expireDate = 30.days.from.now

      def df = "yyyy-MM-dd'T'HH:mm:ss'Z'"
      def dfSig = "MM/dd/yyyy' 'HH:mm:ss"

      runContext.testCase.setPropertyValue("startDate", startDate.format(df))
      runContext.testCase.setPropertyValue("endDate", endDate.format(df))
      runContext.testCase.setPropertyValue("sigDate", startDate.format(dfSig))
      runContext.testCase.setPropertyValue("expireDate", expireDate.format(df))
    }
  }   
] as com.eviware.soapui.model.testsuite.TestRunListener

project.testSuiteList*.testCaseList.flatten()*.addTestRunListener(testRunListener)



com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.findProperty = { propertyName -&gt;
    return delegate.getProperty(propertyName) ?:
                delegate.testCase.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.getPropertyValue(propertyName) ?:
                delegate.testCase.testSuite.project.getPropertyValue(propertyName)
}

com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext.metaClass.withSql = { dbOrPropertyName, block -&gt;
  def dbName = delegate.findProperty(dbOrPropertyName) ?: dbOrPropertyName
  def host = delegate.findProperty('DBHost')
  def port = delegate.findProperty('DBPort')
  def user = delegate.findProperty('DBUser')
  def pass = delegate.findProperty('DBPass')

  def connectString = "jdbc:mysql://${host}:${port}/${dbName}"
  def sql = groovy.sql.Sql.newInstance(connectString, user, pass, "com.mysql.jdbc.Driver");
  try {
     block(sql)
  } finally {
    sql.close()
  }
}
	</con:afterLoadScript>
	<con:wssContainer/>
	<con:databaseConnectionContainer/>
	<con:reporting>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:xmlTemplates/>
		<con:parameters/>
	</con:reporting>
	<con:eventHandlers name="TestSuiteRunListener.beforeTestCase" type="TestSuiteRunListener.beforeTestCase">
		<con:script>FileUtils.backupConfiguration(context, log);</con:script>
	</con:eventHandlers>
	<con:eventHandlers name="TestSuiteRunListener.afterTestCase" type="TestSuiteRunListener.afterTestCase">
		<con:script>FileUtils.restoreConfiguration(context, log)</con:script>
	</con:eventHandlers>
</con:soapui-project>